{"version":3,"sources":["components/constants.jsx","components/header/Login.jsx","components/header/Logout.jsx","components/header/Header.jsx","components/Settings/CanvasSizeSettings.jsx","components/utils/renderCanvas.js","components/utils/createLink.js","components/Settings/ModalExportMenu.jsx","components/Settings/ExportResultSetting.jsx","components/Settings/ImportMenu.jsx","components/Settings/SettingsButton.jsx","components/Settings/Settings.jsx","components/FramesPreview/PreviewArea.jsx","components/FramesPreview/PreviewSettings.jsx","components/FramesPreview/FramesPreview.jsx","components/FramesControl/CopyButton.jsx","components/FramesControl/DeleteButton.jsx","components/FramesControl/Frame.jsx","components/FramesControl/AddFrameButton.jsx","components/FramesControl/FramesControl.jsx","components/Canvas/FrameInfo.jsx","components/utils/makeFrameCopy.js","components/utils/getCoordinates.js","components/utils/createRectangle.js","components/utils/createCircle.js","components/utils/bucketFunction.js","components/utils/CreateBaseFrame.js","components/utils/lineDraw.js","components/utils/lighten.js","components/utils/colorSamePixelsFunction.js","components/utils/erotateClockwis.js","components/utils/moveFunction.js","components/utils/dithering.js","components/utils/negativeImage.js","components/Canvas/Canvas.jsx","components/utils/selectShape.js","components/utils/joinFrames.js","components/Canvas/CanvasContainer.jsx","components/LayerSettings/Layer.jsx","components/LayerSettings/LayerSettings.jsx","components/utils/hexToRGB.js","components/Tools/ToolButton.jsx","components/Tools/ToolsControl.jsx","components/Tools/ColorButton.jsx","components/Tools/ColorPicker.jsx","components/Tools/OpenKeyboardMenuButton.jsx","components/Tools/KeyboardSettingsButton.jsx","components/Tools/KeyboardModalMenu.jsx","components/Tools/KeyboardSettings.jsx","components/Tools/Tools.jsx","components/main/Main.jsx","components/landingPage/LandingPage.jsx","components/App.jsx","index.jsx"],"names":["constants","toolButtonsNames","googleKey","Login","_ref","login","react_default","a","createElement","google_login","clientId","buttonText","onSuccess","cookiePolicy","render","renderProps","className","onClick","disabled","type","index_es","icon","faGoogle","Logout","logout","userName","userImg","onLogoutSuccess","src","alt","width","height","Header","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","isLogin","bind","assertThisInitialized","response","_response$profileObj","profileObj","givenName","imageUrl","setState","_this$state","toggleLandingPage","header_Login","header_Logout","React","Component","CanvasSizeSettings","changeCanvasSize","renderCanvas","canvas","frame","pixelSize","clearCanvas","arguments","length","undefined","context","getContext","clearRect","forEach","row","i","cell","j","fillStyle","concat","join","fillRect","createLink","data","name","format","link","document","setAttribute","ModalExportMenu","fps","gifBackgroundColor","fileSize","fileName","fpsInput","createRef","sizeInput","colorInput","nameInput","changeFps","changeGifSize","changeGifBackgroundColor","changeGifName","exportGif","exportRSSFormat","root","body","appendChild","removeChild","exportApng","exportSize","layers","encoder","GIFEncoder","currPixelSize","setDelay","start","addFrame","finish","buffer","out","getData","b64encoded","btoa","String","fromCharCode","apply","datajpg","click","framesArr","uintarr","getImageData","push","delay","delayMap","Array","fill","apng","UPNG","encode","Uint8Array","result","JSON","stringify","Blob","textFile","window","URL","createObjectURL","newFPS","newBackgroundColor","newFileSize","newFileName","_this2","_this$props3","changeExportMenuStatus","modalMenuFormat","_this$state3","ReactDOM","createPortal","value","onChange","current","ref","style","backgroundColor","min","max","choseExportFunction","faTimes","ExportResultSetting","toggleModalMenuFormat","newFormat","_this$props","ModalExportMenu_ModalExportMenu","ImportMenu","input","importLayers","onInput","e","SettingsButton","id","atciveSettingButton","Settings","settings","openMenu","closeMenu","stopPropagation","classList","add","remove","icons","faCog","faSave","faFolderOpen","map","item","Settings_SettingsButton","key","Settings_CanvasSizeSettings","Settings_ExportResultSetting","ImportMenu_ImportMenu","PreviewArea","animateFramesPreview","clearTimeout","timer","fpsInputValue","x","setInterval","Frame","PreviewSettings","getInpuValue","faCompress","FramesPreview","previewArea","toggleFullScreen","fullscreenElement","exitFullscreen","requestFullscreen","FramesPreview_PreviewArea","FramesPreview_PreviewSettings","handleInput","CopyButton","faCopy","DeleteButton","faTrash","animateFrames","frames","_this$props2","active","deleteFrame","copyFrame","role","draggable","FramesControl_DeleteButton","FramesControl_CopyButton","AddFrameButton","faPlus","FramesControl","dropZone","ondragstart","event","startId","target","getAttribute","ondragenter","parentElement","contains","ondragleave","ondragover","preventDefault","ondrop","replaceLayer","targetId","_this3","currentFrame","FramesControl_Frame","dragenter","dragEnter","FramesControl_AddFrameButton","FrameInfo","mousePosX","mousePosY","canvasSize","framesLength","isNeedCoords","makeFrameCopy","parse","getCoordinates","nativeEvent","Math","floor","offsetX","y","offsetY","createRectangle","color","startX","startY","clone","coordinates","deltaX","deltaY","minY","minX","abs","createCircle","R","delta","leftIndex","rightIndex","upIndex","downIndex","leftBorderCrossed","rightBorderCrossed","upBorderCrossed","downBorderCrossed","errorY","errorX","bucketFunction","sCoords","startColor","stack","position","pop","CreateBaseFrame","from","lineDraw","isMirror","signX","signY","currX","currY","error","center","error2","lighten","step","shade","colorSamePixelsFunction","erotateClockwis","n","tmp","moveFunction","slice","dithering","mainColor","secondaryColor","negativeImage","r","g","b","MainCanvas","penOrEraserOrMirror","chooseToolFunction","rectangleAndCircle","stroke","rotateFrame","moveFrame","ditheringFrame","bucket","shapeSelection","activeToolId","colorSamePixels","colorPicker","negativeOrBroom","changeFrame","shapeInfo","shape","selectShape","startCoords","startShape","onmousemove","currCoords","onmouseup","reuslt","firstFrame","secondFrame","joinFrames","_this$props4","changeColor","which","_this$props5","currentCoords","_this$props6","startFrame","_this$props7","_this$props8","colorRGBA","_this$props9","_this$props10","chozenFunction","_this$props11","_this$props12","coords","splice","_this$props13","onMouseDown","onContextMenu","PureComponent","CanvasContainer","changeMousePosition","deleteCoords","canvasContainer","onMouseMove","onMouseLeave","Canvas","Canvas_FrameInfo","Layer","deleteLayer","changeCurrentLayer","currentLayer","upLayer","downLayer","faAngleDown","faAngleUp","LayerSettings","addLayer","layer","LayerSettings_Layer","hexToRgb","hex","replace","m","substring","match","parseInt","ToolButton","ToolsControl","Icons","faPen","faEraser","faFillDrip","faCircle","faSquare","faThumbtack","faRadiation","faSun","faGripLinesVertical","faUndoAlt","faHandPaper","faChessBoard","faEyeDropper","faMagic","faCameraRetro","faBroom","Tools_ToolButton","ColorButton","buttonClass","ColorPicker","swapColor","Tools_ColorButton","faSyncAlt","OpenKeyboardMenuButton","toggleMenuStatus","faKeyboard","KeyboardSettingsButton","code","handleClick","activeKeyButton","defaultProps","KeyboardModalMenu","keyboardSettingsWindow","buttonsConfiguration","changeButtonConfig","onkeydown","letter","toUpperCase","index","indexOf","index2","toggle","Tools_KeyboardSettingsButton","KeyboardSettings","isModalactive","changeToolId","KeyboardModalMenu_KeyboardModalMenu","Tools","handleColorPickerClick","Tools_ToolsControl","Tools_ColorPicker","KeyboardSettings_KeyboardSettings","Main","handleFrameClick","newState","localStorage","getItem","onunload","jsonState","setItem","_this$state2","targetButton","_this$state4","newCanvasSize","_this$state5","pixelDelta","querySelector","backgroundSize","unshift","_this$state6","framesCount","newLayer","layerId","upedLayer","toConsumableArray","downedLayer","newlayers","framesCopy","file","files","shift","reader","FileReader","onload","contents","readAsText","newButtonConfig","_this$state7","components_Tools_Tools","components_FramesControl_FramesControl","components_Canvas_CanvasContainer","components_FramesPreview_FramesPreview","LayerSettings_LayerSettings","components_Settings_Settings","LandingPage","href","faGithubSquare","App","isLandingPage","header_Header","landingPage_LandingPage","main_Main","components_App","getElementById"],"mappings":"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","file":"static/js/main.5908e8d7.chunk.js","sourcesContent":["export default {\n  toolButtonsNames: [\n    'pen',\n    'eraser',\n    'paintBucket',\n    'circle',\n    'rectangle',\n    'stroke',\n    'paintAllPixels',\n    'lighten',\n    'mirror',\n    'rotate90deg',\n    'move',\n    'dithering',\n    'colorPicker',\n    'shapeSelection',\n    'negative',\n    'broom',\n  ],\n  googleKey: '508015143841-qqc5pr7u0majsitstuntcpuo45ocgfh1.apps.googleusercontent.com',\n};\n","import React from 'react';\nimport { GoogleLogin } from 'react-google-login';\nimport PropTypes from 'prop-types';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faGoogle } from '@fortawesome/free-brands-svg-icons';\nimport constants from '../constants';\n\n\nfunction Login({ login }) {\n  return (\n    <GoogleLogin\n      clientId={constants.googleKey}\n      buttonText=\"Login\"\n      onSuccess={login}\n      cookiePolicy=\"single_host_origin\"\n      render={renderProps => (\n        <button\n          className=\"login-button\"\n          onClick={renderProps.onClick}\n          disabled={renderProps.disabled}\n          type=\"button\"\n        >\n          <FontAwesomeIcon icon={faGoogle} />\n          {'  '}\n          Sign in\n        </button>\n      )}\n    />\n  );\n}\n\nLogin.propTypes = { login: PropTypes.func.isRequired };\n\nexport default Login;\n","import React from 'react';\nimport { GoogleLogout } from 'react-google-login';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faGoogle } from '@fortawesome/free-brands-svg-icons';\nimport PropTypes from 'prop-types';\n\nfunction Logout({ logout, userName, userImg }) {\n  return (\n    <div className=\"logout-container\">\n      <div className=\"logout-button-container\">\n        <span>\n          ,\n          {' '}\n          {userName}\n        </span>\n\n        <GoogleLogout\n          buttonText=\"Logout\"\n          onLogoutSuccess={logout}\n          render={renderProps => (\n            <button\n              className=\"logout-button\"\n              onClick={renderProps.onClick}\n              disabled={renderProps.disabled}\n              type=\"button\"\n            >\n              <FontAwesomeIcon icon={faGoogle} />\n              {'  '}\n              Sign out\n            </button>\n          )}\n        />\n      </div>\n\n      <img src={userImg} alt={userImg} width=\"50\" height=\"50\" />\n    </div>\n  );\n}\n\nLogout.propTypes = {\n  logout: PropTypes.func.isRequired,\n  userName: PropTypes.string.isRequired,\n  userImg: PropTypes.string.isRequired,\n};\n\nexport default Logout;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Login from './Login';\nimport Logout from './Logout';\nimport './header.scss';\n\nclass Header extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLogin: false,\n      userImg: null,\n      userName: null,\n    };\n\n    this.login = this.login.bind(this);\n    this.logout = this.logout.bind(this);\n  }\n\n  login(response) {\n    const { givenName, imageUrl } = response.profileObj;\n    this.setState({\n      isLogin: true,\n      userImg: imageUrl,\n      userName: givenName,\n    });\n  }\n\n  logout() {\n    this.setState({\n      isLogin: false,\n      userImg: null,\n      userName: null,\n    });\n  }\n\n  render() {\n    const { isLogin, userImg, userName } = this.state;\n    const { toggleLandingPage } = this.props;\n    return (\n      <div className=\"app-header\">\n\n        <button\n          className=\"piskel-button\"\n          onClick={toggleLandingPage}\n          type=\"button\"\n        >\n          <h1>Piskel</h1>\n        </button>\n\n        <div className=\"header-buttons-container\">\n          {!isLogin && <Login login={this.login} />}\n          {isLogin && <Logout userName={userName} userImg={userImg} logout={this.logout} />}\n        </div>\n      </div>\n    );\n  }\n}\n\nHeader.propTypes = {\n  toggleLandingPage: PropTypes.func.isRequired,\n};\n\n\nexport default Header;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction CanvasSizeSettings({ changeCanvasSize }) {\n  return (\n    <div className=\"settings-area\">\n      <button\n        className=\"settings-button\"\n        onClick={() => changeCanvasSize(32)}\n        type=\"button\"\n      >\n        32x32\n      </button>\n\n      <button\n        className=\"settings-button\"\n        onClick={() => changeCanvasSize(64)}\n        type=\"button\"\n      >\n        64x64\n      </button>\n\n      <button\n        className=\"settings-button\"\n        onClick={() => changeCanvasSize(128)}\n        type=\"button\"\n      >\n        128x128\n      </button>\n    </div>\n  );\n}\n\nCanvasSizeSettings.propTypes = {\n  changeCanvasSize: PropTypes.func.isRequired,\n};\n\nexport default CanvasSizeSettings;\n","function renderCanvas(canvas, frame, pixelSize, clearCanvas = true) {\n  const context = canvas.getContext('2d');\n\n  if (clearCanvas) context.clearRect(0, 0, canvas.width, canvas.height);\n\n  frame.forEach((row, i) => {\n    row.forEach((cell, j) => {\n      if (!cell) return;\n      context.fillStyle = `rgb(${cell.join()})`;\n      context.fillRect(pixelSize * i, pixelSize * j, pixelSize, pixelSize);\n    });\n  });\n}\n\nexport default renderCanvas;\n","function createLink(data, name, format) {\n  const link = document.createElement('a');\n  link.setAttribute('href', data);\n  link.setAttribute('download', `${name}.${format}`);\n\n  return link;\n}\n\nexport default createLink;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport GIFEncoder from 'gif-encoder-2';\nimport UPNG from 'upng-js';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTimes } from '@fortawesome/free-solid-svg-icons';\nimport renderCanvas from '../utils/renderCanvas';\nimport createLink from '../utils/createLink';\n\nexport default class ModalExportMenu extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      fps: 12,\n      gifBackgroundColor: '#969696',\n      fileSize: 4,\n      fileName: 'piskel-clone',\n    };\n\n    this.fpsInput = React.createRef();\n    this.sizeInput = React.createRef();\n    this.colorInput = React.createRef();\n    this.nameInput = React.createRef();\n\n    this.changeFps = this.changeFps.bind(this);\n    this.changeGifSize = this.changeGifSize.bind(this);\n    this.changeGifBackgroundColor = this.changeGifBackgroundColor.bind(this);\n    this.changeGifName = this.changeGifName.bind(this);\n    this.exportGif = this.exportGif.bind(this);\n    this.exportRSSFormat = this.exportRSSFormat.bind(this);\n  }\n\n  componentWillMount() {\n    this.root = document.createElement('div');\n    this.root.className = 'modal-export-menu';\n    document.body.appendChild(this.root);\n  }\n\n  componentWillUnmount() {\n    document.body.removeChild(this.root);\n  }\n\n  choseExportFunction(format) {\n    if (format === '.gif') this.exportGif();\n    if (format === '.apng') this.exportApng();\n    if (format === '.rss') this.exportRSSFormat();\n  }\n\n  async exportGif() {\n    const {\n      gifBackgroundColor,\n      fps,\n      fileSize,\n      fileName,\n    } = this.state;\n    const exportSize = fileSize * 32;\n    const { layers, pixelSize } = this.props;\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d');\n    const encoder = new GIFEncoder(exportSize, exportSize);\n    const standartCanvasSize = 768;\n    const currPixelSize = (exportSize / standartCanvasSize) * pixelSize;\n\n    canvas.width = exportSize;\n    canvas.height = exportSize;\n    encoder.setDelay(1000 / fps);\n    encoder.start();\n\n    for (let i = 0; i < layers[0].length; i += 1) {\n      context.fillStyle = gifBackgroundColor;\n      context.fillRect(0, 0, exportSize, exportSize);\n\n      for (let j = 0; j < layers.length; j += 1) {\n        renderCanvas(canvas, layers[j][i], currPixelSize, false);\n      }\n\n      encoder.addFrame(context);\n      context.clearRect(0, 0, exportSize, exportSize);\n    }\n\n    encoder.finish();\n\n    const buffer = encoder.out.getData();\n    const b64encoded = btoa(String.fromCharCode.apply(null, buffer));\n    const datajpg = `data:image/jpg;base64,${b64encoded}`;\n    const link = createLink(datajpg, fileName, 'gif');\n\n    link.click();\n  }\n\n  async exportApng() {\n    const canvas = document.createElement('canvas');\n    const { fps, fileSize, fileName } = this.state;\n    const exportSize = fileSize * 32;\n    const { layers, pixelSize } = this.props;\n    canvas.width = exportSize;\n    canvas.height = exportSize;\n    const context = canvas.getContext('2d');\n    const standartCanvasSize = 768;\n    const currPixelSize = (exportSize / standartCanvasSize) * pixelSize;\n    const framesArr = [];\n\n    for (let i = 0; i < layers[0].length; i += 1) {\n      for (let j = 0; j < layers.length; j += 1) {\n        renderCanvas(canvas, layers[j][i], currPixelSize, false);\n      }\n\n      const uintarr = context.getImageData(0, 0, exportSize, exportSize).data;\n\n      framesArr.push(uintarr.buffer);\n      context.clearRect(0, 0, exportSize, exportSize);\n    }\n\n    const delay = 1000 / fps;\n    const delayMap = Array(framesArr.length).fill(delay);\n    const apng = UPNG.encode(framesArr, exportSize, exportSize, 0, delayMap);\n    const b64encoded = btoa(String.fromCharCode.apply(null, new Uint8Array(apng)));\n    const datajpg = `data:image/jpg;base64,${b64encoded}`;\n    const link = createLink(datajpg, fileName, 'apng');\n\n    link.click();\n  }\n\n  async exportRSSFormat() {\n    const { layers } = this.props;\n    const { fileName } = this.state;\n    const result = JSON.stringify(layers);\n    const data = new Blob([result], { type: 'text/plain' });\n    const textFile = window.URL.createObjectURL(data);\n    const link = createLink(textFile, fileName, 'rss');\n    link.click();\n  }\n\n  changeFps(newFPS) {\n    this.setState({\n      fps: newFPS,\n    });\n  }\n\n  changeGifBackgroundColor(newBackgroundColor) {\n    this.setState({\n      gifBackgroundColor: newBackgroundColor,\n    });\n  }\n\n  changeGifSize(newFileSize) {\n    this.setState({\n      fileSize: newFileSize,\n    });\n  }\n\n  changeGifName(newFileName) {\n    this.setState({\n      fileName: newFileName,\n    });\n  }\n\n  render() {\n    const { changeExportMenuStatus, modalMenuFormat } = this.props;\n    const {\n      gifBackgroundColor,\n      fps,\n      fileSize,\n      fileName,\n    } = this.state;\n\n    return ReactDOM.createPortal(\n      <div className=\"export-menu\">\n        <span>\n          Export\n          {' '}\n          {modalMenuFormat}\n        </span>\n        <div className=\"export-field\">\n          File name:\n          <input\n            className=\"nameInput\"\n            type=\"text\"\n            value={fileName}\n            onChange={() => this.changeGifName(this.nameInput.current.value)}\n            ref={this.nameInput}\n          />\n        </div>\n        {modalMenuFormat === '.gif' && (\n          <div className=\"export-field\">\n            Gif background color:\n            <button\n              className=\"color-button\"\n              style={{ backgroundColor: gifBackgroundColor }}\n              onClick={() => this.colorInput.current.click()}\n              type=\"button\"\n            >\n              <input\n                className=\"color-input\"\n                type=\"color\"\n                onChange={() => this.changeGifBackgroundColor(this.colorInput.current.value)}\n                ref={this.colorInput}\n                value={gifBackgroundColor}\n              />\n            </button>\n          </div>\n        )}\n\n        {modalMenuFormat !== '.rss' && (\n          <div className=\"export-field\">\n            FPS rate:\n            {' '}\n            {fps}\n\n            <input\n              type=\"range\"\n              className=\"fps-input\"\n              onChange={() => this.changeFps(this.fpsInput.current.value)}\n              value={fps}\n              min=\"0\"\n              max=\"24\"\n              ref={this.fpsInput}\n            />\n          </div>\n        )}\n\n        {modalMenuFormat !== '.rss' && (\n          <div className=\"export-field\">\n            File dimensions:\n            {' '}\n            {fileSize * 32}\n\n            <input\n              type=\"range\"\n              className=\"size-input\"\n              onChange={() => this.changeGifSize(this.sizeInput.current.value)}\n              value={fileSize}\n              min=\"2\"\n              max=\"24\"\n              ref={this.sizeInput}\n            />\n          </div>\n        )}\n\n        <button\n          onClick={() => {\n            this.choseExportFunction(modalMenuFormat);\n            changeExportMenuStatus(null);\n          }}\n\n          className=\"export-button\"\n          type=\"button\"\n        >\n          Export\n        </button>\n\n        <button\n          className=\"export-exit-button\"\n          onClick={() => changeExportMenuStatus(null)}\n          type=\"button\"\n        >\n          <FontAwesomeIcon icon={faTimes} />\n        </button>\n      </div>,\n      this.root,\n    );\n  }\n}\n\nModalExportMenu.propTypes = {\n  changeExportMenuStatus: PropTypes.func.isRequired,\n  layers: PropTypes.arrayOf(PropTypes.array).isRequired,\n  pixelSize: PropTypes.number.isRequired,\n  modalMenuFormat: PropTypes.string.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ModalExportMenu from './ModalExportMenu';\n\nclass ExportResultSetting extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      modalMenuFormat: null,\n    };\n\n    this.changeExportMenuStatus = this.changeExportMenuStatus.bind(this);\n  }\n\n\n  changeExportMenuStatus(toggleModalMenuFormat) {\n    const { format } = this.state;\n    const newFormat = format === toggleModalMenuFormat ? null : toggleModalMenuFormat;\n\n    this.setState({\n      modalMenuFormat: newFormat,\n    });\n  }\n\n  render() {\n    const { modalMenuFormat } = this.state;\n    const { layers, pixelSize } = this.props;\n\n    return (\n      <div className=\"settings-area\">\n        <button type=\"button\" className=\"settings-button\" onClick={() => this.changeExportMenuStatus('.gif')}>.gif</button>\n        <button type=\"button\" className=\"settings-button\" onClick={() => this.changeExportMenuStatus('.apng')}>.apng</button>\n        <button type=\"button\" className=\"settings-button\" onClick={() => this.changeExportMenuStatus('.rss')}>.rss</button>\n        {modalMenuFormat && (\n          <ModalExportMenu\n            changeExportMenuStatus={this.changeExportMenuStatus}\n            modalMenuFormat={modalMenuFormat}\n            layers={layers}\n            pixelSize={pixelSize}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nExportResultSetting.propTypes = {\n  layers: PropTypes.arrayOf(PropTypes.array).isRequired,\n  pixelSize: PropTypes.number.isRequired,\n};\n\nexport default ExportResultSetting;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class ImportMenu extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.input = React.createRef();\n  }\n\n  render() {\n    const { importLayers } = this.props;\n    return (\n      <div className=\"settings-area\">\n        <button\n          type=\"button\"\n          className=\"import-button\"\n          onClick={() => this.input.current.click()}\n        >\n          Import .rss\n          <input\n            type=\"file\"\n            className=\"import-input\"\n            onInput={e => importLayers(e)}\n            ref={this.input}\n          />\n        </button>\n      </div>\n    );\n  }\n}\n\nImportMenu.propTypes = {\n  importLayers: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport PropTypes from 'prop-types';\n\nfunction SettingsButton({\n  icon,\n  onClick,\n  id,\n  atciveSettingButton,\n}) {\n  return (\n    <button\n      className={`${atciveSettingButton === id ? 'active ' : ''}settings-button`}\n      onClick={e => onClick(id, e)}\n      type=\"button\"\n    >\n      <FontAwesomeIcon icon={icon} />\n    </button>\n  );\n}\n\nSettingsButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n\n  icon: PropTypes.shape({\n    iconName: PropTypes.string.isRequired,\n    prefix: PropTypes.string.isRequired,\n    icon: PropTypes.array.isRequired,\n  }).isRequired,\n\n  id: PropTypes.number.isRequired,\n  atciveSettingButton: PropTypes.number.isRequired,\n};\n\nexport default SettingsButton;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './settings.scss';\nimport { faCog, faTimes, faFolderOpen } from '@fortawesome/free-solid-svg-icons';\nimport { faSave } from '@fortawesome/free-regular-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport key from 'weak-key';\nimport CanvasSizeSettings from './CanvasSizeSettings';\nimport ExportResultSetting from './ExportResultSetting';\nimport ImportMenu from './ImportMenu';\nimport SettingsButton from './SettingsButton';\n\n\nclass Settings extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      atciveSettingButton: 0,\n    };\n\n    this.settings = React.createRef();\n    this.openMenu = this.openMenu.bind(this);\n    this.closeMenu = this.closeMenu.bind(this);\n  }\n\n  openMenu(id, e) {\n    e.stopPropagation();\n    const settings = this.settings.current;\n    settings.classList.add('activeMenu');\n\n    this.setState({\n      atciveSettingButton: id,\n    });\n  }\n\n  closeMenu() {\n    const settings = this.settings.current;\n    settings.classList.remove('activeMenu');\n  }\n\n  render() {\n    const icons = [faCog, faSave, faFolderOpen];\n    const { atciveSettingButton } = this.state;\n    const {\n      changeCanvasSize,\n      layers,\n      pixelSize,\n      importLayers,\n    } = this.props;\n\n    return (\n      <div\n        className=\"settings\"\n        ref={this.settings}\n      >\n        <div className=\"buttons-container\">\n          {icons.map((item, i) => (\n            <SettingsButton\n              icon={item}\n              atciveSettingButton={atciveSettingButton}\n              id={i}\n              key={key(item)}\n              onClick={this.openMenu}\n            />\n          ))\n          }\n        </div>\n\n        {atciveSettingButton === 0 && <CanvasSizeSettings changeCanvasSize={changeCanvasSize} />}\n        {atciveSettingButton === 1\n          && <ExportResultSetting layers={layers} pixelSize={pixelSize} />\n        }\n        {atciveSettingButton === 2 && <ImportMenu importLayers={importLayers} />}\n\n\n        <button\n          className=\"exit-menu-button\"\n          onClick={this.closeMenu}\n          type=\"button\"\n        >\n          <FontAwesomeIcon icon={faTimes} />\n        </button>\n      </div>\n    );\n  }\n}\n\nSettings.propTypes = {\n  changeCanvasSize: PropTypes.func.isRequired,\n  layers: PropTypes.arrayOf(PropTypes.array).isRequired,\n  pixelSize: PropTypes.number.isRequired,\n  importLayers: PropTypes.func.isRequired,\n};\n\nexport default Settings;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport renderCanvas from '../utils/renderCanvas';\n\nclass PreviewArea extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.animateFramesPreview = this.animateFramesPreview.bind(this);\n    this.canvas = React.createRef();\n  }\n\n  componentDidUpdate() {\n    clearTimeout(this.timer);\n    this.animateFramesPreview();\n  }\n\n  animateFramesPreview() {\n    const canvas = this.canvas.current;\n    const { layers, fpsInputValue, pixelSize } = this.props;\n    if (fpsInputValue === 0) return;\n    let x = 0;\n\n    function Frame() {\n      if (x >= layers[0].length) x = 0;\n      renderCanvas(canvas, layers[0][x], pixelSize / 2);\n\n      for (let i = 1; i < layers.length; i += 1) {\n        renderCanvas(canvas, layers[i][x], pixelSize / 2, false);\n      }\n\n      x += 1;\n    }\n\n    this.timer = setInterval(() => Frame(), 1000 / fpsInputValue);\n  }\n\n  render() {\n    return (\n      <canvas\n        className=\"preview-canvas\"\n        width={384}\n        height={384}\n        ref={this.canvas}\n      />\n    );\n  }\n}\n\nPreviewArea.propTypes = {\n  layers: PropTypes.arrayOf(PropTypes.array).isRequired,\n  pixelSize: PropTypes.number.isRequired,\n  fpsInputValue: PropTypes.number.isRequired,\n};\n\nexport default PreviewArea;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCompress } from '@fortawesome/free-solid-svg-icons';\n\n\nclass PreviewSettings extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getInpuValue = this.getInpuValue.bind(this);\n    this.input = React.createRef();\n  }\n\n  getInpuValue() {\n    const { onInput } = this.props;\n    onInput(this.input.current.value);\n  }\n\n  render() {\n    const { value, onClick } = this.props;\n    return (\n      <div className=\"preview-setings\">\n        <span className=\"fps-count\">\n          { value }\n          {' '}\n          FPS\n        </span>\n\n        <input\n          type=\"range\"\n          className=\"fps-input\"\n          value={value}\n          onChange={this.getInpuValue}\n          min=\"0\"\n          max=\"24\"\n          ref={this.input}\n        />\n\n        <button\n          onClick={onClick}\n          className=\"full-screen-button\"\n          type=\"button\"\n        >\n          <FontAwesomeIcon icon={faCompress} />\n        </button>\n      </div>\n    );\n  }\n}\n\nPreviewSettings.propTypes = {\n  onInput: PropTypes.func.isRequired,\n  onClick: PropTypes.func.isRequired,\n  value: PropTypes.number.isRequired,\n};\n\nexport default PreviewSettings;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport PreviewArea from './PreviewArea';\nimport PreviewSettings from './PreviewSettings';\nimport './FramesPreview.scss';\n\nclass FramesPreview extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fpsInputValue: 10,\n    };\n\n    this.previewArea = React.createRef();\n    this.toggleFullScreen = this.toggleFullScreen.bind(this);\n  }\n\n  handleInput(value) {\n    this.setState({ fpsInputValue: +value });\n  }\n\n  toggleFullScreen() {\n    if (!document.fullscreenElement) {\n      this.previewArea.current.requestFullscreen();\n    } else {\n      document.exitFullscreen();\n    }\n  }\n\n  render() {\n    const { layers, pixelSize } = this.props;\n    const { fpsInputValue } = this.state;\n\n    return (\n      <div className=\"frames-preview\" ref={this.previewArea}>\n        <PreviewArea\n          fpsInputValue={fpsInputValue}\n          layers={layers}\n          pixelSize={pixelSize}\n        />\n\n        <PreviewSettings\n          value={fpsInputValue}\n          onInput={value => this.handleInput(value)}\n          onClick={this.toggleFullScreen}\n        />\n      </div>\n    );\n  }\n}\n\nFramesPreview.propTypes = {\n  layers: PropTypes.arrayOf(PropTypes.array).isRequired,\n  pixelSize: PropTypes.number.isRequired,\n};\n\nexport default FramesPreview;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCopy } from '@fortawesome/free-solid-svg-icons';\n\nfunction CopyButton({ onClick }) {\n  return (\n    <button\n      className=\"frame-copy\"\n      onClick={onClick}\n      type=\"button\"\n    >\n      <FontAwesomeIcon icon={faCopy} />\n    </button>\n  );\n}\n\nCopyButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default CopyButton;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTrash } from '@fortawesome/free-solid-svg-icons';\n\nfunction DeleteButton({ onClick }) {\n  return (\n    <button\n      className=\"frame-delete\"\n      onClick={onClick}\n      type=\"button\"\n    >\n      <FontAwesomeIcon icon={faTrash} />\n    </button>\n  );\n}\n\nDeleteButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default DeleteButton;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CopyButton from './CopyButton';\nimport DelteButton from './DeleteButton';\nimport renderCanvas from '../utils/renderCanvas';\n\n\nclass Frame extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.canvas = React.createRef();\n  }\n\n  componentDidMount() {\n    this.animateFrames();\n  }\n\n  componentDidUpdate() {\n    this.animateFrames();\n  }\n\n  animateFrames() {\n    const canvas = this.canvas.current;\n    const { id, frames, pixelSize } = this.props;\n    const frame = frames[id];\n    renderCanvas(canvas, frame, pixelSize / 4);\n  }\n\n  render() {\n    const {\n      active,\n      onClick,\n      id,\n      deleteFrame,\n      copyFrame,\n      frames,\n    } = this.props;\n\n    return (\n      <div\n        className={`${active ? 'active' : null} frame`}\n        onClick={() => onClick(id)}\n        role=\"presentation\"\n        draggable=\"true\"\n        id={id}\n      >\n        <canvas\n          width=\"192\"\n          height=\"192\"\n          id={id}\n          ref={this.canvas}\n        />\n\n        <div className=\"frame-count\">{ id + 1 }</div>\n\n        {frames.length > 1 && <DelteButton onClick={e => deleteFrame(id, e)} />}\n\n        <CopyButton onClick={e => copyFrame(id, e)} />\n\n      </div>\n    );\n  }\n}\n\nFrame.propTypes = {\n  frames: PropTypes.arrayOf(PropTypes.array).isRequired,\n  onClick: PropTypes.func.isRequired,\n  copyFrame: PropTypes.func.isRequired,\n  deleteFrame: PropTypes.func.isRequired,\n  pixelSize: PropTypes.number.isRequired,\n  id: PropTypes.number.isRequired,\n  active: PropTypes.bool.isRequired,\n};\n\nexport default Frame;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nfunction AddFrameButton({ onClick }) {\n  return (\n    <button\n      className=\"add-frame-button\"\n      onClick={onClick}\n      type=\"button\"\n    >\n      <FontAwesomeIcon icon={faPlus} />\n      Add frame\n    </button>\n  );\n}\n\nAddFrameButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default AddFrameButton;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport key from 'weak-key';\nimport Frame from './Frame';\nimport AddFrameButton from './AddFrameButton';\nimport './FrameControle.scss';\n\n\nclass FramesControl extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.dropZone = React.createRef();\n  }\n\n  componentDidMount() {\n    const dropZone = this.dropZone.current;\n\n    dropZone.ondragstart = (event) => {\n      this.startId = event.target.getAttribute('id');\n    };\n\n    dropZone.ondragenter = (event) => {\n      if (event.target.parentElement.classList.contains('frame')) {\n        event.target.parentElement.classList.add('drag-hovered');\n      }\n    };\n\n    dropZone.ondragleave = (event) => {\n      if (event.target.parentElement.classList.contains('frame')) {\n        event.target.parentElement.classList.remove('drag-hovered');\n      }\n    };\n\n    dropZone.ondragover = e => e.preventDefault();\n\n    dropZone.ondrop = (event) => {\n      const { replaceLayer } = this.props;\n      const targetId = event.target.getAttribute('id');\n\n      event.preventDefault();\n      event.target.parentElement.classList.remove('drag-hovered');\n      if (this.startId === targetId) return;\n      replaceLayer(this.startId, targetId);\n    };\n  }\n\n\n  render() {\n    const {\n      onClick,\n      frames,\n      currentFrame,\n      copyFrame,\n      deleteFrame,\n      addFrame,\n      pixelSize,\n    } = this.props;\n\n    return (\n      <div\n        className=\"frames-controle\"\n        ref={this.dropZone}\n      >\n        {frames.map((frame, i) => (\n          <Frame\n            onClick={onClick}\n            frames={frames}\n            key={key(frame)}\n            id={i}\n            active={currentFrame === i}\n            copyFrame={copyFrame}\n            deleteFrame={deleteFrame}\n            pixelSize={pixelSize}\n            dragenter={this.dragEnter}\n          />\n        ))\n        }\n\n        <AddFrameButton\n          onClick={addFrame}\n        />\n      </div>\n    );\n  }\n}\n\nFramesControl.propTypes = {\n  frames: PropTypes.arrayOf(PropTypes.array).isRequired,\n  replaceLayer: PropTypes.func.isRequired,\n  onClick: PropTypes.func.isRequired,\n  currentFrame: PropTypes.number.isRequired,\n  copyFrame: PropTypes.func.isRequired,\n  deleteFrame: PropTypes.func.isRequired,\n  addFrame: PropTypes.func.isRequired,\n  pixelSize: PropTypes.number.isRequired,\n};\n\nexport default FramesControl;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction FrameInfo({\n  mousePosX,\n  mousePosY,\n  canvasSize,\n  framesLength,\n  currentFrame,\n  isNeedCoords,\n}) {\n  return (\n    <div className=\"frame-info\">\n      <span>\n        {currentFrame + 1}\n        /\n        {framesLength}\n      </span>\n      <span>\n        [\n        {canvasSize}\n        x\n        {canvasSize}\n        ]\n      </span>\n      {isNeedCoords && (\n        <span>\n          {mousePosX}\n          x\n          {mousePosY}\n        </span>\n      )}\n    </div>\n  );\n}\n\nFrameInfo.propTypes = {\n  mousePosX: PropTypes.number.isRequired,\n  mousePosY: PropTypes.number.isRequired,\n  canvasSize: PropTypes.number.isRequired,\n  framesLength: PropTypes.number.isRequired,\n  currentFrame: PropTypes.number.isRequired,\n  isNeedCoords: PropTypes.bool.isRequired,\n};\n\nexport default FrameInfo;\n","function makeFrameCopy(frame) {\n  return JSON.parse(JSON.stringify(frame));\n}\n\nexport default makeFrameCopy;\n","function getCoordinates(e, pixelSize) {\n  const event = e.nativeEvent ? e.nativeEvent : e;\n  const x = Math.floor(event.offsetX / pixelSize);\n  const y = Math.floor(event.offsetY / pixelSize);\n\n  return { x, y };\n}\n\nexport default getCoordinates;\n","import makeFrameCopy from './makeFrameCopy';\nimport getCoordinates from './getCoordinates';\n\nfunction createRectangle(frame, e, pixelSize, color, startX, startY) {\n  const clone = makeFrameCopy(frame);\n  const coordinates = getCoordinates(e, pixelSize);\n\n  const deltaX = startX - coordinates.x;\n  const deltaY = startY - coordinates.y;\n\n  const minY = Math.min(startY, coordinates.y);\n  const minX = Math.min(startX, coordinates.x);\n\n  for (let i = minY; i <= minY + Math.abs(deltaY); i += 1) {\n    clone[coordinates.x + deltaX][i] = color;\n    clone[coordinates.x][i] = color;\n  }\n\n  for (let i = minX; i <= minX + Math.abs(deltaX); i += 1) {\n    clone[i][coordinates.y] = color;\n    clone[i][coordinates.y + deltaY] = color;\n  }\n  return clone;\n}\n\nexport default createRectangle;\n","import makeFrameCopy from './makeFrameCopy';\nimport getCoordinates from './getCoordinates';\n\nfunction createCircle(frame, e, pixelSize, color, startX, startY) {\n  const coordinates = getCoordinates(e, pixelSize);\n  const R = Math.max(Math.abs(coordinates.x - startX), Math.abs(coordinates.y - startY));\n  const clone = makeFrameCopy(frame);\n  const canvasSize = clone.length;\n\n  let x = 0;\n  let y = R;\n  let delta = 1 - 2 * R;\n\n  while (y >= 0) {\n    const leftIndex = startX - x;\n    const rightIndex = startX + x;\n    const upIndex = startY - y;\n    const downIndex = startY + y;\n\n    const leftBorderCrossed = leftIndex < 0;\n    const rightBorderCrossed = rightIndex >= canvasSize;\n    const upBorderCrossed = upIndex < 0;\n    const downBorderCrossed = downIndex >= canvasSize;\n    const errorY = 2 * (delta + y) - 1;\n    const errorX = 2 * (delta - x) - 1;\n\n    if (!(rightBorderCrossed || downBorderCrossed)) clone[rightIndex][downIndex] = color;\n    if (!(rightBorderCrossed || upBorderCrossed)) clone[rightIndex][upIndex] = color;\n    if (!(leftBorderCrossed || downBorderCrossed)) clone[leftIndex][downIndex] = color;\n    if (!(leftBorderCrossed || upBorderCrossed)) clone[leftIndex][upIndex] = color;\n\n    if (delta < 0 && errorY <= 0) {\n      delta += (2 * (x + 1)) + 1;\n      x += 1;\n    } else if (delta > 0 && errorX > 0) {\n      delta += 1 - (2 * (y - 1));\n      y -= 1;\n    } else {\n      x += 1;\n      delta += 2 * (x - y);\n      y -= 1;\n    }\n  }\n\n  return clone;\n}\n\nexport default createCircle;\n","import makeFrameCopy from './makeFrameCopy';\nimport getCoordinates from './getCoordinates';\n\nfunction bucketFunction(frame, color, pixelSize, e) {\n  const clone = makeFrameCopy(frame);\n  const sCoords = getCoordinates(e, pixelSize);\n  const canvasSize = clone.length;\n  const startColor = clone[sCoords.x][sCoords.y] ? clone[sCoords.x][sCoords.y].join() : undefined;\n\n  if (startColor !== color.join()) {\n    const stack = [[sCoords.x, sCoords.y]];\n\n    while (stack.length) {\n      const position = stack.pop();\n      const x = position[0];\n      const y = position[1];\n\n      if ((x >= 0 && x < canvasSize) && (y >= 0 && y < canvasSize)) {\n        const correntColor = clone[x][y] ? clone[x][y].join() : undefined;\n\n        if (startColor === correntColor) {\n          clone[x][y] = color;\n          stack.push([x - 1, y], [x + 1, y], [x, y - 1], [x, y + 1]);\n        }\n      }\n    }\n  }\n\n  return clone;\n}\n\nexport default bucketFunction;\n","function CreateBaseFrame(canvasSize) {\n  return Array.from(Array(canvasSize), () => new Array(canvasSize));\n}\n\nexport default CreateBaseFrame;\n","import makeFrameCopy from './makeFrameCopy';\n\nexport default function lineDraw(frame, color, startX, startY, x, y, isMirror = false) {\n  const clone = makeFrameCopy(frame);\n  const deltaX = Math.abs(startX - x);\n  const deltaY = Math.abs(startY - y);\n  const signX = x < startX ? 1 : -1;\n  const signY = y < startY ? 1 : -1;\n  let currX = x;\n  let currY = y;\n  let error = deltaX - deltaY;\n  const center = frame.length / 2;\n\n  do {\n    const error2 = error * 2;\n\n    clone[startX][startY] = color;\n    clone[currX][currY] = color;\n\n    if (isMirror) {\n      const delta = -(currX - center + 1);\n      clone[center + delta][currY] = color;\n    }\n\n    if (error * 2 > -deltaY) {\n      error -= deltaY;\n      currX += signX;\n    }\n\n    if (error2 < deltaX) {\n      error += deltaX;\n      currY += signY;\n    }\n  } while (currX !== startX || currY !== startY);\n\n  return clone;\n}\n","export default function lighten(color, step = 25) {\n  return color ? color.map(shade => Math.min(255, shade + step)) : undefined;\n}\n","import makeFrameCopy from './makeFrameCopy';\n\nfunction colorSamePixelsFunction(frame, color, pixelSize, e) {\n  const clone = makeFrameCopy(frame);\n  const startX = Math.floor(e.offsetX / pixelSize);\n  const startY = Math.floor(e.offsetY / pixelSize);\n  const startColor = clone[startX][startY] ? clone[startX][startY].join() : undefined;\n\n  clone.forEach((row, x) => {\n    row.forEach((cell, y) => {\n      if (cell) {\n        const correntColor = clone[x][y] ? clone[x][y].join() : undefined;\n        if (correntColor === startColor) clone[x][y] = color;\n      }\n    });\n  });\n\n  return clone;\n}\n\nexport default colorSamePixelsFunction;\n","import makeFrameCopy from './makeFrameCopy';\n\nfunction erotateClockwis(frame) {\n  const n = frame.length;\n  const clone = makeFrameCopy(frame);\n\n  for (let i = 0; i < n / 2; i += 1) {\n    for (let j = i; j < n - i - 1; j += 1) {\n      const tmp = clone[i][j];\n\n      clone[i][j] = clone[n - j - 1][i];\n      clone[n - j - 1][i] = clone[n - i - 1][n - j - 1];\n      clone[n - i - 1][n - j - 1] = clone[j][n - i - 1];\n      clone[j][n - i - 1] = tmp;\n    }\n  }\n\n  return clone;\n}\n\nexport default erotateClockwis;\n","import makeFrameCopy from './makeFrameCopy';\n\nfunction moveFunction(frame, startX, startY, x, y) {\n  const deltaX = x - startX;\n  const deltaY = startY - y;\n  let clone = makeFrameCopy(frame);\n  const canvasSize = clone.length;\n\n  if (deltaX > 0) {\n    clone = Array.from(Array(deltaX), () => new Array(canvasSize)\n      .fill(null)).concat(clone.slice(0, -deltaX));\n  }\n\n  if (deltaX < 0) {\n    clone = clone.slice(-deltaX)\n      .concat(Array.from(Array(-deltaX), () => new Array(canvasSize).fill(null)));\n  }\n\n  for (let i = 0; i < canvasSize; i += 1) {\n    if (deltaY < 0) {\n      clone[i] = Array(-deltaY).fill(null).concat(clone[i].slice(0, deltaY));\n    }\n\n    if (deltaY > 0) {\n      clone[i] = clone[i].slice(deltaY).concat((Array(deltaY).fill(null)));\n    }\n  }\n\n  return clone;\n}\n\nexport default moveFunction;\n","import makeFrameCopy from './makeFrameCopy';\n\nfunction dithering(frame, mainColor, secondaryColor, x, y) {\n  const clone = makeFrameCopy(frame);\n\n  clone[x][y] = (x + y) % 2 ? secondaryColor : mainColor;\n\n  return clone;\n}\n\nexport default dithering;\n","import makeFrameCopy from './makeFrameCopy';\n\nfunction negativeImage(frame) {\n  const clone = makeFrameCopy(frame);\n\n  clone.forEach((row, x) => {\n    row.forEach((cell, y) => {\n      if (cell) {\n        const r = cell[0];\n        const g = cell[1];\n        const b = cell[2];\n        clone[x][y] = [255 - r, 255 - g, 255 - b];\n      }\n    });\n  });\n\n  return clone;\n}\n\nexport default negativeImage;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport renderCanvas from '../utils/renderCanvas';\nimport makeFrameCopy from '../utils/makeFrameCopy';\nimport createRectangle from '../utils/createRectangle';\nimport createCircle from '../utils/createCircle';\nimport bucketFunction from '../utils/bucketFunction';\nimport selectShape from '../utils/selectShape';\nimport joinFrames from '../utils/joinFrames';\nimport lineDraw from '../utils/lineDraw';\nimport lighten from '../utils/lighten';\nimport getCoordinates from '../utils/getCoordinates';\nimport colorSamePixelsFunction from '../utils/colorSamePixelsFunction';\nimport erotateClockwis from '../utils/erotateClockwis';\nimport moveFunction from '../utils/moveFunction';\nimport dithering from '../utils/dithering';\nimport negativeImage from '../utils/negativeImage';\nimport CreateBaseFrame from '../utils/CreateBaseFrame';\n\nclass MainCanvas extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.penOrEraserOrMirror = this.penOrEraserOrMirror.bind(this);\n    this.canvas = React.createRef();\n    this.chooseToolFunction = this.chooseToolFunction.bind(this);\n    this.rectangleAndCircle = this.rectangleAndCircle.bind(this);\n    this.stroke = this.stroke.bind(this);\n    this.lighten = this.lighten.bind(this);\n    this.rotateFrame = this.rotateFrame.bind(this);\n    this.moveFrame = this.moveFrame.bind(this);\n    this.ditheringFrame = this.ditheringFrame.bind(this);\n    this.bucket = this.bucket.bind(this);\n    this.shapeSelection = this.shapeSelection.bind(this);\n  }\n\n  componentDidUpdate() {\n    const { frame, pixelSize } = this.props;\n    const canvas = this.canvas.current;\n    renderCanvas(canvas, frame, pixelSize);\n  }\n\n  chooseToolFunction(e) {\n    const { activeToolId } = this.props;\n\n    switch (activeToolId) {\n      case 'pen':\n      case 'eraser':\n      case 'mirror':\n        this.penOrEraserOrMirror(e);\n        break;\n      case 'paintBucket':\n        this.bucket(e);\n        break;\n      case 'shapeSelection':\n        this.shapeSelection(e);\n        break;\n      case 'circle':\n      case 'rectangle':\n        this.rectangleAndCircle(activeToolId, e);\n        break;\n      case 'stroke':\n        this.stroke(e);\n        break;\n      case 'paintAllPixels':\n        this.colorSamePixels(e);\n        break;\n      case 'lighten':\n        this.lighten(e);\n        break;\n      case 'rotate90deg':\n        this.rotateFrame();\n        break;\n      case 'move':\n        this.moveFrame(e);\n        break;\n      case 'dithering':\n        this.ditheringFrame(e);\n        break;\n      case 'colorPicker':\n        this.colorPicker(e);\n        break;\n      case 'negative':\n      case 'broom':\n        this.negativeOrBroom();\n        break;\n      default:\n        break;\n    }\n  }\n\n  shapeSelection(event) {\n    const { frame, pixelSize, changeFrame } = this.props;\n    const canvas = this.canvas.current;\n    const shapeInfo = selectShape(frame, pixelSize, event);\n    const startCoords = getCoordinates(event, pixelSize);\n    const { clone } = shapeInfo;\n    const startShape = shapeInfo.shape;\n    let { shape } = shapeInfo;\n\n    if (!shapeInfo) return;\n\n    canvas.onmousemove = (e) => {\n      const currCoords = getCoordinates(e, pixelSize);\n\n      shape = moveFunction(startShape, startCoords.x, startCoords.y, currCoords.x, currCoords.y);\n      renderCanvas(canvas, clone, pixelSize);\n      renderCanvas(canvas, shape, pixelSize, false);\n    };\n\n    canvas.onmouseup = () => {\n      canvas.onmousemove = null;\n      canvas.onmouseup = null;\n      const reuslt = joinFrames(clone, shape);\n      changeFrame(reuslt);\n    };\n  }\n\n  negativeOrBroom() {\n    const {\n      frame,\n      changeFrame,\n      activeToolId,\n    } = this.props;\n    const newFrame = activeToolId === 'negative' ? negativeImage(frame) : CreateBaseFrame(frame.length);\n\n    changeFrame(newFrame);\n  }\n\n  colorPicker(e) {\n    const { frame, changeColor, pixelSize } = this.props;\n    const coordinates = getCoordinates(e, pixelSize);\n    const color = frame[coordinates.x][coordinates.y];\n    if (!color) return;\n    const targetButton = e.nativeEvent.which;\n    changeColor(color, targetButton);\n  }\n\n  ditheringFrame(event) {\n    const canvas = this.canvas.current;\n    const {\n      frame,\n      mainColor,\n      secondaryColor,\n      pixelSize,\n      changeFrame,\n    } = this.props;\n\n    const startCoords = getCoordinates(event, pixelSize);\n    let clone = dithering(frame, mainColor, secondaryColor, startCoords.x, startCoords.y);\n\n    renderCanvas(canvas, clone, pixelSize);\n\n    canvas.onmousemove = (e) => {\n      const currentCoords = getCoordinates(e, pixelSize);\n      clone = dithering(clone, mainColor, secondaryColor, currentCoords.x, currentCoords.y);\n      renderCanvas(canvas, clone, pixelSize);\n    };\n\n    canvas.onmouseup = () => {\n      canvas.onmousemove = null;\n      canvas.onmouseup = null;\n      changeFrame(clone);\n    };\n  }\n\n  moveFrame(event) {\n    const { frame, pixelSize, changeFrame } = this.props;\n    const canvas = this.canvas.current;\n    const startCoords = getCoordinates(event, pixelSize);\n\n    let clone = makeFrameCopy(frame);\n\n    canvas.onmousemove = (e) => {\n      const startFrame = makeFrameCopy(frame);\n      const currCoords = getCoordinates(e, pixelSize);\n      clone = moveFunction(startFrame, startCoords.x, startCoords.y, currCoords.x, currCoords.y);\n      renderCanvas(canvas, clone, pixelSize);\n    };\n\n    canvas.onmouseup = () => {\n      canvas.onmousemove = null;\n      canvas.onmouseup = null;\n      changeFrame(clone);\n    };\n  }\n\n  rotateFrame() {\n    const { frame, changeFrame } = this.props;\n    const clone = erotateClockwis(frame);\n\n    changeFrame(clone);\n  }\n\n  colorSamePixels(e) {\n    const {\n      frame,\n      mainColor,\n      secondaryColor,\n      pixelSize,\n      changeFrame,\n    } = this.props;\n\n    const colorRGBA = e.nativeEvent.which === 3 ? secondaryColor : mainColor;\n    const clone = colorSamePixelsFunction(frame, colorRGBA, pixelSize, e.nativeEvent);\n    changeFrame(clone);\n  }\n\n  stroke(event) {\n    const {\n      frame,\n      mainColor,\n      secondaryColor,\n      pixelSize,\n      changeFrame,\n    } = this.props;\n\n    const canvas = this.canvas.current;\n    const color = event.nativeEvent.which === 3 ? secondaryColor : mainColor;\n    const startCoords = getCoordinates(event, pixelSize);\n    let clone = makeFrameCopy(frame);\n\n    lineDraw(clone, color, startCoords.x, startCoords.y, startCoords.x, startCoords.y);\n    renderCanvas(canvas, frame, pixelSize);\n\n    canvas.onmousemove = (e) => {\n      const startFrame = makeFrameCopy(frame);\n      const currCoords = getCoordinates(e, pixelSize);\n\n      clone = lineDraw(startFrame, color, startCoords.x, startCoords.y, currCoords.x, currCoords.y);\n      renderCanvas(canvas, clone, pixelSize);\n    };\n\n    canvas.onmouseup = () => {\n      canvas.onmousemove = null;\n      canvas.onmouseup = null;\n      changeFrame(clone);\n    };\n  }\n\n\n  rectangleAndCircle(activeToolId, event) {\n    const {\n      frame,\n      mainColor,\n      secondaryColor,\n      pixelSize,\n      changeFrame,\n    } = this.props;\n\n    const canvas = this.canvas.current;\n    const color = event.nativeEvent.which === 3 ? secondaryColor : mainColor;\n    const startCoords = getCoordinates(event, pixelSize);\n    const chozenFunction = activeToolId === 'rectangle' ? createRectangle : createCircle;\n    let clone = makeFrameCopy(frame);\n\n    clone = lineDraw(clone, color, startCoords.x, startCoords.y, startCoords.x, startCoords.y);\n    renderCanvas(canvas, clone, pixelSize);\n\n    canvas.onmousemove = (e) => {\n      clone = chozenFunction(frame, e, pixelSize, color, startCoords.x, startCoords.y);\n      renderCanvas(canvas, clone, pixelSize);\n    };\n\n    canvas.onmouseup = () => {\n      canvas.onmousemove = null;\n      canvas.onmouseup = null;\n      changeFrame(clone);\n    };\n  }\n\n  bucket(e) {\n    const {\n      frame,\n      mainColor,\n      secondaryColor,\n      pixelSize,\n      changeFrame,\n    } = this.props;\n\n    const colorRGBA = e.nativeEvent.which === 3 ? secondaryColor : mainColor;\n    const clone = bucketFunction(frame, colorRGBA, pixelSize, e.nativeEvent);\n\n    changeFrame(clone);\n  }\n\n  penOrEraserOrMirror(event) {\n    const canvas = this.canvas.current;\n    const {\n      frame,\n      mainColor,\n      secondaryColor,\n      pixelSize,\n      changeFrame,\n      activeToolId,\n    } = this.props;\n\n    const coords = getCoordinates(event, pixelSize);\n    const isMirror = activeToolId === 'mirror';\n    const coordinates = [coords.x, coords.y];\n    let color = event.nativeEvent.which === 3 ? secondaryColor : mainColor;\n    if (activeToolId === 'eraser') { color = undefined; }\n    let clone = lineDraw(frame, color, coords.x, coords.y, coords.x, coords.y, isMirror);\n\n    renderCanvas(canvas, clone, pixelSize);\n\n    canvas.onmousemove = (e) => {\n      const currentCoords = getCoordinates(e, pixelSize);\n\n      coordinates.push(currentCoords.x, currentCoords.y);\n      if (coordinates.length > 4) coordinates.splice(0, 2);\n\n      clone = lineDraw(clone, color, ...coordinates, isMirror);\n      renderCanvas(canvas, clone, pixelSize);\n    };\n\n    canvas.onmouseup = () => {\n      canvas.onmousemove = null;\n      canvas.onmouseup = null;\n      changeFrame(clone);\n    };\n  }\n\n  lighten(event) {\n    const canvas = this.canvas.current;\n    const { frame, pixelSize, changeFrame } = this.props;\n    const startCoords = getCoordinates(event, pixelSize);\n    let color = lighten(frame[startCoords.x][startCoords.y]);\n\n    let clone = lineDraw(frame, color, startCoords.x, startCoords.y, startCoords.x, startCoords.y);\n    renderCanvas(canvas, clone, pixelSize);\n\n    canvas.onmousemove = (e) => {\n      const currCoords = getCoordinates(e, pixelSize);\n      color = lighten(clone[currCoords.x][currCoords.y]);\n\n      clone = lineDraw(clone, color, currCoords.x, currCoords.y, currCoords.x, currCoords.y);\n      renderCanvas(canvas, clone, pixelSize);\n    };\n\n    canvas.onmouseup = () => {\n      canvas.onmousemove = null;\n      canvas.onmouseup = null;\n      changeFrame(clone);\n    };\n  }\n\n  render() {\n    return (\n      <canvas\n        onMouseDown={this.chooseToolFunction}\n        onContextMenu={e => e.preventDefault()}\n        className=\"main-canvas\"\n        width=\"768\"\n        height=\"768\"\n        ref={this.canvas}\n      />\n    );\n  }\n}\n\nMainCanvas.propTypes = {\n  secondaryColor: PropTypes.arrayOf(PropTypes.number).isRequired,\n  mainColor: PropTypes.arrayOf(PropTypes.number).isRequired,\n  frame: PropTypes.arrayOf(PropTypes.array).isRequired,\n  changeFrame: PropTypes.func.isRequired,\n  pixelSize: PropTypes.number.isRequired,\n  changeColor: PropTypes.func.isRequired,\n  activeToolId: PropTypes.string.isRequired,\n};\n\nexport default MainCanvas;\n","import makeFrameCopy from './makeFrameCopy';\nimport getCoordinates from './getCoordinates';\nimport CreateBaseFrame from './CreateBaseFrame';\n\nexport default function selectShape(frame, pixelSize, e) {\n  const clone = makeFrameCopy(frame);\n  const sCoords = getCoordinates(e, pixelSize);\n  const canvasSize = clone.length;\n  const startColor = clone[sCoords.x][sCoords.y] ? clone[sCoords.x][sCoords.y].join() : undefined;\n  if (startColor) {\n    const shape = CreateBaseFrame(frame.length);\n\n    const stack = [[sCoords.x, sCoords.y]];\n\n    while (stack.length) {\n      const position = stack.pop();\n      const x = position[0];\n      const y = position[1];\n\n      if ((x >= 0 && x < canvasSize) && (y >= 0 && y < canvasSize)) {\n        const correntColor = clone[x][y] ? clone[x][y].join() : undefined;\n\n        if (startColor === correntColor) {\n          shape[x][y] = clone[x][y];\n          clone[x][y] = undefined;\n          stack.push([x - 1, y], [x + 1, y], [x, y - 1], [x, y + 1]);\n        }\n      }\n    }\n\n    return { shape, clone };\n  }\n\n  return false;\n}\n","import makeFrameCopy from './makeFrameCopy';\n\nexport default function joinFrames(firstFrame, secondFrame) {\n  const clone = makeFrameCopy(firstFrame);\n\n  secondFrame.forEach((row, x) => {\n    row.forEach((cell, y) => {\n      if (cell) {\n        clone[x][y] = cell;\n      }\n    });\n  });\n\n  return clone;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport FrameInfo from './FrameInfo';\nimport MainCanvas from './Canvas';\nimport './CanvasContainer.scss';\n\n\nclass CanvasContainer extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      x: 0,\n      y: 0,\n      isNeedCoords: false,\n    };\n\n    this.changeMousePosition = this.changeMousePosition.bind(this);\n    this.deleteCoords = this.deleteCoords.bind(this);\n    this.canvasContainer = React.createRef();\n  }\n\n  deleteCoords() {\n    this.setState({\n      isNeedCoords: false,\n    });\n  }\n\n  changeMousePosition(e) {\n    const { pixelSize } = this.props;\n    const x = Math.floor(e.nativeEvent.offsetX / pixelSize);\n    const y = Math.floor(e.nativeEvent.offsetY / pixelSize);\n\n    this.setState({\n      x,\n      y,\n      isNeedCoords: true,\n    });\n  }\n\n  render() {\n    const {\n      activeToolId,\n      changeFrame,\n      frame,\n      mainColor,\n      secondaryColor,\n      pixelSize,\n      canvasSize,\n      currentFrame,\n      framesLength,\n      changeColor,\n    } = this.props;\n\n    const { x, y, isNeedCoords } = this.state;\n\n    return (\n      <div className=\"main-canvas\">\n        <div\n          className=\"main-canvas-container\"\n          onMouseMove={this.changeMousePosition}\n          onMouseLeave={this.deleteCoords}\n          ref={this.canvasContainer}\n        >\n          <MainCanvas\n            activeToolId={activeToolId}\n            changeFrame={changeFrame}\n            frame={frame}\n            mainColor={mainColor}\n            secondaryColor={secondaryColor}\n            pixelSize={pixelSize}\n            canvasSize={canvasSize}\n            currentFrame={currentFrame}\n            framesLength={framesLength}\n            changeColor={changeColor}\n          />\n        </div>\n\n        <div className=\"main-canvas-info\">\n          <FrameInfo\n            canvasSize={canvasSize}\n            framesLength={framesLength}\n            currentFrame={currentFrame}\n            mousePosX={x}\n            mousePosY={y}\n            isNeedCoords={isNeedCoords}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nCanvasContainer.propTypes = {\n  secondaryColor: PropTypes.arrayOf(PropTypes.number).isRequired,\n  mainColor: PropTypes.arrayOf(PropTypes.number).isRequired,\n  frame: PropTypes.arrayOf(PropTypes.array).isRequired,\n  canvasSize: PropTypes.number.isRequired,\n  changeFrame: PropTypes.func.isRequired,\n  pixelSize: PropTypes.number.isRequired,\n  currentFrame: PropTypes.number.isRequired,\n  framesLength: PropTypes.number.isRequired,\n  changeColor: PropTypes.func.isRequired,\n  activeToolId: PropTypes.string.isRequired,\n};\n\nexport default CanvasContainer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTrash, faAngleUp, faAngleDown } from '@fortawesome/free-solid-svg-icons';\n\nfunction Layer({\n  id,\n  deleteLayer,\n  changeCurrentLayer,\n  currentLayer,\n  layers,\n  upLayer,\n  downLayer,\n}) {\n  return (\n    <div\n      id={id}\n      onClick={e => changeCurrentLayer(id, e)}\n      className={`${currentLayer === id ? 'active ' : ''}layer-view`}\n      role=\"presentation\"\n    >\n      Layer\n      {id + 1}\n\n      <div\n        className=\"layers-button-container\"\n      >\n        {layers.length > 1 && id !== layers.length - 1 && (\n          <button\n            className=\"position layer-button\"\n            onClick={e => downLayer(id, e)}\n            type=\"button\"\n          >\n            <FontAwesomeIcon icon={faAngleDown} />\n          </button>\n        )}\n\n        {layers.length > 1 && (\n          <button\n            className=\"delete layer-button\"\n            onClick={e => deleteLayer(id, e)}\n            type=\"button\"\n          >\n            <FontAwesomeIcon icon={faTrash} />\n          </button>\n        )}\n\n        {layers.length > 1 && id !== 0 && (\n          <button\n            className=\"position layer-button\"\n            onClick={e => upLayer(id, e)}\n            type=\"button\"\n          >\n            <FontAwesomeIcon icon={faAngleUp} />\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n\nLayer.propTypes = {\n  deleteLayer: PropTypes.func.isRequired,\n  changeCurrentLayer: PropTypes.func.isRequired,\n  upLayer: PropTypes.func.isRequired,\n  downLayer: PropTypes.func.isRequired,\n  currentLayer: PropTypes.number.isRequired,\n  layers: PropTypes.arrayOf(PropTypes.array).isRequired,\n  id: PropTypes.number.isRequired,\n};\n\nexport default Layer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\nimport key from 'weak-key';\nimport Layer from './Layer';\nimport './LayersSettings.scss';\n\nfunction LayerSettings({\n  layers,\n  addLayer,\n  deleteLayer,\n  changeCurrentLayer,\n  currentLayer,\n  upLayer,\n  downLayer,\n}) {\n  return (\n    <div className=\"layer-settings\">\n      <div className=\"layer-settings-header\">\n        <button\n          className=\"add-layer-button\"\n          onClick={addLayer}\n          type=\"button\"\n        >\n          <FontAwesomeIcon icon={faPlus} />\n          Add layer\n        </button>\n      </div>\n\n      <div className=\"layer-settings-container\">\n        {layers.map((layer, i) => (\n          <Layer\n            id={i}\n            key={key(layer)}\n            deleteLayer={deleteLayer}\n            changeCurrentLayer={changeCurrentLayer}\n            currentLayer={currentLayer}\n            layers={layers}\n            upLayer={upLayer}\n            downLayer={downLayer}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nLayerSettings.propTypes = {\n  deleteLayer: PropTypes.func.isRequired,\n  changeCurrentLayer: PropTypes.func.isRequired,\n  upLayer: PropTypes.func.isRequired,\n  downLayer: PropTypes.func.isRequired,\n  currentLayer: PropTypes.number.isRequired,\n  layers: PropTypes.arrayOf(PropTypes.array).isRequired,\n  addLayer: PropTypes.func.isRequired,\n};\n\nexport default LayerSettings;\n","function hexToRgb(hex) {\n  return hex\n    .replace(/^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i, (m, r, g, b) => `#${r}${r}${g}${g}${b}${b}`)\n    .substring(1)\n    .match(/.{2}/g)\n    .map(x => parseInt(x, 16));\n}\n\nexport default hexToRgb;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nfunction ToolButton({\n  id,\n  activeToolId,\n  icon,\n  onClick,\n}) {\n  return (\n    <button\n      className={`${id === activeToolId ? 'active' : null} tool-button`}\n      onClick={() => onClick(id)}\n      type=\"button\"\n    >\n      <FontAwesomeIcon icon={icon} />\n    </button>\n  );\n}\n\nToolButton.propTypes = {\n  id: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n\n  icon: PropTypes.shape({\n    iconName: PropTypes.string.isRequired,\n    prefix: PropTypes.string.isRequired,\n    icon: PropTypes.array.isRequired,\n  }).isRequired,\n\n  activeToolId: PropTypes.string.isRequired,\n};\n\nexport default ToolButton;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  faPen,\n  faFillDrip,\n  faEraser,\n  faThumbtack,\n  faRadiation,\n  faSun,\n  faGripLinesVertical,\n  faUndoAlt,\n  faChessBoard,\n  faEyeDropper,\n  faMagic,\n  faCameraRetro,\n  faBroom,\n} from '@fortawesome/free-solid-svg-icons';\nimport { faCircle, faSquare, faHandPaper } from '@fortawesome/free-regular-svg-icons';\nimport key from 'weak-key';\nimport constants from '../constants';\nimport ToolButton from './ToolButton';\n\nfunction ToolsControl({ onClick, activeToolId }) {\n  const Icons = [\n    faPen,\n    faEraser,\n    faFillDrip,\n    faCircle,\n    faSquare,\n    faThumbtack,\n    faRadiation,\n    faSun,\n    faGripLinesVertical,\n    faUndoAlt,\n    faHandPaper,\n    faChessBoard,\n    faEyeDropper,\n    faMagic,\n    faCameraRetro,\n    faBroom,\n  ];\n\n  return (\n    <div className=\"tools-controle\">\n      {\n        Icons.map((item, i) => (\n          <ToolButton\n            key={key(item)}\n            icon={item}\n            onClick={onClick}\n            id={constants.toolButtonsNames[i]}\n            activeToolId={activeToolId}\n          />\n        ))\n      }\n    </div>\n  );\n}\n\nToolsControl.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  activeToolId: PropTypes.string.isRequired,\n};\n\nexport default ToolsControl;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass ColorButton extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.input = React.createRef();\n  }\n\n  render() {\n    const {\n      buttonClass,\n      onClick,\n      id,\n      color,\n      value,\n    } = this.props;\n\n    return (\n      <button\n        className={buttonClass}\n        style={{ backgroundColor: `rgba(${color.join()})` }}\n        onClick={() => this.input.current.click()}\n        type=\"button\"\n      >\n        <input\n          type=\"color\"\n          onChange={() => onClick(id, this.input.current.value)}\n          ref={this.input}\n          value={value}\n        />\n      </button>\n    );\n  }\n}\n\nColorButton.propTypes = {\n  buttonClass: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n  id: PropTypes.number.isRequired,\n  color: PropTypes.arrayOf(PropTypes.number).isRequired,\n  value: PropTypes.string.isRequired,\n};\n\nexport default ColorButton;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSyncAlt } from '@fortawesome/free-solid-svg-icons';\nimport ColorButton from './ColorButton';\n\n\nfunction ColorPicker({\n  onClick,\n  mainColor,\n  secondaryColor,\n  swapColor,\n}) {\n  return (\n    <div className=\"color-picker\">\n      <ColorButton\n        buttonClass=\"main color-button\"\n        color={mainColor}\n        id={0}\n        value=\"#5e5e5e\"\n        onClick={onClick}\n      />\n\n      <ColorButton\n        buttonClass=\"secondary color-button\"\n        color={secondaryColor}\n        id={1}\n        value=\"#7423a0\"\n        onClick={onClick}\n      />\n\n      <button\n        onClick={swapColor}\n        className=\"swap-color-button\"\n        type=\"button\"\n      >\n        <FontAwesomeIcon icon={faSyncAlt} />\n      </button>\n    </div>\n  );\n}\n\nColorPicker.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  mainColor: PropTypes.arrayOf(PropTypes.number).isRequired,\n  secondaryColor: PropTypes.arrayOf(PropTypes.number).isRequired,\n  swapColor: PropTypes.func.isRequired,\n};\n\nexport default ColorPicker;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faKeyboard } from '@fortawesome/free-regular-svg-icons';\n\n\nexport default function OpenKeyboardMenuButton({ toggleMenuStatus }) {\n  return (\n    <button\n      className=\"open-keyboard-menu-button\"\n      onClick={toggleMenuStatus}\n      type=\"button\"\n    >\n      <FontAwesomeIcon icon={faKeyboard} />\n    </button>\n  );\n}\n\nOpenKeyboardMenuButton.propTypes = {\n  toggleMenuStatus: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nfunction KeyboardSettingsButton({\n  id,\n  code,\n  handleClick,\n  icon,\n  activeKeyButton,\n}) {\n  return (\n    <div\n      className=\"keyboard-settings-button\"\n    >\n      <FontAwesomeIcon icon={icon} />\n\n      <button\n        className={`${activeKeyButton === id ? 'active ' : ''}key-button`}\n        onClick={e => handleClick(id, e)}\n        type=\"button\"\n      >\n        {code}\n      </button>\n\n    </div>\n  );\n}\n\nKeyboardSettingsButton.propTypes = {\n  id: PropTypes.string.isRequired,\n  code: PropTypes.string,\n  handleClick: PropTypes.func.isRequired,\n\n  icon: PropTypes.shape({\n    iconName: PropTypes.string.isRequired,\n    prefix: PropTypes.string.isRequired,\n    icon: PropTypes.array.isRequired,\n  }).isRequired,\n\n  activeKeyButton: PropTypes.string.isRequired,\n};\n\nKeyboardSettingsButton.defaultProps = {\n  code: '',\n};\n\n\nexport default KeyboardSettingsButton;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCircle, faSquare, faHandPaper } from '@fortawesome/free-regular-svg-icons';\nimport {\n  faTimes,\n  faPen,\n  faFillDrip,\n  faEraser,\n  faThumbtack,\n  faRadiation,\n  faSun,\n  faGripLinesVertical,\n  faUndoAlt,\n  faChessBoard,\n  faEyeDropper,\n  faMagic,\n  faCameraRetro,\n  faBroom,\n} from '@fortawesome/free-solid-svg-icons';\nimport key from 'weak-key';\nimport KeyboardSettingsButton from './KeyboardSettingsButton';\nimport constants from '../constants';\n\n\nexport default class KeyboardModalMenu extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      activeKeyButton: '',\n    };\n\n    this.toggleMenuStatus = this.toggleMenuStatus.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.keyboardSettingsWindow = React.createRef();\n  }\n\n  componentWillMount() {\n    this.root = document.createElement('div');\n    this.root.className = 'modal-keyboard-menu';\n    document.body.appendChild(this.root);\n  }\n\n  componentWillUnmount() {\n    document.body.removeChild(this.root);\n  }\n\n\n  handleClick(id, event) {\n    event.stopPropagation();\n    const { buttonsConfiguration, changeButtonConfig } = this.props;\n    const keyboardSettingsWindow = this.keyboardSettingsWindow.current;\n\n    keyboardSettingsWindow.onkeydown = (e) => {\n      e.stopPropagation();\n      const letter = e.code.slice(3, 5).toUpperCase();\n      const index = constants.toolButtonsNames.indexOf(id);\n      const index2 = buttonsConfiguration.indexOf(letter);\n      if (index2 + 1) buttonsConfiguration[index2] = null;\n\n      changeButtonConfig(buttonsConfiguration);\n\n      buttonsConfiguration[index] = letter;\n      this.setState({\n        activeKeyButton: '',\n      });\n\n      keyboardSettingsWindow.onkeydown = null;\n    };\n\n    this.setState({\n      activeKeyButton: id,\n    });\n  }\n\n  toggleMenuStatus(e) {\n    e.stopPropagation();\n\n    this.setState({\n      activeKeyButton: '',\n    });\n\n    this.keyboardSettingsWindow.current.classList.toggle('active');\n  }\n\n  render() {\n    const { activeKeyButton } = this.state;\n    const { buttonsConfiguration, toggleMenuStatus } = this.props;\n    const icons = [\n      faPen,\n      faEraser,\n      faFillDrip,\n      faCircle,\n      faSquare,\n      faThumbtack,\n      faRadiation,\n      faSun,\n      faGripLinesVertical,\n      faUndoAlt,\n      faHandPaper,\n      faChessBoard,\n      faEyeDropper,\n      faMagic,\n      faCameraRetro,\n      faBroom,\n    ];\n\n    return ReactDOM.createPortal(\n      <div className=\"keyboard-settings-window\" ref={this.keyboardSettingsWindow}>\n        {icons.map((icon, i) => (\n          <KeyboardSettingsButton\n            code={buttonsConfiguration[i]}\n            handleClick={this.handleClick}\n            icon={icon}\n            key={key(icon)}\n            id={constants.toolButtonsNames[i]}\n            activeKeyButton={activeKeyButton}\n          />\n        ))}\n\n        <button\n          className=\"exit-button\"\n          onClick={toggleMenuStatus}\n          type=\"button\"\n        >\n          <FontAwesomeIcon icon={faTimes} />\n        </button>\n      </div>,\n      this.root,\n    );\n  }\n}\n\nKeyboardModalMenu.propTypes = {\n  changeButtonConfig: PropTypes.func.isRequired,\n  buttonsConfiguration: PropTypes.arrayOf(PropTypes.string).isRequired,\n  toggleMenuStatus: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport OpenKebouardMenuButton from './OpenKeyboardMenuButton';\nimport KeyboardModalMenu from './KeyboardModalMenu';\n\n\nexport default class KeyboardSettings extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isModalactive: false,\n    };\n\n    this.toggleMenuStatus = this.toggleMenuStatus.bind(this);\n  }\n\n  toggleMenuStatus() {\n    const { isModalactive } = this.state;\n\n    this.setState({\n      isModalactive: !isModalactive,\n    });\n  }\n\n  render() {\n    const { isModalactive } = this.state;\n    const { buttonsConfiguration, changeButtonConfig, changeToolId } = this.props;\n\n    return (\n      <div className=\"keyboard-settings\">\n        <OpenKebouardMenuButton toggleMenuStatus={this.toggleMenuStatus} />\n        {isModalactive && (\n          <KeyboardModalMenu\n            buttonsConfiguration={buttonsConfiguration}\n            changeButtonConfig={changeButtonConfig}\n            changeToolId={changeToolId}\n            toggleMenuStatus={this.toggleMenuStatus}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nKeyboardSettings.propTypes = {\n  buttonsConfiguration: PropTypes.arrayOf(PropTypes.string).isRequired,\n  changeButtonConfig: PropTypes.func.isRequired,\n  changeToolId: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ToolsControl from './ToolsControl';\nimport ColorPicker from './ColorPicker';\nimport KeyboardSettings from './KeyboardSettings';\nimport './Tools.scss';\n\nfunction Tools({\n  handleColorPickerClick,\n  mainColor,\n  secondaryColor,\n  swapColor,\n  changeToolId,\n  activeToolId,\n  buttonsConfiguration,\n  changeButtonConfig,\n}) {\n  return (\n    <div className=\"tools\">\n      <ToolsControl\n        onClick={changeToolId}\n        activeToolId={activeToolId}\n      />\n\n      <ColorPicker\n        onClick={handleColorPickerClick}\n        mainColor={mainColor}\n        secondaryColor={secondaryColor}\n        swapColor={swapColor}\n      />\n\n      <KeyboardSettings\n        buttonsConfiguration={buttonsConfiguration}\n        changeButtonConfig={changeButtonConfig}\n        changeToolId={changeToolId}\n      />\n    </div>\n  );\n}\n\nTools.propTypes = {\n  handleColorPickerClick: PropTypes.func.isRequired,\n  swapColor: PropTypes.func.isRequired,\n  changeToolId: PropTypes.func.isRequired,\n  changeButtonConfig: PropTypes.func.isRequired,\n  mainColor: PropTypes.arrayOf(PropTypes.number).isRequired,\n  secondaryColor: PropTypes.arrayOf(PropTypes.number).isRequired,\n  activeToolId: PropTypes.string.isRequired,\n  buttonsConfiguration: PropTypes.arrayOf(PropTypes.string).isRequired,\n};\n\nexport default Tools;\n","import React from 'react';\nimport Settings from '../Settings/Settings';\nimport './main.scss';\nimport FramesPreview from '../FramesPreview/FramesPreview';\nimport FramesControl from '../FramesControl/FramesControl';\nimport CanvasContainer from '../Canvas/CanvasContainer';\nimport LayerSettings from '../LayerSettings/LayerSettings';\nimport CreateBaseFrame from '../utils/CreateBaseFrame';\nimport hexToRgb from '../utils/hexToRGB';\nimport makeFrameCopy from '../utils/makeFrameCopy';\nimport Tools from '../Tools/Tools';\nimport constants from '../constants';\n\nclass Main extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeToolId: 'pen',\n      pixelSize: 24,\n      canvasSize: 32,\n      layers: [[CreateBaseFrame(32)]],\n      currentFrame: 0,\n      currentLayer: 0,\n      mainColor: [0, 0, 0],\n      secondaryColor: [116, 35, 160],\n      buttonsConfiguration: ['P', 'E', 'B', 'C', 'R', 'L', 'A', 'I', 'M', 'T', 'M', 'D', 'O', 'X', 'N', 'W'],\n    };\n\n    this.changeToolId = this.changeToolId.bind(this);\n    this.handleFrameClick = this.handleFrameClick.bind(this);\n    this.changeFrame = this.changeFrame.bind(this);\n    this.addFrame = this.addFrame.bind(this);\n    this.deleteFrame = this.deleteFrame.bind(this);\n    this.copyFrame = this.copyFrame.bind(this);\n    this.handleColorPickerClick = this.handleColorPickerClick.bind(this);\n    this.swapColor = this.swapColor.bind(this);\n    this.changeCanvasSize = this.changeCanvasSize.bind(this);\n    this.addLayer = this.addLayer.bind(this);\n    this.deleteLayer = this.deleteLayer.bind(this);\n    this.changeCurrentLayer = this.changeCurrentLayer.bind(this);\n    this.upLayer = this.upLayer.bind(this);\n    this.downLayer = this.downLayer.bind(this);\n    this.replaceLayer = this.replaceLayer.bind(this);\n    this.changeColor = this.changeColor.bind(this);\n    this.changeButtonConfig = this.changeButtonConfig.bind(this);\n    this.importLayers = this.importLayers.bind(this);\n  }\n\n  componentDidMount() {\n    const newState = JSON.parse(localStorage.getItem('state'));\n\n    if (newState) {\n      this.setState({\n        activeToolId: newState.activeToolId,\n        pixelSize: newState.pixelSize,\n        canvasSize: newState.canvasSize,\n        layers: newState.layers,\n        currentFrame: newState.currentFrame,\n        currentLayer: newState.currentLayer,\n        mainColor: newState.mainColor,\n        secondaryColor: newState.secondaryColor,\n        buttonsConfiguration: newState.buttonsConfiguration,\n      });\n    }\n\n    window.onunload = () => {\n      const jsonState = JSON.stringify(this.state);\n      localStorage.setItem('state', jsonState);\n    };\n\n    document.body.onkeydown = (e) => {\n      const letter = e.code.slice(3, 5).toUpperCase();\n      const { buttonsConfiguration } = this.state;\n      const index = buttonsConfiguration.indexOf(letter);\n      if (!(index + 1)) return;\n      const id = constants.toolButtonsNames[index];\n      this.changeToolId(id);\n    };\n  }\n\n  componentWillUnmount() {\n    const jsonState = JSON.stringify(this.state);\n    localStorage.setItem('state', jsonState);\n  }\n\n  changeFrame(frame) {\n    const { layers, currentFrame, currentLayer } = this.state;\n    layers[currentLayer][currentFrame] = frame;\n    this.setState({ layers });\n  }\n\n  changeToolId(id) {\n    this.setState({ activeToolId: id });\n  }\n\n  handleColorPickerClick(id, color) {\n    if (id === 0) this.setState({ mainColor: hexToRgb(color) });\n    if (id === 1) this.setState({ secondaryColor: hexToRgb(color) });\n  }\n\n  swapColor() {\n    const { secondaryColor, mainColor } = this.state;\n\n    this.setState({\n      mainColor: secondaryColor,\n      secondaryColor: mainColor,\n    });\n  }\n\n  changeColor(color, targetButton) {\n    if (targetButton === 1) {\n      this.setState({\n        mainColor: color,\n      });\n    }\n\n    if (targetButton === 3) {\n      this.setState({\n        secondaryColor: color,\n      });\n    }\n  }\n\n  handleFrameClick(id) {\n    this.setState({ currentFrame: id });\n  }\n\n  addFrame() {\n    const { layers, canvasSize } = this.state;\n\n    layers.forEach(frames => frames.push(CreateBaseFrame(canvasSize)));\n    this.setState({ layers });\n  }\n\n  copyFrame(id, e) {\n    e.stopPropagation();\n\n    const { layers } = this.state;\n\n    layers.forEach((frames) => {\n      const clone = makeFrameCopy(frames[id]);\n      frames.splice(id, 0, clone);\n    });\n    this.setState({ layers });\n  }\n\n  deleteFrame(id, e) {\n    e.stopPropagation();\n    const { layers, currentLayer } = this.state;\n\n    layers.forEach((frames) => {\n      frames.splice(id, 1);\n    });\n\n    this.setState({\n      currentFrame: layers[currentLayer].length === id ? id - 1 : id,\n      layers,\n    });\n  }\n\n  changeCanvasSize(newCanvasSize) {\n    const {\n      canvasSize, layers, currentLayer, pixelSize,\n    } = this.state;\n    if (newCanvasSize === canvasSize) return;\n    const delta = Math.abs(newCanvasSize - canvasSize) / 2;\n    const pixelDelta = canvasSize / newCanvasSize;\n    const framesLength = layers[currentLayer].length;\n    const mainCanvasContainer = document.querySelector('.main-canvas-container');\n\n    mainCanvasContainer.style.backgroundSize = `${pixelSize * pixelDelta}px ${pixelSize * pixelDelta}px`;\n\n    for (let j = 0; j < layers.length; j += 1) {\n      if (newCanvasSize > canvasSize) {\n        for (let i = 0; i < framesLength; i += 1) {\n          const frame = layers[j][i];\n\n          for (let x = 0; x < canvasSize; x += 1) {\n            frame[x] = Array(delta).concat(frame[x]);\n            frame[x] = frame[x].concat(Array(delta));\n          }\n\n          for (let x = 0; x < delta; x += 1) {\n            frame.unshift(Array(delta * 2));\n            frame.push(Array(delta * 2));\n          }\n        }\n      }\n\n      if (newCanvasSize < canvasSize) {\n        for (let i = 0; i < framesLength; i += 1) {\n          const frame = layers[j][i];\n          frame.splice(0, delta);\n          frame.splice(newCanvasSize, delta);\n\n          for (let x = 0; x < newCanvasSize; x += 1) {\n            frame[x].splice(0, delta);\n            frame[x].splice(newCanvasSize, delta);\n          }\n        }\n      }\n    }\n\n    this.setState({\n      pixelSize: pixelSize * pixelDelta,\n      canvasSize: newCanvasSize,\n      layers,\n    });\n  }\n\n  addLayer() {\n    const { layers, canvasSize } = this.state;\n    const framesCount = layers[0].length;\n    const newLayer = [];\n\n    for (let i = 0; i < framesCount; i += 1) {\n      newLayer.push(CreateBaseFrame(canvasSize));\n    }\n\n    layers.push(newLayer);\n    this.setState({ layers });\n  }\n\n  deleteLayer(id, e) {\n    e.stopPropagation();\n    const { layers } = this.state;\n    layers.splice(id, 1);\n    this.setState({\n      currentLayer: layers.length === id ? id - 1 : id,\n      layers,\n\n    });\n  }\n\n  changeCurrentLayer(id, e) {\n    e.stopPropagation();\n\n    this.setState({\n      currentLayer: id,\n      currentFrame: 0,\n    });\n  }\n\n  upLayer(layerId, e) {\n    const { layers } = this.state;\n    const upedLayer = layers.splice(layerId, 1);\n    layers.splice(layerId - 1, 0, ...upedLayer);\n\n    this.setState({\n      layers,\n      currentLayer: layerId - 1,\n    });\n\n    e.stopPropagation();\n  }\n\n  downLayer(layerId, e) {\n    const { layers } = this.state;\n    const downedLayer = layers.splice(layerId + 1, 1);\n\n    layers.splice(layerId, 0, ...downedLayer);\n\n    this.setState({\n      layers,\n      currentLayer: layerId + 1,\n    });\n\n    e.stopPropagation();\n  }\n\n  replaceLayer(startId, targetId) {\n    const { layers } = this.state;\n\n    const newlayers = layers.map((frames) => {\n      const framesCopy = makeFrameCopy(frames);\n      [framesCopy[startId], framesCopy[targetId]] = [framesCopy[targetId], framesCopy[startId]];\n      return framesCopy;\n    });\n\n    this.setState({\n      layers: newlayers,\n    });\n  }\n\n  async importLayers(event) {\n    event.preventDefault();\n    const file = [...event.target.files].shift();\n    if (!file) return;\n\n    const reader = new FileReader();\n\n    reader.onload = (e) => {\n      const contents = e.target.result;\n\n      this.setState({\n        layers: JSON.parse(contents),\n        currentFrame: 0,\n        currentLayer: 0,\n      });\n    };\n\n    reader.readAsText(file);\n  }\n\n  changeButtonConfig(newButtonConfig) {\n    this.setState({\n      buttonsConfiguration: newButtonConfig,\n    });\n  }\n\n  render() {\n    const {\n      activeToolId,\n      pixelSize,\n      layers,\n      currentFrame,\n      mainColor,\n      secondaryColor,\n      canvasSize,\n      currentLayer,\n      buttonsConfiguration,\n    } = this.state;\n\n    return (\n      <div className=\"app-main\">\n        <Tools\n          handleColorPickerClick={this.handleColorPickerClick}\n          changeButtonConfig={this.changeButtonConfig}\n          swapColor={this.swapColor}\n          changeToolId={this.changeToolId}\n          mainColor={mainColor}\n          secondaryColor={secondaryColor}\n          activeToolId={activeToolId}\n          buttonsConfiguration={buttonsConfiguration}\n        />\n\n        <FramesControl\n          frames={layers[currentLayer]}\n          pixelSize={pixelSize}\n          onClick={this.handleFrameClick}\n          addFrame={this.addFrame}\n          currentFrame={currentFrame}\n          copyFrame={this.copyFrame}\n          deleteFrame={this.deleteFrame}\n          replaceLayer={this.replaceLayer}\n        />\n\n        <CanvasContainer\n          activeToolId={activeToolId}\n          changeFrame={this.changeFrame}\n          frame={makeFrameCopy(layers[currentLayer][currentFrame])}\n          mainColor={mainColor}\n          secondaryColor={secondaryColor}\n          pixelSize={pixelSize}\n          changeMousePosition={this.changeMousePosition}\n          canvasSize={canvasSize}\n          currentFrame={currentFrame}\n          framesLength={layers[currentLayer].length}\n          changeColor={this.changeColor}\n        />\n\n        <div className=\"preview-tools\">\n          <FramesPreview\n            layers={layers}\n            pixelSize={pixelSize}\n          />\n\n          <LayerSettings\n            currentLayer={currentLayer}\n            layers={layers}\n            addLayer={this.addLayer}\n            deleteLayer={this.deleteLayer}\n            changeCurrentLayer={this.changeCurrentLayer}\n            downLayer={this.downLayer}\n            upLayer={this.upLayer}\n          />\n        </div>\n\n        <Settings\n          changeCanvasSize={this.changeCanvasSize}\n          importLayers={this.importLayers}\n          layers={layers}\n          pixelSize={pixelSize}\n        />\n      </div>\n    );\n  }\n}\n\nexport default Main;\n","import React from 'react';\nimport './landingPage.scss';\nimport {\n  faPen,\n  faFillDrip,\n  faEraser,\n  faThumbtack,\n  faRadiation,\n  faSun,\n  faGripLinesVertical,\n  faUndoAlt,\n  faChessBoard,\n  faEyeDropper,\n  faMagic,\n  faCameraRetro,\n  faBroom,\n} from '@fortawesome/free-solid-svg-icons';\nimport { faGithubSquare } from '@fortawesome/free-brands-svg-icons';\nimport { faCircle, faSquare, faHandPaper } from '@fortawesome/free-regular-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport PropTypes from 'prop-types';\n\n\nfunction LandingPage(props) {\n  const { toggleLandingPage } = props;\n  return (\n    <div className=\"landing-page\">\n      <div className=\"screenshot-container\">\n        <div className=\"information-container\">\n          <h2>Piskel is a free online editor for animated sprites & pixel art</h2>\n          <p>\n            Create animations in your browser.\n            Try an example, use Google sign in to access your gallery or simply create a new sprite.\n          </p>\n          <div className=\"information-button-container\">\n            <button\n              className=\"information-container-button\"\n              onClick={toggleLandingPage}\n              type=\"button\"\n            >\n              Create sprite\n            </button>\n          </div>\n        </div>\n        <div className=\"main-screen-shoot\">\n          <div className=\"main-gif\" />\n        </div>\n      </div>\n\n      <div className=\"tools-explanation-container\">\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faPen} />\n          <span>Regular pen</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faEraser} />\n          <span>Eraser</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faFillDrip} />\n          <span>Paint bucket</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faCircle} />\n          <span>Circle</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faSquare} />\n          <span>Rectangle</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faThumbtack} />\n          <span>Stroke line</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faRadiation} />\n          <span>Paint all same pixels in color</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faGripLinesVertical} />\n          <span>Mirror line</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faUndoAlt} />\n          <span>Rotate 90 deg</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faHandPaper} />\n          <span>Move image</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faChessBoard} />\n          <span>Dithering</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faSun} />\n          <span>Lighten color</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faEyeDropper} />\n          <span>Color picker</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faMagic} />\n          <span>Drag and Drop shapes</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faCameraRetro} />\n          <span>Change colors to opposite</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faBroom} />\n          <span>Clear current frame</span>\n        </div>\n      </div>\n\n      <div className=\"author-information\">\n        <span>Created by </span>\n        <a href=\"https://github.com/AndreySomov\" className=\"author-link\">\n          Andrey Somov\n          {' '}\n          <FontAwesomeIcon icon={faGithubSquare} />\n        </a>\n      </div>\n\n    </div>\n  );\n}\n\nLandingPage.propTypes = { toggleLandingPage: PropTypes.func.isRequired };\n\nexport default LandingPage;\n","import React from 'react';\nimport Header from './header/Header';\nimport Main from './main/Main';\nimport LandingPage from './landingPage/LandingPage';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLandingPage: true,\n    };\n\n    this.toggleLandingPage = this.toggleLandingPage.bind(this);\n  }\n\n  toggleLandingPage() {\n    const { isLandingPage } = this.state;\n\n    this.setState({\n      isLandingPage: !isLandingPage,\n    });\n  }\n\n  render() {\n    const { isLandingPage } = this.state;\n\n    return (\n      <div className=\"App\">\n        <Header\n          toggleLandingPage={this.toggleLandingPage}\n          isLandingPage={isLandingPage}\n        />\n\n        {isLandingPage && <LandingPage toggleLandingPage={this.toggleLandingPage} />}\n        {!isLandingPage && <Main />}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}