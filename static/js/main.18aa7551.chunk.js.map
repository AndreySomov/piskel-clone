{"version":3,"sources":["components/constants.jsx","components/header/Login.jsx","components/header/Logout.jsx","components/header/Header.jsx","components/Settings/CanvasSizeSettings.jsx","components/utils/renderCanvas.js","components/utils/createLink.js","components/Settings/ModalExportMenu.jsx","components/Settings/ExportResultSetting.jsx","components/Settings/ImportMenu.jsx","components/Settings/SettingsButton.jsx","components/Settings/Settings.jsx","components/FramesPreview/PreviewArea.jsx","components/FramesPreview/PreviewSettings.jsx","components/FramesPreview/FramesPreview.jsx","components/FramesControl/CopyButton.jsx","components/FramesControl/DeleteButton.jsx","components/FramesControl/Frame.jsx","components/FramesControl/AddFrameButton.jsx","components/FramesControl/FramesControl.jsx","components/Canvas/FrameInfo.jsx","components/utils/makeCopy.js","components/utils/getCoordinates.js","components/utils/createRectangle.js","components/utils/createCircle.js","components/utils/CreateBaseFrame.js","components/utils/lineDraw.js","components/utils/lighten.js","components/utils/moveFunction.js","components/utils/dithering.js","components/Canvas/Canvas.jsx","components/utils/selectShape.js","components/utils/joinFrames.js","components/utils/negativeImage.js","components/utils/erotateClockwis.js","components/utils/colorSamePixelsFunction.js","components/utils/bucketFunction.js","components/Canvas/CanvasContainer.jsx","components/LayerSettings/Layer.jsx","components/LayerSettings/LayerSettings.jsx","components/utils/hexToRGB.js","components/Tools/ToolButton.jsx","components/Tools/ToolsControl.jsx","components/Tools/ColorButton.jsx","components/Tools/ColorPicker.jsx","components/Tools/OpenKeyboardMenuButton.jsx","components/Tools/KeyboardSettingsButton.jsx","components/Tools/KeyboardModalMenu.jsx","components/Tools/KeyboardSettings.jsx","components/Tools/Tools.jsx","components/main/Main.jsx","components/landingPage/LandingPage.jsx","components/App.jsx","index.jsx"],"names":["constants","toolButtonsNames","googleKey","mainCanvasSize","Login","_ref","login","react_default","a","createElement","google_login","clientId","buttonText","onSuccess","cookiePolicy","render","renderProps","className","onClick","disabled","type","index_es","icon","faGoogle","Logout","logout","userName","userImg","onLogoutSuccess","src","alt","width","height","Header","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","isLogin","bind","assertThisInitialized","response","_response$profileObj","profileObj","givenName","imageUrl","setState","_this$state","toggleLandingPage","React","Component","CanvasSizeSettings","changeCanvasSize","renderCanvas","canvas","frame","pixelSize","clearCanvas","arguments","length","undefined","context","getContext","clearRect","forEach","row","i","cell","j","fillStyle","concat","join","fillRect","createLink","data","name","format","link","document","setAttribute","ModalExportMenu","fps","gifBackgroundColor","fileSize","fileName","fpsInput","createRef","sizeInput","colorInput","nameInput","changeFps","changeGifSize","changeGifBackgroundColor","changeGifName","exportGif","exportRSSFormat","root","body","appendChild","removeChild","exportApng","exportSize","layers","encoder","GIFEncoder","standartCanvasSize","currPixelSize","setDelay","start","addFrame","finish","buffer","out","getData","b64encoded","btoa","String","fromCharCode","apply","datajpg","click","framesArr","uintarr","getImageData","push","delay","delayMap","Array","fill","apng","UPNG","encode","Uint8Array","result","JSON","stringify","Blob","textFile","window","URL","createObjectURL","newFPS","newBackgroundColor","newFileSize","newFileName","_this2","_this$props3","changeExportMenuStatus","modalMenuFormat","_this$state3","ReactDOM","createPortal","value","onChange","current","ref","style","backgroundColor","min","max","step","choseExportFunction","faTimes","ExportResultSetting","toggleModalMenuFormat","newFormat","_this$props","ModalExportMenu_ModalExportMenu","ImportMenu","input","importLayers","onInput","e","SettingsButton","id","atciveSettingButton","Settings","settings","openMenu","closeMenu","stopPropagation","classList","add","remove","icons","faCog","faSave","faFolderOpen","map","item","key","ExportResultSetting_ExportResultSetting","ImportMenu_ImportMenu","PreviewArea","animateFramesPreview","clearTimeout","timer","fpsInputValue","x","setInterval","Frame","PreviewSettings","getInpuValue","faCompress","FramesPreview","previewArea","toggleFullScreen","fullscreenElement","exitFullscreen","requestFullscreen","PreviewArea_PreviewArea","PreviewSettings_PreviewSettings","handleInput","CopyButton","faCopy","DeleteButton","faTrash","animateFrames","frames","_this$props2","active","deleteFrame","copyFrame","role","draggable","AddFrameButton","faPlus","FramesControl","dropZone","ondragstart","event","startId","target","getAttribute","ondragenter","parentElement","contains","ondragleave","ondragover","preventDefault","ondrop","replaceLayer","targetId","_this3","currentFrame","Frame_Frame","dragenter","dragEnter","FrameInfo","mousePosX","mousePosY","canvasSize","framesLength","isNeedCoords","makeCopy","parse","getCoordinates","nativeEvent","Math","floor","offsetX","y","offsetY","createRectangle","color","startX","startY","clone","coordinates","deltaX","deltaY","minY","minX","abs","createCircle","R","delta","leftIndex","rightIndex","upIndex","downIndex","leftBorderCrossed","rightBorderCrossed","upBorderCrossed","downBorderCrossed","errorY","errorX","CreateBaseFrame","from","lineDraw","isMirror","signX","signY","currX","currY","error","center","error2","lighten","shade","moveFunction","slice","dithering","mainColor","secondaryColor","MainCanvas","penOrEraserOrMirror","chooseToolFunction","rectangleAndCircle","stroke","rotateFrame","moveFrame","ditheringFrame","bucket","shapeSelection","activeToolId","colorSamePixels","colorPicker","negativeOrBroom","changeFrame","shapeInfo","sCoords","startColor","shape","stack","position","pop","selectShape","startCoords","startShape","onmousemove","currCoords","onmouseup","reuslt","firstFrame","secondFrame","joinFrames","r","g","b","negativeImage","_this$props4","changeColor","which","_this$props5","currentCoords","_this$props6","startFrame","_this$props7","n","tmp","erotateClockwis","_this$props8","colorSamePixelsFunction","_this$props9","_this$props10","chozenFunction","_this$props11","bucketFunction","_this$props12","coords","splice","_this$props13","onMouseDown","onContextMenu","PureComponent","CanvasContainer","changeMousePosition","deleteCoords","canvasContainer","onMouseMove","onMouseLeave","Canvas_MainCanvas","Layer","deleteLayer","changeCurrentLayer","currentLayer","upLayer","downLayer","faAngleDown","faAngleUp","LayerSettings","addLayer","layer","hexToRgb","hex","replace","m","substring","match","parseInt","ToolButton","ToolsControl","Icons","faPen","faEraser","faFillDrip","faCircle","faSquare","faThumbtack","faRadiation","faSun","faGripLinesVertical","faUndoAlt","faHandPaper","faChessBoard","faEyeDropper","faMagic","faCameraRetro","faBroom","ColorButton","buttonClass","ColorPicker","swapColor","ColorButton_ColorButton","faSyncAlt","OpenKeyboardMenuButton","toggleMenuStatus","faKeyboard","KeyboardSettingsButton","code","handleClick","activeKeyButton","defaultProps","KeyboardModalMenu","keyboardSettingsWindow","buttonsConfiguration","changeButtonConfig","onkeydown","letter","toUpperCase","index","indexOf","index2","toggle","KeyboardSettings","isModalactive","changeToolId","KeyboardModalMenu_KeyboardModalMenu","Tools","handleColorPickerClick","KeyboardSettings_KeyboardSettings","Main","handleFrameClick","newState","localStorage","getItem","onunload","jsonState","setItem","_this$state2","targetButton","_this$state4","newCanvasSize","_this$state5","pixelDelta","querySelector","backgroundSize","unshift","_this$state6","framesCount","newLayer","layerId","upedLayer","toConsumableArray","downedLayer","newlayers","framesCopy","file","files","shift","reader","FileReader","onload","contents","readAsText","newButtonConfig","_this$state7","Tools_Tools","FramesControl_FramesControl","CanvasContainer_CanvasContainer","FramesPreview_FramesPreview_FramesPreview","Settings_Settings","LandingPage","href","faGithubSquare","App","isLandingPage","Header_Header","Main_Main","components_App","getElementById"],"mappings":"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","file":"static/js/main.18aa7551.chunk.js","sourcesContent":["export default {\n  toolButtonsNames: [\n    'pen',\n    'eraser',\n    'paintBucket',\n    'circle',\n    'rectangle',\n    'stroke',\n    'paintAllPixels',\n    'lighten',\n    'mirror',\n    'rotate90deg',\n    'move',\n    'dithering',\n    'colorPicker',\n    'shapeSelection',\n    'negative',\n    'broom',\n  ],\n  googleKey: '508015143841-qqc5pr7u0majsitstuntcpuo45ocgfh1.apps.googleusercontent.com',\n  mainCanvasSize: 768,\n};\n\n// 508015143841-rtuaoqal57mbq4f79oh6u281lh9ub9fs.apps.googleusercontent.com\n","import React from 'react';\nimport { GoogleLogin } from 'react-google-login';\nimport PropTypes from 'prop-types';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faGoogle } from '@fortawesome/free-brands-svg-icons';\nimport constants from '../constants';\n\n\nexport default function Login({ login }) {\n  return (\n    <GoogleLogin\n      clientId={constants.googleKey}\n      buttonText=\"Login\"\n      onSuccess={login}\n      cookiePolicy=\"single_host_origin\"\n      render={renderProps => (\n        <button\n          className=\"login-button\"\n          onClick={renderProps.onClick}\n          disabled={renderProps.disabled}\n          type=\"button\"\n        >\n          <FontAwesomeIcon icon={faGoogle} />\n          {'  '}\n          Sign in\n        </button>\n      )}\n    />\n  );\n}\n\nLogin.propTypes = { login: PropTypes.func.isRequired };\n","import React from 'react';\nimport { GoogleLogout } from 'react-google-login';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faGoogle } from '@fortawesome/free-brands-svg-icons';\nimport PropTypes from 'prop-types';\n\nexport default function Logout({ logout, userName, userImg }) {\n  return (\n    <div className=\"logout-container\">\n      <div className=\"logout-button-container\">\n        <span>\n          ,\n          {' '}\n          {userName}\n        </span>\n\n        <GoogleLogout\n          buttonText=\"Logout\"\n          onLogoutSuccess={logout}\n          render={renderProps => (\n            <button\n              className=\"logout-button\"\n              onClick={renderProps.onClick}\n              disabled={renderProps.disabled}\n              type=\"button\"\n            >\n              <FontAwesomeIcon icon={faGoogle} />\n              {'  '}\n              Sign out\n            </button>\n          )}\n        />\n      </div>\n\n      <img src={userImg} alt={userImg} width=\"50\" height=\"50\" />\n    </div>\n  );\n}\n\nLogout.propTypes = {\n  logout: PropTypes.func.isRequired,\n  userName: PropTypes.string.isRequired,\n  userImg: PropTypes.string.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Login from './Login';\nimport Logout from './Logout';\nimport './header.scss';\n\nexport default class Header extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLogin: false,\n      userImg: null,\n      userName: null,\n    };\n\n    this.login = this.login.bind(this);\n    this.logout = this.logout.bind(this);\n  }\n\n  login(response) {\n    const { givenName, imageUrl } = response.profileObj;\n    this.setState({\n      isLogin: true,\n      userImg: imageUrl,\n      userName: givenName,\n    });\n  }\n\n  logout() {\n    this.setState({\n      isLogin: false,\n      userImg: null,\n      userName: null,\n    });\n  }\n\n  render() {\n    const { isLogin, userImg, userName } = this.state;\n    const { toggleLandingPage } = this.props;\n    return (\n      <div className=\"app-header\">\n\n        <button\n          className=\"piskel-button\"\n          onClick={toggleLandingPage}\n          type=\"button\"\n        >\n          <h1>Piskel</h1>\n        </button>\n\n        <div className=\"header-buttons-container\">\n          {!isLogin && <Login login={this.login} />}\n          {isLogin && <Logout userName={userName} userImg={userImg} logout={this.logout} />}\n        </div>\n      </div>\n    );\n  }\n}\n\nHeader.propTypes = {\n  toggleLandingPage: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport default function CanvasSizeSettings({ changeCanvasSize }) {\n  return (\n    <div className=\"settings-area\">\n      <button\n        className=\"settings-button\"\n        onClick={() => changeCanvasSize(32)}\n        type=\"button\"\n      >\n        32x32\n      </button>\n\n      <button\n        className=\"settings-button\"\n        onClick={() => changeCanvasSize(64)}\n        type=\"button\"\n      >\n        64x64\n      </button>\n\n      <button\n        className=\"settings-button\"\n        onClick={() => changeCanvasSize(128)}\n        type=\"button\"\n      >\n        128x128\n      </button>\n    </div>\n  );\n}\n\nCanvasSizeSettings.propTypes = {\n  changeCanvasSize: PropTypes.func.isRequired,\n};\n","export default function renderCanvas(canvas, frame, pixelSize, clearCanvas = true) {\n  const context = canvas.getContext('2d');\n\n  if (clearCanvas) context.clearRect(0, 0, canvas.width, canvas.height);\n\n  frame.forEach((row, i) => {\n    row.forEach((cell, j) => {\n      if (!cell) return;\n      context.fillStyle = `rgb(${cell.join()})`;\n      context.fillRect(pixelSize * i, pixelSize * j, pixelSize, pixelSize);\n    });\n  });\n}\n","export default function createLink(data, name, format) {\n  const link = document.createElement('a');\n  link.setAttribute('href', data);\n  link.setAttribute('download', `${name}.${format}`);\n\n  return link;\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport GIFEncoder from 'gif-encoder-2';\nimport UPNG from 'upng-js';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTimes } from '@fortawesome/free-solid-svg-icons';\nimport renderCanvas from '../utils/renderCanvas';\nimport createLink from '../utils/createLink';\nimport constants from '../constants';\n\nexport default class ModalExportMenu extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      fps: 12,\n      gifBackgroundColor: '#969696',\n      fileSize: 64,\n      fileName: 'piskel-clone',\n    };\n\n    this.fpsInput = React.createRef();\n    this.sizeInput = React.createRef();\n    this.colorInput = React.createRef();\n    this.nameInput = React.createRef();\n\n    this.changeFps = this.changeFps.bind(this);\n    this.changeGifSize = this.changeGifSize.bind(this);\n    this.changeGifBackgroundColor = this.changeGifBackgroundColor.bind(this);\n    this.changeGifName = this.changeGifName.bind(this);\n    this.exportGif = this.exportGif.bind(this);\n    this.exportRSSFormat = this.exportRSSFormat.bind(this);\n  }\n\n  componentWillMount() {\n    this.root = document.createElement('div');\n    this.root.className = 'modal-export-menu';\n    document.body.appendChild(this.root);\n  }\n\n  componentWillUnmount() {\n    document.body.removeChild(this.root);\n  }\n\n  choseExportFunction(format) {\n    if (format === '.gif') this.exportGif();\n    if (format === '.apng') this.exportApng();\n    if (format === '.rss') this.exportRSSFormat();\n  }\n\n  async exportGif() {\n    const {\n      gifBackgroundColor,\n      fps,\n      fileSize,\n      fileName,\n    } = this.state;\n    const exportSize = fileSize;\n    const { layers, pixelSize } = this.props;\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d');\n    const encoder = new GIFEncoder(exportSize, exportSize);\n    const standartCanvasSize = constants.mainCanvasSize;\n    const currPixelSize = (exportSize / standartCanvasSize) * pixelSize;\n\n    canvas.width = exportSize;\n    canvas.height = exportSize;\n    encoder.setDelay(1000 / fps);\n    encoder.start();\n\n    for (let i = 0; i < layers[0].length; i += 1) {\n      context.fillStyle = gifBackgroundColor;\n      context.fillRect(0, 0, exportSize, exportSize);\n\n      for (let j = 0; j < layers.length; j += 1) {\n        renderCanvas(canvas, layers[j][i], currPixelSize, false);\n      }\n\n      encoder.addFrame(context);\n      context.clearRect(0, 0, exportSize, exportSize);\n    }\n\n    encoder.finish();\n\n    const buffer = encoder.out.getData();\n    const b64encoded = btoa(String.fromCharCode.apply(null, buffer));\n    const datajpg = `data:image/jpg;base64,${b64encoded}`;\n    const link = createLink(datajpg, fileName, 'gif');\n\n    link.click();\n  }\n\n  async exportApng() {\n    const canvas = document.createElement('canvas');\n    const { fps, fileSize, fileName } = this.state;\n    const exportSize = fileSize;\n    const { layers, pixelSize } = this.props;\n    canvas.width = exportSize;\n    canvas.height = exportSize;\n    const context = canvas.getContext('2d');\n    const standartCanvasSize = 768;\n    const currPixelSize = (exportSize / standartCanvasSize) * pixelSize;\n    const framesArr = [];\n\n    for (let i = 0; i < layers[0].length; i += 1) {\n      for (let j = 0; j < layers.length; j += 1) {\n        renderCanvas(canvas, layers[j][i], currPixelSize, false);\n      }\n\n      const uintarr = context.getImageData(0, 0, exportSize, exportSize).data;\n\n      framesArr.push(uintarr.buffer);\n      context.clearRect(0, 0, exportSize, exportSize);\n    }\n\n    const delay = 1000 / fps;\n    const delayMap = Array(framesArr.length).fill(delay);\n    const apng = UPNG.encode(framesArr, exportSize, exportSize, 0, delayMap);\n    const b64encoded = btoa(String.fromCharCode.apply(null, new Uint8Array(apng)));\n    const datajpg = `data:image/jpg;base64,${b64encoded}`;\n    const link = createLink(datajpg, fileName, 'apng');\n\n    link.click();\n  }\n\n  async exportRSSFormat() {\n    const { layers } = this.props;\n    const { fileName } = this.state;\n    const result = JSON.stringify(layers);\n    const data = new Blob([result], { type: 'text/plain' });\n    const textFile = window.URL.createObjectURL(data);\n    const link = createLink(textFile, fileName, 'rss');\n    link.click();\n  }\n\n  changeFps(newFPS) {\n    this.setState({\n      fps: newFPS,\n    });\n  }\n\n  changeGifBackgroundColor(newBackgroundColor) {\n    this.setState({\n      gifBackgroundColor: newBackgroundColor,\n    });\n  }\n\n  changeGifSize(newFileSize) {\n    this.setState({\n      fileSize: newFileSize,\n    });\n  }\n\n  changeGifName(newFileName) {\n    this.setState({\n      fileName: newFileName,\n    });\n  }\n\n  render() {\n    const { changeExportMenuStatus, modalMenuFormat } = this.props;\n    const {\n      gifBackgroundColor,\n      fps,\n      fileSize,\n      fileName,\n    } = this.state;\n\n    return ReactDOM.createPortal(\n      <div className=\"export-menu\">\n        <span>\n          Export\n          {' '}\n          {modalMenuFormat}\n        </span>\n\n        <div className=\"export-field\">\n          File name:\n          <input\n            className=\"nameInput\"\n            type=\"text\"\n            value={fileName}\n            onChange={() => this.changeGifName(this.nameInput.current.value)}\n            ref={this.nameInput}\n          />\n        </div>\n        {modalMenuFormat === '.gif' && (\n          <div className=\"export-field\">\n            Gif background color:\n            <button\n              className=\"color-button\"\n              style={{ backgroundColor: gifBackgroundColor }}\n              onClick={() => this.colorInput.current.click()}\n              type=\"button\"\n            >\n              <input\n                className=\"color-input\"\n                type=\"color\"\n                onChange={() => this.changeGifBackgroundColor(this.colorInput.current.value)}\n                ref={this.colorInput}\n                value={gifBackgroundColor}\n              />\n            </button>\n          </div>\n        )}\n\n        {modalMenuFormat !== '.rss' && (\n          <div className=\"export-field\">\n            <span>\n              FPS rate:\n              {' '}\n              {fps}\n            </span>\n\n            <input\n              type=\"range\"\n              className=\"fps-input\"\n              onChange={() => this.changeFps(this.fpsInput.current.value)}\n              value={fps}\n              min=\"0\"\n              max=\"24\"\n              ref={this.fpsInput}\n            />\n          </div>\n        )}\n\n        {modalMenuFormat !== '.rss' && (\n          <div className=\"export-field\">\n            <span>\n              File dimensions:\n              {' '}\n              {fileSize}\n              {' '}\n              px\n            </span>\n\n            <input\n              type=\"range\"\n              className=\"size-input\"\n              onChange={() => this.changeGifSize(this.sizeInput.current.value)}\n              value={fileSize}\n              min=\"64\"\n              max=\"768\"\n              step=\"32\"\n              ref={this.sizeInput}\n            />\n          </div>\n        )}\n\n        <button\n          onClick={() => {\n            this.choseExportFunction(modalMenuFormat);\n            changeExportMenuStatus(null);\n          }}\n\n          className=\"export-button\"\n          type=\"button\"\n        >\n          Export\n        </button>\n\n        <button\n          className=\"export-exit-button\"\n          onClick={() => changeExportMenuStatus(null)}\n          type=\"button\"\n        >\n          <FontAwesomeIcon icon={faTimes} />\n        </button>\n      </div>,\n      this.root,\n    );\n  }\n}\n\nModalExportMenu.propTypes = {\n  changeExportMenuStatus: PropTypes.func.isRequired,\n  layers: PropTypes.arrayOf(PropTypes.array).isRequired,\n  pixelSize: PropTypes.number.isRequired,\n  modalMenuFormat: PropTypes.string.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ModalExportMenu from './ModalExportMenu';\n\nexport default class ExportResultSetting extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      modalMenuFormat: null,\n    };\n\n    this.changeExportMenuStatus = this.changeExportMenuStatus.bind(this);\n  }\n\n\n  changeExportMenuStatus(toggleModalMenuFormat) {\n    const { format } = this.state;\n    const newFormat = format === toggleModalMenuFormat ? null : toggleModalMenuFormat;\n\n    this.setState({\n      modalMenuFormat: newFormat,\n    });\n  }\n\n  render() {\n    const { modalMenuFormat } = this.state;\n    const { layers, pixelSize } = this.props;\n\n    return (\n      <div className=\"settings-area\">\n        <button type=\"button\" className=\"settings-button\" onClick={() => this.changeExportMenuStatus('.gif')}>.gif</button>\n        <button type=\"button\" className=\"settings-button\" onClick={() => this.changeExportMenuStatus('.apng')}>.apng</button>\n        <button type=\"button\" className=\"settings-button\" onClick={() => this.changeExportMenuStatus('.rss')}>.rss</button>\n        {modalMenuFormat && (\n          <ModalExportMenu\n            changeExportMenuStatus={this.changeExportMenuStatus}\n            modalMenuFormat={modalMenuFormat}\n            layers={layers}\n            pixelSize={pixelSize}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nExportResultSetting.propTypes = {\n  layers: PropTypes.arrayOf(PropTypes.array).isRequired,\n  pixelSize: PropTypes.number.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class ImportMenu extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.input = React.createRef();\n  }\n\n  render() {\n    const { importLayers } = this.props;\n    return (\n      <div className=\"settings-area\">\n        <button\n          type=\"button\"\n          className=\"import-button\"\n          onClick={() => this.input.current.click()}\n        >\n          Import .rss\n          <input\n            type=\"file\"\n            className=\"import-input\"\n            onInput={e => importLayers(e)}\n            ref={this.input}\n          />\n        </button>\n      </div>\n    );\n  }\n}\n\nImportMenu.propTypes = {\n  importLayers: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport PropTypes from 'prop-types';\n\nexport default function SettingsButton({\n  icon,\n  onClick,\n  id,\n  atciveSettingButton,\n}) {\n  return (\n    <button\n      className={`${atciveSettingButton === id ? 'active ' : ''}settings-button`}\n      onClick={e => onClick(id, e)}\n      type=\"button\"\n    >\n      <FontAwesomeIcon icon={icon} />\n    </button>\n  );\n}\n\nSettingsButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n\n  icon: PropTypes.shape({\n    iconName: PropTypes.string.isRequired,\n    prefix: PropTypes.string.isRequired,\n    icon: PropTypes.array.isRequired,\n  }).isRequired,\n\n  id: PropTypes.number.isRequired,\n  atciveSettingButton: PropTypes.number.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './settings.scss';\nimport { faCog, faTimes, faFolderOpen } from '@fortawesome/free-solid-svg-icons';\nimport { faSave } from '@fortawesome/free-regular-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport key from 'weak-key';\nimport CanvasSizeSettings from './CanvasSizeSettings';\nimport ExportResultSetting from './ExportResultSetting';\nimport ImportMenu from './ImportMenu';\nimport SettingsButton from './SettingsButton';\n\n\nexport default class Settings extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      atciveSettingButton: 0,\n    };\n\n    this.settings = React.createRef();\n    this.openMenu = this.openMenu.bind(this);\n    this.closeMenu = this.closeMenu.bind(this);\n  }\n\n  openMenu(id, e) {\n    e.stopPropagation();\n    const settings = this.settings.current;\n    settings.classList.add('activeMenu');\n\n    this.setState({\n      atciveSettingButton: id,\n    });\n  }\n\n  closeMenu() {\n    const settings = this.settings.current;\n    settings.classList.remove('activeMenu');\n  }\n\n  render() {\n    const icons = [faCog, faSave, faFolderOpen];\n    const { atciveSettingButton } = this.state;\n    const {\n      changeCanvasSize,\n      layers,\n      pixelSize,\n      importLayers,\n    } = this.props;\n\n    return (\n      <div\n        className=\"settings\"\n        ref={this.settings}\n      >\n        <div className=\"buttons-container\">\n          {icons.map((item, i) => (\n            <SettingsButton\n              icon={item}\n              atciveSettingButton={atciveSettingButton}\n              id={i}\n              key={key(item)}\n              onClick={this.openMenu}\n            />\n          ))\n          }\n        </div>\n\n        {atciveSettingButton === 0 && <CanvasSizeSettings changeCanvasSize={changeCanvasSize} />}\n        {atciveSettingButton === 1\n          && <ExportResultSetting layers={layers} pixelSize={pixelSize} />\n        }\n        {atciveSettingButton === 2 && <ImportMenu importLayers={importLayers} />}\n\n\n        <button\n          className=\"exit-menu-button\"\n          onClick={this.closeMenu}\n          type=\"button\"\n        >\n          <FontAwesomeIcon icon={faTimes} />\n        </button>\n      </div>\n    );\n  }\n}\n\nSettings.propTypes = {\n  changeCanvasSize: PropTypes.func.isRequired,\n  layers: PropTypes.arrayOf(PropTypes.array).isRequired,\n  pixelSize: PropTypes.number.isRequired,\n  importLayers: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport renderCanvas from '../utils/renderCanvas';\n\nexport default class PreviewArea extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.animateFramesPreview = this.animateFramesPreview.bind(this);\n    this.canvas = React.createRef();\n  }\n\n  componentDidUpdate() {\n    clearTimeout(this.timer);\n    this.animateFramesPreview();\n  }\n\n  animateFramesPreview() {\n    const canvas = this.canvas.current;\n    const { layers, fpsInputValue, pixelSize } = this.props;\n    if (fpsInputValue === 0) return;\n    let x = 0;\n\n    function Frame() {\n      if (x >= layers[0].length) x = 0;\n      renderCanvas(canvas, layers[0][x], pixelSize / 2);\n\n      for (let i = 1; i < layers.length; i += 1) {\n        renderCanvas(canvas, layers[i][x], pixelSize / 2, false);\n      }\n\n      x += 1;\n    }\n\n    this.timer = setInterval(() => Frame(), 1000 / fpsInputValue);\n  }\n\n  render() {\n    return (\n      <canvas\n        className=\"preview-canvas\"\n        width={384}\n        height={384}\n        ref={this.canvas}\n      />\n    );\n  }\n}\n\nPreviewArea.propTypes = {\n  layers: PropTypes.arrayOf(PropTypes.array).isRequired,\n  pixelSize: PropTypes.number.isRequired,\n  fpsInputValue: PropTypes.number.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCompress } from '@fortawesome/free-solid-svg-icons';\n\n\nexport default class PreviewSettings extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getInpuValue = this.getInpuValue.bind(this);\n    this.input = React.createRef();\n  }\n\n  getInpuValue() {\n    const { onInput } = this.props;\n    onInput(this.input.current.value);\n  }\n\n  render() {\n    const { value, onClick } = this.props;\n    return (\n      <div className=\"preview-setings\">\n        <span className=\"fps-count\">\n          { value }\n          {' '}\n          FPS\n        </span>\n\n        <input\n          type=\"range\"\n          className=\"fps-input\"\n          value={value}\n          onChange={this.getInpuValue}\n          min=\"0\"\n          max=\"24\"\n          ref={this.input}\n        />\n\n        <button\n          onClick={onClick}\n          className=\"full-screen-button\"\n          type=\"button\"\n        >\n          <FontAwesomeIcon icon={faCompress} />\n        </button>\n      </div>\n    );\n  }\n}\n\nPreviewSettings.propTypes = {\n  onInput: PropTypes.func.isRequired,\n  onClick: PropTypes.func.isRequired,\n  value: PropTypes.number.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport PreviewArea from './PreviewArea';\nimport PreviewSettings from './PreviewSettings';\nimport './FramesPreview.scss';\n\nexport default class FramesPreview extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fpsInputValue: 10,\n    };\n\n    this.previewArea = React.createRef();\n    this.toggleFullScreen = this.toggleFullScreen.bind(this);\n  }\n\n  handleInput(value) {\n    this.setState({ fpsInputValue: +value });\n  }\n\n  toggleFullScreen() {\n    if (!document.fullscreenElement) {\n      this.previewArea.current.requestFullscreen();\n    } else {\n      document.exitFullscreen();\n    }\n  }\n\n  render() {\n    const { layers, pixelSize } = this.props;\n    const { fpsInputValue } = this.state;\n\n    return (\n      <div className=\"frames-preview\" ref={this.previewArea}>\n        <PreviewArea\n          fpsInputValue={fpsInputValue}\n          layers={layers}\n          pixelSize={pixelSize}\n        />\n\n        <PreviewSettings\n          value={fpsInputValue}\n          onInput={value => this.handleInput(value)}\n          onClick={this.toggleFullScreen}\n        />\n      </div>\n    );\n  }\n}\n\nFramesPreview.propTypes = {\n  layers: PropTypes.arrayOf(PropTypes.array).isRequired,\n  pixelSize: PropTypes.number.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCopy } from '@fortawesome/free-solid-svg-icons';\n\nexport default function CopyButton({ onClick }) {\n  return (\n    <button\n      className=\"frame-copy\"\n      onClick={onClick}\n      type=\"button\"\n    >\n      <FontAwesomeIcon icon={faCopy} />\n    </button>\n  );\n}\n\nCopyButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTrash } from '@fortawesome/free-solid-svg-icons';\n\nexport default function DeleteButton({ onClick }) {\n  return (\n    <button\n      className=\"frame-delete\"\n      onClick={onClick}\n      type=\"button\"\n    >\n      <FontAwesomeIcon icon={faTrash} />\n    </button>\n  );\n}\n\nDeleteButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport CopyButton from './CopyButton';\nimport DelteButton from './DeleteButton';\nimport renderCanvas from '../utils/renderCanvas';\n\n\nexport default class Frame extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.canvas = React.createRef();\n  }\n\n  componentDidMount() {\n    this.animateFrames();\n  }\n\n  componentDidUpdate() {\n    this.animateFrames();\n  }\n\n  animateFrames() {\n    const canvas = this.canvas.current;\n    const { id, frames, pixelSize } = this.props;\n    const frame = frames[id];\n    renderCanvas(canvas, frame, pixelSize / 4);\n  }\n\n  render() {\n    const {\n      active,\n      onClick,\n      id,\n      deleteFrame,\n      copyFrame,\n      frames,\n    } = this.props;\n\n    return (\n      <div\n        className={`${active ? 'active' : null} frame`}\n        onClick={() => onClick(id)}\n        role=\"presentation\"\n        draggable=\"true\"\n        id={id}\n      >\n        <canvas\n          width=\"192\"\n          height=\"192\"\n          id={id}\n          ref={this.canvas}\n        />\n\n        <div className=\"frame-count\">{ id + 1 }</div>\n\n        {frames.length > 1 && <DelteButton onClick={e => deleteFrame(id, e)} />}\n\n        <CopyButton onClick={e => copyFrame(id, e)} />\n\n      </div>\n    );\n  }\n}\n\nFrame.propTypes = {\n  frames: PropTypes.arrayOf(PropTypes.array).isRequired,\n  onClick: PropTypes.func.isRequired,\n  copyFrame: PropTypes.func.isRequired,\n  deleteFrame: PropTypes.func.isRequired,\n  pixelSize: PropTypes.number.isRequired,\n  id: PropTypes.number.isRequired,\n  active: PropTypes.bool.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nexport default function AddFrameButton({ onClick }) {\n  return (\n    <button\n      className=\"add-frame-button\"\n      onClick={onClick}\n      type=\"button\"\n    >\n      <FontAwesomeIcon icon={faPlus} />\n      Add frame\n    </button>\n  );\n}\n\nAddFrameButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport key from 'weak-key';\nimport Frame from './Frame';\nimport AddFrameButton from './AddFrameButton';\nimport './FrameControle.scss';\n\n\nexport default class FramesControl extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.dropZone = React.createRef();\n  }\n\n  componentDidMount() {\n    const dropZone = this.dropZone.current;\n\n    dropZone.ondragstart = (event) => {\n      this.startId = event.target.getAttribute('id');\n    };\n\n    dropZone.ondragenter = (event) => {\n      if (event.target.parentElement.classList.contains('frame')) {\n        event.target.parentElement.classList.add('drag-hovered');\n      }\n    };\n\n    dropZone.ondragleave = (event) => {\n      if (event.target.parentElement.classList.contains('frame')) {\n        event.target.parentElement.classList.remove('drag-hovered');\n      }\n    };\n\n    dropZone.ondragover = e => e.preventDefault();\n\n    dropZone.ondrop = (event) => {\n      const { replaceLayer } = this.props;\n      const targetId = event.target.getAttribute('id');\n\n      event.preventDefault();\n      event.target.parentElement.classList.remove('drag-hovered');\n      if (this.startId === targetId) return;\n      replaceLayer(this.startId, targetId);\n    };\n  }\n\n\n  render() {\n    const {\n      onClick,\n      frames,\n      currentFrame,\n      copyFrame,\n      deleteFrame,\n      addFrame,\n      pixelSize,\n    } = this.props;\n\n    return (\n      <div\n        className=\"frames-controle\"\n        ref={this.dropZone}\n      >\n        {frames.map((frame, i) => (\n          <Frame\n            onClick={onClick}\n            frames={frames}\n            key={key(frame)}\n            id={i}\n            active={currentFrame === i}\n            copyFrame={copyFrame}\n            deleteFrame={deleteFrame}\n            pixelSize={pixelSize}\n            dragenter={this.dragEnter}\n          />\n        ))\n        }\n\n        <AddFrameButton\n          onClick={addFrame}\n        />\n      </div>\n    );\n  }\n}\n\nFramesControl.propTypes = {\n  frames: PropTypes.arrayOf(PropTypes.array).isRequired,\n  replaceLayer: PropTypes.func.isRequired,\n  onClick: PropTypes.func.isRequired,\n  currentFrame: PropTypes.number.isRequired,\n  copyFrame: PropTypes.func.isRequired,\n  deleteFrame: PropTypes.func.isRequired,\n  addFrame: PropTypes.func.isRequired,\n  pixelSize: PropTypes.number.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport default function FrameInfo({\n  mousePosX,\n  mousePosY,\n  canvasSize,\n  framesLength,\n  currentFrame,\n  isNeedCoords,\n}) {\n  return (\n    <div className=\"frame-info\">\n      <span>\n        {currentFrame + 1}\n        /\n        {framesLength}\n      </span>\n      <span>\n        [\n        {canvasSize}\n        x\n        {canvasSize}\n        ]\n      </span>\n      {isNeedCoords && (\n        <span>\n          {mousePosX}\n          x\n          {mousePosY}\n        </span>\n      )}\n    </div>\n  );\n}\n\nFrameInfo.propTypes = {\n  mousePosX: PropTypes.number.isRequired,\n  mousePosY: PropTypes.number.isRequired,\n  canvasSize: PropTypes.number.isRequired,\n  framesLength: PropTypes.number.isRequired,\n  currentFrame: PropTypes.number.isRequired,\n  isNeedCoords: PropTypes.bool.isRequired,\n};\n","export default function makeCopy(frame) {\n  return JSON.parse(JSON.stringify(frame));\n}\n","export default function getCoordinates(e, pixelSize) {\n  const event = e.nativeEvent ? e.nativeEvent : e;\n  const x = Math.floor(event.offsetX / pixelSize);\n  const y = Math.floor(event.offsetY / pixelSize);\n\n  return { x, y };\n}\n","import makeCopy from './makeCopy';\nimport getCoordinates from './getCoordinates';\n\nexport default function createRectangle(frame, e, pixelSize, color, startX, startY) {\n  const clone = makeCopy(frame);\n  const coordinates = getCoordinates(e, pixelSize);\n\n  const deltaX = startX - coordinates.x;\n  const deltaY = startY - coordinates.y;\n\n  const minY = Math.min(startY, coordinates.y);\n  const minX = Math.min(startX, coordinates.x);\n\n  for (let i = minY; i <= minY + Math.abs(deltaY); i += 1) {\n    clone[coordinates.x + deltaX][i] = color;\n    clone[coordinates.x][i] = color;\n  }\n\n  for (let i = minX; i <= minX + Math.abs(deltaX); i += 1) {\n    clone[i][coordinates.y] = color;\n    clone[i][coordinates.y + deltaY] = color;\n  }\n  return clone;\n}\n","import makeCopy from './makeCopy';\nimport getCoordinates from './getCoordinates';\n\nexport default function createCircle(frame, e, pixelSize, color, startX, startY) {\n  const coordinates = getCoordinates(e, pixelSize);\n  const R = Math.max(Math.abs(coordinates.x - startX), Math.abs(coordinates.y - startY));\n  const clone = makeCopy(frame);\n  const canvasSize = clone.length;\n\n  let x = 0;\n  let y = R;\n  let delta = 1 - 2 * R;\n\n  while (y >= 0) {\n    const leftIndex = startX - x;\n    const rightIndex = startX + x;\n    const upIndex = startY - y;\n    const downIndex = startY + y;\n\n    const leftBorderCrossed = leftIndex < 0;\n    const rightBorderCrossed = rightIndex >= canvasSize;\n    const upBorderCrossed = upIndex < 0;\n    const downBorderCrossed = downIndex >= canvasSize;\n    const errorY = 2 * (delta + y) - 1;\n    const errorX = 2 * (delta - x) - 1;\n\n    if (!(rightBorderCrossed || downBorderCrossed)) clone[rightIndex][downIndex] = color;\n    if (!(rightBorderCrossed || upBorderCrossed)) clone[rightIndex][upIndex] = color;\n    if (!(leftBorderCrossed || downBorderCrossed)) clone[leftIndex][downIndex] = color;\n    if (!(leftBorderCrossed || upBorderCrossed)) clone[leftIndex][upIndex] = color;\n\n    if (delta < 0 && errorY <= 0) {\n      delta += (2 * (x + 1)) + 1;\n      x += 1;\n    } else if (delta > 0 && errorX > 0) {\n      delta += 1 - (2 * (y - 1));\n      y -= 1;\n    } else {\n      x += 1;\n      delta += 2 * (x - y);\n      y -= 1;\n    }\n  }\n\n  return clone;\n}\n","export default function CreateBaseFrame(canvasSize) {\n  return Array.from(Array(canvasSize), () => new Array(canvasSize));\n}\n","import makeCopy from './makeCopy';\n\nexport default function lineDraw(frame, color, startX, startY, x, y, isMirror = false) {\n  const clone = makeCopy(frame);\n  const deltaX = Math.abs(startX - x);\n  const deltaY = Math.abs(startY - y);\n  const signX = x < startX ? 1 : -1;\n  const signY = y < startY ? 1 : -1;\n  let currX = x;\n  let currY = y;\n  let error = deltaX - deltaY;\n  const center = frame.length / 2;\n\n  do {\n    const error2 = error * 2;\n\n    clone[startX][startY] = color;\n    clone[currX][currY] = color;\n\n    if (isMirror) {\n      const delta = -(currX - center + 1);\n      clone[center + delta][currY] = color;\n    }\n\n    if (error * 2 > -deltaY) {\n      error -= deltaY;\n      currX += signX;\n    }\n\n    if (error2 < deltaX) {\n      error += deltaX;\n      currY += signY;\n    }\n  } while (currX !== startX || currY !== startY);\n\n  return clone;\n}\n","export default function lighten(color, step = 25) {\n  return color ? color.map(shade => Math.min(255, shade + step)) : undefined;\n}\n","import makeCopy from './makeCopy';\n\nexport default function moveFunction(frame, startX, startY, x, y) {\n  const deltaX = x - startX;\n  const deltaY = startY - y;\n  let clone = makeCopy(frame);\n  const canvasSize = clone.length;\n\n  if (deltaX > 0) {\n    clone = Array.from(Array(deltaX), () => new Array(canvasSize)\n      .fill(null)).concat(clone.slice(0, -deltaX));\n  }\n\n  if (deltaX < 0) {\n    clone = clone.slice(-deltaX)\n      .concat(Array.from(Array(-deltaX), () => new Array(canvasSize).fill(null)));\n  }\n\n  for (let i = 0; i < canvasSize; i += 1) {\n    if (deltaY < 0) {\n      clone[i] = Array(-deltaY).fill(null).concat(clone[i].slice(0, deltaY));\n    }\n\n    if (deltaY > 0) {\n      clone[i] = clone[i].slice(deltaY).concat((Array(deltaY).fill(null)));\n    }\n  }\n\n  return clone;\n}\n","import makeCopy from './makeCopy';\n\nexport default function dithering(frame, mainColor, secondaryColor, x, y) {\n  const clone = makeCopy(frame);\n\n  clone[x][y] = (x + y) % 2 ? secondaryColor : mainColor;\n\n  return clone;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport renderCanvas from '../utils/renderCanvas';\nimport makeCopy from '../utils/makeCopy';\nimport createRectangle from '../utils/createRectangle';\nimport createCircle from '../utils/createCircle';\nimport bucketFunction from '../utils/bucketFunction';\nimport selectShape from '../utils/selectShape';\nimport joinFrames from '../utils/joinFrames';\nimport lineDraw from '../utils/lineDraw';\nimport lighten from '../utils/lighten';\nimport getCoordinates from '../utils/getCoordinates';\nimport colorSamePixelsFunction from '../utils/colorSamePixelsFunction';\nimport erotateClockwis from '../utils/erotateClockwis';\nimport moveFunction from '../utils/moveFunction';\nimport dithering from '../utils/dithering';\nimport negativeImage from '../utils/negativeImage';\nimport CreateBaseFrame from '../utils/CreateBaseFrame';\n\nexport default class MainCanvas extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.penOrEraserOrMirror = this.penOrEraserOrMirror.bind(this);\n    this.canvas = React.createRef();\n    this.chooseToolFunction = this.chooseToolFunction.bind(this);\n    this.rectangleAndCircle = this.rectangleAndCircle.bind(this);\n    this.stroke = this.stroke.bind(this);\n    this.lighten = this.lighten.bind(this);\n    this.rotateFrame = this.rotateFrame.bind(this);\n    this.moveFrame = this.moveFrame.bind(this);\n    this.ditheringFrame = this.ditheringFrame.bind(this);\n    this.bucket = this.bucket.bind(this);\n    this.shapeSelection = this.shapeSelection.bind(this);\n  }\n\n  componentDidUpdate() {\n    const { frame, pixelSize } = this.props;\n    const canvas = this.canvas.current;\n    renderCanvas(canvas, frame, pixelSize);\n  }\n\n  chooseToolFunction(e) {\n    const { activeToolId } = this.props;\n\n    switch (activeToolId) {\n      case 'pen':\n      case 'eraser':\n      case 'mirror':\n        this.penOrEraserOrMirror(e);\n        break;\n      case 'paintBucket':\n        this.bucket(e);\n        break;\n      case 'shapeSelection':\n        this.shapeSelection(e);\n        break;\n      case 'circle':\n      case 'rectangle':\n        this.rectangleAndCircle(activeToolId, e);\n        break;\n      case 'stroke':\n        this.stroke(e);\n        break;\n      case 'paintAllPixels':\n        this.colorSamePixels(e);\n        break;\n      case 'lighten':\n        this.lighten(e);\n        break;\n      case 'rotate90deg':\n        this.rotateFrame();\n        break;\n      case 'move':\n        this.moveFrame(e);\n        break;\n      case 'dithering':\n        this.ditheringFrame(e);\n        break;\n      case 'colorPicker':\n        this.colorPicker(e);\n        break;\n      case 'negative':\n      case 'broom':\n        this.negativeOrBroom();\n        break;\n      default:\n        break;\n    }\n  }\n\n  shapeSelection(event) {\n    const { frame, pixelSize, changeFrame } = this.props;\n    const canvas = this.canvas.current;\n    const shapeInfo = selectShape(frame, pixelSize, event);\n    const startCoords = getCoordinates(event, pixelSize);\n    const { clone } = shapeInfo;\n    const startShape = shapeInfo.shape;\n    let { shape } = shapeInfo;\n\n    if (!shapeInfo) return;\n\n    canvas.onmousemove = (e) => {\n      const currCoords = getCoordinates(e, pixelSize);\n\n      shape = moveFunction(startShape, startCoords.x, startCoords.y, currCoords.x, currCoords.y);\n      renderCanvas(canvas, clone, pixelSize);\n      renderCanvas(canvas, shape, pixelSize, false);\n    };\n\n    canvas.onmouseup = () => {\n      canvas.onmousemove = null;\n      canvas.onmouseup = null;\n      const reuslt = joinFrames(clone, shape);\n      changeFrame(reuslt);\n    };\n  }\n\n  negativeOrBroom() {\n    const {\n      frame,\n      changeFrame,\n      activeToolId,\n    } = this.props;\n    const newFrame = activeToolId === 'negative' ? negativeImage(frame) : CreateBaseFrame(frame.length);\n\n    changeFrame(newFrame);\n  }\n\n  colorPicker(e) {\n    const { frame, changeColor, pixelSize } = this.props;\n    const coordinates = getCoordinates(e, pixelSize);\n    const color = frame[coordinates.x][coordinates.y];\n    if (!color) return;\n    const targetButton = e.nativeEvent.which;\n    changeColor(color, targetButton);\n  }\n\n  ditheringFrame(event) {\n    const canvas = this.canvas.current;\n    const {\n      frame,\n      mainColor,\n      secondaryColor,\n      pixelSize,\n      changeFrame,\n    } = this.props;\n\n    const startCoords = getCoordinates(event, pixelSize);\n    let clone = dithering(frame, mainColor, secondaryColor, startCoords.x, startCoords.y);\n\n    renderCanvas(canvas, clone, pixelSize);\n\n    canvas.onmousemove = (e) => {\n      const currentCoords = getCoordinates(e, pixelSize);\n      clone = dithering(clone, mainColor, secondaryColor, currentCoords.x, currentCoords.y);\n      renderCanvas(canvas, clone, pixelSize);\n    };\n\n    canvas.onmouseup = () => {\n      canvas.onmousemove = null;\n      canvas.onmouseup = null;\n      changeFrame(clone);\n    };\n  }\n\n  moveFrame(event) {\n    const { frame, pixelSize, changeFrame } = this.props;\n    const canvas = this.canvas.current;\n    const startCoords = getCoordinates(event, pixelSize);\n\n    let clone = makeCopy(frame);\n\n    canvas.onmousemove = (e) => {\n      const startFrame = makeCopy(frame);\n      const currCoords = getCoordinates(e, pixelSize);\n      clone = moveFunction(startFrame, startCoords.x, startCoords.y, currCoords.x, currCoords.y);\n      renderCanvas(canvas, clone, pixelSize);\n    };\n\n    canvas.onmouseup = () => {\n      canvas.onmousemove = null;\n      canvas.onmouseup = null;\n      changeFrame(clone);\n    };\n  }\n\n  rotateFrame() {\n    const { frame, changeFrame } = this.props;\n    const clone = erotateClockwis(frame);\n\n    changeFrame(clone);\n  }\n\n  colorSamePixels(e) {\n    const {\n      frame,\n      mainColor,\n      secondaryColor,\n      pixelSize,\n      changeFrame,\n    } = this.props;\n\n    const colorRGBA = e.nativeEvent.which === 3 ? secondaryColor : mainColor;\n    const clone = colorSamePixelsFunction(frame, colorRGBA, pixelSize, e.nativeEvent);\n    changeFrame(clone);\n  }\n\n  stroke(event) {\n    const {\n      frame,\n      mainColor,\n      secondaryColor,\n      pixelSize,\n      changeFrame,\n    } = this.props;\n\n    const canvas = this.canvas.current;\n    const color = event.nativeEvent.which === 3 ? secondaryColor : mainColor;\n    const startCoords = getCoordinates(event, pixelSize);\n    let clone = makeCopy(frame);\n\n    lineDraw(clone, color, startCoords.x, startCoords.y, startCoords.x, startCoords.y);\n    renderCanvas(canvas, frame, pixelSize);\n\n    canvas.onmousemove = (e) => {\n      const startFrame = makeCopy(frame);\n      const currCoords = getCoordinates(e, pixelSize);\n\n      clone = lineDraw(startFrame, color, startCoords.x, startCoords.y, currCoords.x, currCoords.y);\n      renderCanvas(canvas, clone, pixelSize);\n    };\n\n    canvas.onmouseup = () => {\n      canvas.onmousemove = null;\n      canvas.onmouseup = null;\n      changeFrame(clone);\n    };\n  }\n\n\n  rectangleAndCircle(activeToolId, event) {\n    const {\n      frame,\n      mainColor,\n      secondaryColor,\n      pixelSize,\n      changeFrame,\n    } = this.props;\n\n    const canvas = this.canvas.current;\n    const color = event.nativeEvent.which === 3 ? secondaryColor : mainColor;\n    const startCoords = getCoordinates(event, pixelSize);\n    const chozenFunction = activeToolId === 'rectangle' ? createRectangle : createCircle;\n    let clone = makeCopy(frame);\n\n    clone = lineDraw(clone, color, startCoords.x, startCoords.y, startCoords.x, startCoords.y);\n    renderCanvas(canvas, clone, pixelSize);\n\n    canvas.onmousemove = (e) => {\n      clone = chozenFunction(frame, e, pixelSize, color, startCoords.x, startCoords.y);\n      renderCanvas(canvas, clone, pixelSize);\n    };\n\n    canvas.onmouseup = () => {\n      canvas.onmousemove = null;\n      canvas.onmouseup = null;\n      changeFrame(clone);\n    };\n  }\n\n  bucket(e) {\n    const {\n      frame,\n      mainColor,\n      secondaryColor,\n      pixelSize,\n      changeFrame,\n    } = this.props;\n\n    const colorRGBA = e.nativeEvent.which === 3 ? secondaryColor : mainColor;\n    const clone = bucketFunction(frame, colorRGBA, pixelSize, e.nativeEvent);\n\n    changeFrame(clone);\n  }\n\n  penOrEraserOrMirror(event) {\n    const canvas = this.canvas.current;\n    const {\n      frame,\n      mainColor,\n      secondaryColor,\n      pixelSize,\n      changeFrame,\n      activeToolId,\n    } = this.props;\n\n    const coords = getCoordinates(event, pixelSize);\n    const isMirror = activeToolId === 'mirror';\n    const coordinates = [coords.x, coords.y];\n    let color = event.nativeEvent.which === 3 ? secondaryColor : mainColor;\n    if (activeToolId === 'eraser') { color = undefined; }\n    let clone = lineDraw(frame, color, coords.x, coords.y, coords.x, coords.y, isMirror);\n\n    renderCanvas(canvas, clone, pixelSize);\n\n    canvas.onmousemove = (e) => {\n      const currentCoords = getCoordinates(e, pixelSize);\n\n      coordinates.push(currentCoords.x, currentCoords.y);\n      if (coordinates.length > 4) coordinates.splice(0, 2);\n\n      clone = lineDraw(clone, color, ...coordinates, isMirror);\n      renderCanvas(canvas, clone, pixelSize);\n    };\n\n    canvas.onmouseup = () => {\n      canvas.onmousemove = null;\n      canvas.onmouseup = null;\n      changeFrame(clone);\n    };\n  }\n\n  lighten(event) {\n    const canvas = this.canvas.current;\n    const { frame, pixelSize, changeFrame } = this.props;\n    const startCoords = getCoordinates(event, pixelSize);\n    let color = lighten(frame[startCoords.x][startCoords.y]);\n\n    let clone = lineDraw(frame, color, startCoords.x, startCoords.y, startCoords.x, startCoords.y);\n    renderCanvas(canvas, clone, pixelSize);\n\n    canvas.onmousemove = (e) => {\n      const currCoords = getCoordinates(e, pixelSize);\n      color = lighten(clone[currCoords.x][currCoords.y]);\n\n      clone = lineDraw(clone, color, currCoords.x, currCoords.y, currCoords.x, currCoords.y);\n      renderCanvas(canvas, clone, pixelSize);\n    };\n\n    canvas.onmouseup = () => {\n      canvas.onmousemove = null;\n      canvas.onmouseup = null;\n      changeFrame(clone);\n    };\n  }\n\n  render() {\n    return (\n      <canvas\n        onMouseDown={this.chooseToolFunction}\n        onContextMenu={e => e.preventDefault()}\n        className=\"main-canvas\"\n        width=\"768\"\n        height=\"768\"\n        ref={this.canvas}\n      />\n    );\n  }\n}\n\nMainCanvas.propTypes = {\n  secondaryColor: PropTypes.arrayOf(PropTypes.number).isRequired,\n  mainColor: PropTypes.arrayOf(PropTypes.number).isRequired,\n  frame: PropTypes.arrayOf(PropTypes.array).isRequired,\n  changeFrame: PropTypes.func.isRequired,\n  pixelSize: PropTypes.number.isRequired,\n  changeColor: PropTypes.func.isRequired,\n  activeToolId: PropTypes.string.isRequired,\n};\n","import makeCopy from './makeCopy';\nimport getCoordinates from './getCoordinates';\nimport CreateBaseFrame from './CreateBaseFrame';\n\nexport default function selectShape(frame, pixelSize, e) {\n  const clone = makeCopy(frame);\n  const sCoords = getCoordinates(e, pixelSize);\n  const canvasSize = clone.length;\n  const startColor = clone[sCoords.x][sCoords.y] ? clone[sCoords.x][sCoords.y].join() : undefined;\n  if (startColor) {\n    const shape = CreateBaseFrame(frame.length);\n\n    const stack = [[sCoords.x, sCoords.y]];\n\n    while (stack.length) {\n      const position = stack.pop();\n      const x = position[0];\n      const y = position[1];\n\n      if ((x >= 0 && x < canvasSize) && (y >= 0 && y < canvasSize)) {\n        const correntColor = clone[x][y] ? clone[x][y].join() : undefined;\n\n        if (startColor === correntColor) {\n          shape[x][y] = clone[x][y];\n          clone[x][y] = undefined;\n          stack.push([x - 1, y], [x + 1, y], [x, y - 1], [x, y + 1]);\n        }\n      }\n    }\n\n    return { shape, clone };\n  }\n\n  return false;\n}\n","import makeCopy from './makeCopy';\n\nexport default function joinFrames(firstFrame, secondFrame) {\n  const clone = makeCopy(firstFrame);\n\n  secondFrame.forEach((row, x) => {\n    row.forEach((cell, y) => {\n      if (cell) {\n        clone[x][y] = cell;\n      }\n    });\n  });\n\n  return clone;\n}\n","import makeCopy from './makeCopy';\n\nexport default function negativeImage(frame) {\n  const clone = makeCopy(frame);\n\n  clone.forEach((row, x) => {\n    row.forEach((cell, y) => {\n      if (cell) {\n        const r = cell[0];\n        const g = cell[1];\n        const b = cell[2];\n        clone[x][y] = [255 - r, 255 - g, 255 - b];\n      }\n    });\n  });\n\n  return clone;\n}\n","import makeCopy from './makeCopy';\n\nexport default function erotateClockwis(frame) {\n  const n = frame.length;\n  const clone = makeCopy(frame);\n\n  for (let i = 0; i < n / 2; i += 1) {\n    for (let j = i; j < n - i - 1; j += 1) {\n      const tmp = clone[i][j];\n\n      clone[i][j] = clone[n - j - 1][i];\n      clone[n - j - 1][i] = clone[n - i - 1][n - j - 1];\n      clone[n - i - 1][n - j - 1] = clone[j][n - i - 1];\n      clone[j][n - i - 1] = tmp;\n    }\n  }\n\n  return clone;\n}\n","import makeCopy from './makeCopy';\nimport getCoordinates from './getCoordinates';\n\n\nexport default function colorSamePixelsFunction(frame, color, pixelSize, e) {\n  const clone = makeCopy(frame);\n  const startCoords = getCoordinates(e, pixelSize);\n  const startColor = clone[startCoords.x][startCoords.y]\n    ? clone[startCoords.x][startCoords.y].join() : undefined;\n\n  clone.forEach((row, x) => {\n    row.forEach((cell, y) => {\n      if (cell) {\n        const correntColor = clone[x][y] ? clone[x][y].join() : undefined;\n        if (correntColor === startColor) clone[x][y] = color;\n      }\n    });\n  });\n\n  return clone;\n}\n","import makeCopy from './makeCopy';\nimport getCoordinates from './getCoordinates';\n\nexport default function bucketFunction(frame, color, pixelSize, e) {\n  const clone = makeCopy(frame);\n  const sCoords = getCoordinates(e, pixelSize);\n  const canvasSize = clone.length;\n  const startColor = clone[sCoords.x][sCoords.y] ? clone[sCoords.x][sCoords.y].join() : undefined;\n\n  if (startColor !== color.join()) {\n    const stack = [[sCoords.x, sCoords.y]];\n\n    while (stack.length) {\n      const position = stack.pop();\n      const x = position[0];\n      const y = position[1];\n\n      if ((x >= 0 && x < canvasSize) && (y >= 0 && y < canvasSize)) {\n        const correntColor = clone[x][y] ? clone[x][y].join() : undefined;\n\n        if (startColor === correntColor) {\n          clone[x][y] = color;\n          stack.push([x - 1, y], [x + 1, y], [x, y - 1], [x, y + 1]);\n        }\n      }\n    }\n  }\n\n  return clone;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport FrameInfo from './FrameInfo';\nimport MainCanvas from './Canvas';\nimport './CanvasContainer.scss';\n\n\nexport default class CanvasContainer extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      x: 0,\n      y: 0,\n      isNeedCoords: false,\n    };\n\n    this.changeMousePosition = this.changeMousePosition.bind(this);\n    this.deleteCoords = this.deleteCoords.bind(this);\n    this.canvasContainer = React.createRef();\n  }\n\n  deleteCoords() {\n    this.setState({\n      isNeedCoords: false,\n    });\n  }\n\n  changeMousePosition(e) {\n    const { pixelSize } = this.props;\n    const x = Math.floor(e.nativeEvent.offsetX / pixelSize);\n    const y = Math.floor(e.nativeEvent.offsetY / pixelSize);\n\n    this.setState({\n      x,\n      y,\n      isNeedCoords: true,\n    });\n  }\n\n  render() {\n    const {\n      activeToolId,\n      changeFrame,\n      frame,\n      mainColor,\n      secondaryColor,\n      pixelSize,\n      canvasSize,\n      currentFrame,\n      framesLength,\n      changeColor,\n    } = this.props;\n\n    const { x, y, isNeedCoords } = this.state;\n\n    return (\n      <div className=\"main-canvas\">\n        <div\n          className=\"main-canvas-container\"\n          onMouseMove={this.changeMousePosition}\n          onMouseLeave={this.deleteCoords}\n          ref={this.canvasContainer}\n        >\n          <MainCanvas\n            activeToolId={activeToolId}\n            changeFrame={changeFrame}\n            frame={frame}\n            mainColor={mainColor}\n            secondaryColor={secondaryColor}\n            pixelSize={pixelSize}\n            canvasSize={canvasSize}\n            currentFrame={currentFrame}\n            framesLength={framesLength}\n            changeColor={changeColor}\n          />\n        </div>\n\n        <div className=\"main-canvas-info\">\n          <FrameInfo\n            canvasSize={canvasSize}\n            framesLength={framesLength}\n            currentFrame={currentFrame}\n            mousePosX={x}\n            mousePosY={y}\n            isNeedCoords={isNeedCoords}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nCanvasContainer.propTypes = {\n  secondaryColor: PropTypes.arrayOf(PropTypes.number).isRequired,\n  mainColor: PropTypes.arrayOf(PropTypes.number).isRequired,\n  frame: PropTypes.arrayOf(PropTypes.array).isRequired,\n  canvasSize: PropTypes.number.isRequired,\n  changeFrame: PropTypes.func.isRequired,\n  pixelSize: PropTypes.number.isRequired,\n  currentFrame: PropTypes.number.isRequired,\n  framesLength: PropTypes.number.isRequired,\n  changeColor: PropTypes.func.isRequired,\n  activeToolId: PropTypes.string.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTrash, faAngleUp, faAngleDown } from '@fortawesome/free-solid-svg-icons';\n\nexport default function Layer({\n  id,\n  deleteLayer,\n  changeCurrentLayer,\n  currentLayer,\n  layers,\n  upLayer,\n  downLayer,\n}) {\n  return (\n    <div\n      id={id}\n      onClick={e => changeCurrentLayer(id, e)}\n      className={`${currentLayer === id ? 'active ' : ''}layer-view`}\n      role=\"presentation\"\n    >\n      Layer\n      {id + 1}\n\n      <div\n        className=\"layers-button-container\"\n      >\n        {layers.length > 1 && id !== layers.length - 1 && (\n          <button\n            className=\"position layer-button\"\n            onClick={e => downLayer(id, e)}\n            type=\"button\"\n          >\n            <FontAwesomeIcon icon={faAngleDown} />\n          </button>\n        )}\n\n        {layers.length > 1 && (\n          <button\n            className=\"delete layer-button\"\n            onClick={e => deleteLayer(id, e)}\n            type=\"button\"\n          >\n            <FontAwesomeIcon icon={faTrash} />\n          </button>\n        )}\n\n        {layers.length > 1 && id !== 0 && (\n          <button\n            className=\"position layer-button\"\n            onClick={e => upLayer(id, e)}\n            type=\"button\"\n          >\n            <FontAwesomeIcon icon={faAngleUp} />\n          </button>\n        )}\n      </div>\n    </div>\n  );\n}\n\nLayer.propTypes = {\n  deleteLayer: PropTypes.func.isRequired,\n  changeCurrentLayer: PropTypes.func.isRequired,\n  upLayer: PropTypes.func.isRequired,\n  downLayer: PropTypes.func.isRequired,\n  currentLayer: PropTypes.number.isRequired,\n  layers: PropTypes.arrayOf(PropTypes.array).isRequired,\n  id: PropTypes.number.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\nimport key from 'weak-key';\nimport Layer from './Layer';\nimport './LayersSettings.scss';\n\nexport default function LayerSettings({\n  layers,\n  addLayer,\n  deleteLayer,\n  changeCurrentLayer,\n  currentLayer,\n  upLayer,\n  downLayer,\n}) {\n  return (\n    <div className=\"layer-settings\">\n      <div className=\"layer-settings-header\">\n        <button\n          className=\"add-layer-button\"\n          onClick={addLayer}\n          type=\"button\"\n        >\n          <FontAwesomeIcon icon={faPlus} />\n          Add layer\n        </button>\n      </div>\n\n      <div className=\"layer-settings-container\">\n        {layers.map((layer, i) => (\n          <Layer\n            id={i}\n            key={key(layer)}\n            deleteLayer={deleteLayer}\n            changeCurrentLayer={changeCurrentLayer}\n            currentLayer={currentLayer}\n            layers={layers}\n            upLayer={upLayer}\n            downLayer={downLayer}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\nLayerSettings.propTypes = {\n  deleteLayer: PropTypes.func.isRequired,\n  changeCurrentLayer: PropTypes.func.isRequired,\n  upLayer: PropTypes.func.isRequired,\n  downLayer: PropTypes.func.isRequired,\n  currentLayer: PropTypes.number.isRequired,\n  layers: PropTypes.arrayOf(PropTypes.array).isRequired,\n  addLayer: PropTypes.func.isRequired,\n};\n","export default function hexToRgb(hex) {\n  return hex\n    .replace(/^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i, (m, r, g, b) => `#${r}${r}${g}${g}${b}${b}`)\n    .substring(1)\n    .match(/.{2}/g)\n    .map(x => parseInt(x, 16));\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nexport default function ToolButton({\n  id,\n  activeToolId,\n  icon,\n  onClick,\n}) {\n  return (\n    <button\n      className={`${id === activeToolId ? 'active' : null} tool-button`}\n      onClick={() => onClick(id)}\n      type=\"button\"\n    >\n      <FontAwesomeIcon icon={icon} />\n    </button>\n  );\n}\n\nToolButton.propTypes = {\n  id: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n\n  icon: PropTypes.shape({\n    iconName: PropTypes.string.isRequired,\n    prefix: PropTypes.string.isRequired,\n    icon: PropTypes.array.isRequired,\n  }).isRequired,\n\n  activeToolId: PropTypes.string.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  faPen,\n  faFillDrip,\n  faEraser,\n  faThumbtack,\n  faRadiation,\n  faSun,\n  faGripLinesVertical,\n  faUndoAlt,\n  faChessBoard,\n  faEyeDropper,\n  faMagic,\n  faCameraRetro,\n  faBroom,\n} from '@fortawesome/free-solid-svg-icons';\nimport { faCircle, faSquare, faHandPaper } from '@fortawesome/free-regular-svg-icons';\nimport key from 'weak-key';\nimport constants from '../constants';\nimport ToolButton from './ToolButton';\n\nexport default function ToolsControl({ onClick, activeToolId }) {\n  const Icons = [\n    faPen,\n    faEraser,\n    faFillDrip,\n    faCircle,\n    faSquare,\n    faThumbtack,\n    faRadiation,\n    faSun,\n    faGripLinesVertical,\n    faUndoAlt,\n    faHandPaper,\n    faChessBoard,\n    faEyeDropper,\n    faMagic,\n    faCameraRetro,\n    faBroom,\n  ];\n\n  return (\n    <div className=\"tools-controle\">\n      {\n        Icons.map((item, i) => (\n          <ToolButton\n            key={key(item)}\n            icon={item}\n            onClick={onClick}\n            id={constants.toolButtonsNames[i]}\n            activeToolId={activeToolId}\n          />\n        ))\n      }\n    </div>\n  );\n}\n\nToolsControl.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  activeToolId: PropTypes.string.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nexport default class ColorButton extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.input = React.createRef();\n  }\n\n  render() {\n    const {\n      buttonClass,\n      onClick,\n      id,\n      color,\n      value,\n    } = this.props;\n\n    return (\n      <button\n        className={buttonClass}\n        style={{ backgroundColor: `rgba(${color.join()})` }}\n        onClick={() => this.input.current.click()}\n        type=\"button\"\n      >\n        <input\n          type=\"color\"\n          onChange={() => onClick(id, this.input.current.value)}\n          ref={this.input}\n          value={value}\n        />\n      </button>\n    );\n  }\n}\n\nColorButton.propTypes = {\n  buttonClass: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n  id: PropTypes.number.isRequired,\n  color: PropTypes.arrayOf(PropTypes.number).isRequired,\n  value: PropTypes.string.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faSyncAlt } from '@fortawesome/free-solid-svg-icons';\nimport ColorButton from './ColorButton';\n\n\nexport default function ColorPicker({\n  onClick,\n  mainColor,\n  secondaryColor,\n  swapColor,\n}) {\n  return (\n    <div className=\"color-picker\">\n      <ColorButton\n        buttonClass=\"main color-button\"\n        color={mainColor}\n        id={0}\n        value=\"#5e5e5e\"\n        onClick={onClick}\n      />\n\n      <ColorButton\n        buttonClass=\"secondary color-button\"\n        color={secondaryColor}\n        id={1}\n        value=\"#7423a0\"\n        onClick={onClick}\n      />\n\n      <button\n        onClick={swapColor}\n        className=\"swap-color-button\"\n        type=\"button\"\n      >\n        <FontAwesomeIcon icon={faSyncAlt} />\n      </button>\n    </div>\n  );\n}\n\nColorPicker.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  mainColor: PropTypes.arrayOf(PropTypes.number).isRequired,\n  secondaryColor: PropTypes.arrayOf(PropTypes.number).isRequired,\n  swapColor: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faKeyboard } from '@fortawesome/free-regular-svg-icons';\n\n\nexport default function OpenKeyboardMenuButton({ toggleMenuStatus }) {\n  return (\n    <button\n      className=\"open-keyboard-menu-button\"\n      onClick={toggleMenuStatus}\n      type=\"button\"\n    >\n      <FontAwesomeIcon icon={faKeyboard} />\n    </button>\n  );\n}\n\nOpenKeyboardMenuButton.propTypes = {\n  toggleMenuStatus: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\n\nexport default function KeyboardSettingsButton({\n  id,\n  code,\n  handleClick,\n  icon,\n  activeKeyButton,\n}) {\n  return (\n    <div\n      className=\"keyboard-settings-button\"\n    >\n      <FontAwesomeIcon icon={icon} />\n\n      <button\n        className={`${activeKeyButton === id ? 'active ' : ''}key-button`}\n        onClick={e => handleClick(id, e)}\n        type=\"button\"\n      >\n        {code}\n      </button>\n\n    </div>\n  );\n}\n\nKeyboardSettingsButton.propTypes = {\n  id: PropTypes.string.isRequired,\n  code: PropTypes.string,\n  handleClick: PropTypes.func.isRequired,\n\n  icon: PropTypes.shape({\n    iconName: PropTypes.string.isRequired,\n    prefix: PropTypes.string.isRequired,\n    icon: PropTypes.array.isRequired,\n  }).isRequired,\n\n  activeKeyButton: PropTypes.string.isRequired,\n};\n\nKeyboardSettingsButton.defaultProps = {\n  code: '',\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from 'prop-types';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCircle, faSquare, faHandPaper } from '@fortawesome/free-regular-svg-icons';\nimport {\n  faTimes,\n  faPen,\n  faFillDrip,\n  faEraser,\n  faThumbtack,\n  faRadiation,\n  faSun,\n  faGripLinesVertical,\n  faUndoAlt,\n  faChessBoard,\n  faEyeDropper,\n  faMagic,\n  faCameraRetro,\n  faBroom,\n} from '@fortawesome/free-solid-svg-icons';\nimport key from 'weak-key';\nimport KeyboardSettingsButton from './KeyboardSettingsButton';\nimport constants from '../constants';\n\n\nexport default class KeyboardModalMenu extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      activeKeyButton: '',\n    };\n\n    this.toggleMenuStatus = this.toggleMenuStatus.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.keyboardSettingsWindow = React.createRef();\n  }\n\n  componentWillMount() {\n    this.root = document.createElement('div');\n    this.root.className = 'modal-keyboard-menu';\n    document.body.appendChild(this.root);\n  }\n\n  componentWillUnmount() {\n    document.body.removeChild(this.root);\n  }\n\n\n  handleClick(id, event) {\n    event.stopPropagation();\n    const { buttonsConfiguration, changeButtonConfig } = this.props;\n    const keyboardSettingsWindow = this.keyboardSettingsWindow.current;\n\n    keyboardSettingsWindow.onkeydown = (e) => {\n      e.stopPropagation();\n      const letter = e.code.slice(3, 5).toUpperCase();\n      const index = constants.toolButtonsNames.indexOf(id);\n      const index2 = buttonsConfiguration.indexOf(letter);\n      if (index2 + 1) buttonsConfiguration[index2] = null;\n\n      changeButtonConfig(buttonsConfiguration);\n\n      buttonsConfiguration[index] = letter;\n      this.setState({\n        activeKeyButton: '',\n      });\n\n      keyboardSettingsWindow.onkeydown = null;\n    };\n\n    this.setState({\n      activeKeyButton: id,\n    });\n  }\n\n  toggleMenuStatus(e) {\n    e.stopPropagation();\n\n    this.setState({\n      activeKeyButton: '',\n    });\n\n    this.keyboardSettingsWindow.current.classList.toggle('active');\n  }\n\n  render() {\n    const { activeKeyButton } = this.state;\n    const { buttonsConfiguration, toggleMenuStatus } = this.props;\n    const icons = [\n      faPen,\n      faEraser,\n      faFillDrip,\n      faCircle,\n      faSquare,\n      faThumbtack,\n      faRadiation,\n      faSun,\n      faGripLinesVertical,\n      faUndoAlt,\n      faHandPaper,\n      faChessBoard,\n      faEyeDropper,\n      faMagic,\n      faCameraRetro,\n      faBroom,\n    ];\n\n    return ReactDOM.createPortal(\n      <div className=\"keyboard-settings-window\" ref={this.keyboardSettingsWindow}>\n        {icons.map((icon, i) => (\n          <KeyboardSettingsButton\n            code={buttonsConfiguration[i]}\n            handleClick={this.handleClick}\n            icon={icon}\n            key={key(icon)}\n            id={constants.toolButtonsNames[i]}\n            activeKeyButton={activeKeyButton}\n          />\n        ))}\n\n        <button\n          className=\"exit-button\"\n          onClick={toggleMenuStatus}\n          type=\"button\"\n        >\n          <FontAwesomeIcon icon={faTimes} />\n        </button>\n      </div>,\n      this.root,\n    );\n  }\n}\n\nKeyboardModalMenu.propTypes = {\n  changeButtonConfig: PropTypes.func.isRequired,\n  buttonsConfiguration: PropTypes.arrayOf(PropTypes.string).isRequired,\n  toggleMenuStatus: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport OpenKebouardMenuButton from './OpenKeyboardMenuButton';\nimport KeyboardModalMenu from './KeyboardModalMenu';\n\n\nexport default class KeyboardSettings extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isModalactive: false,\n    };\n\n    this.toggleMenuStatus = this.toggleMenuStatus.bind(this);\n  }\n\n  toggleMenuStatus() {\n    const { isModalactive } = this.state;\n\n    this.setState({\n      isModalactive: !isModalactive,\n    });\n  }\n\n  render() {\n    const { isModalactive } = this.state;\n    const { buttonsConfiguration, changeButtonConfig, changeToolId } = this.props;\n\n    return (\n      <div className=\"keyboard-settings\">\n        <OpenKebouardMenuButton toggleMenuStatus={this.toggleMenuStatus} />\n        {isModalactive && (\n          <KeyboardModalMenu\n            buttonsConfiguration={buttonsConfiguration}\n            changeButtonConfig={changeButtonConfig}\n            changeToolId={changeToolId}\n            toggleMenuStatus={this.toggleMenuStatus}\n          />\n        )}\n      </div>\n    );\n  }\n}\n\nKeyboardSettings.propTypes = {\n  buttonsConfiguration: PropTypes.arrayOf(PropTypes.string).isRequired,\n  changeButtonConfig: PropTypes.func.isRequired,\n  changeToolId: PropTypes.func.isRequired,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ToolsControl from './ToolsControl';\nimport ColorPicker from './ColorPicker';\nimport KeyboardSettings from './KeyboardSettings';\nimport './Tools.scss';\n\nexport default function Tools({\n  handleColorPickerClick,\n  mainColor,\n  secondaryColor,\n  swapColor,\n  changeToolId,\n  activeToolId,\n  buttonsConfiguration,\n  changeButtonConfig,\n}) {\n  return (\n    <div className=\"tools\">\n      <ToolsControl\n        onClick={changeToolId}\n        activeToolId={activeToolId}\n      />\n\n      <ColorPicker\n        onClick={handleColorPickerClick}\n        mainColor={mainColor}\n        secondaryColor={secondaryColor}\n        swapColor={swapColor}\n      />\n\n      <KeyboardSettings\n        buttonsConfiguration={buttonsConfiguration}\n        changeButtonConfig={changeButtonConfig}\n        changeToolId={changeToolId}\n      />\n    </div>\n  );\n}\n\nTools.propTypes = {\n  handleColorPickerClick: PropTypes.func.isRequired,\n  swapColor: PropTypes.func.isRequired,\n  changeToolId: PropTypes.func.isRequired,\n  changeButtonConfig: PropTypes.func.isRequired,\n  mainColor: PropTypes.arrayOf(PropTypes.number).isRequired,\n  secondaryColor: PropTypes.arrayOf(PropTypes.number).isRequired,\n  activeToolId: PropTypes.string.isRequired,\n  buttonsConfiguration: PropTypes.arrayOf(PropTypes.string).isRequired,\n};\n","import React from 'react';\nimport Settings from '../Settings/Settings';\nimport './main.scss';\nimport FramesPreview from '../FramesPreview/FramesPreview';\nimport FramesControl from '../FramesControl/FramesControl';\nimport CanvasContainer from '../Canvas/CanvasContainer';\nimport LayerSettings from '../LayerSettings/LayerSettings';\nimport CreateBaseFrame from '../utils/CreateBaseFrame';\nimport hexToRgb from '../utils/hexToRGB';\nimport makeCopy from '../utils/makeCopy';\nimport Tools from '../Tools/Tools';\nimport constants from '../constants';\n\nexport default class Main extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeToolId: 'pen',\n      pixelSize: 24,\n      canvasSize: 32,\n      layers: [[CreateBaseFrame(32)]],\n      currentFrame: 0,\n      currentLayer: 0,\n      mainColor: [0, 0, 0],\n      secondaryColor: [116, 35, 160],\n      buttonsConfiguration: ['P', 'E', 'B', 'C', 'R', 'L', 'A', 'I', 'M', 'T', 'M', 'D', 'O', 'X', 'N', 'W'],\n    };\n\n    this.changeToolId = this.changeToolId.bind(this);\n    this.handleFrameClick = this.handleFrameClick.bind(this);\n    this.changeFrame = this.changeFrame.bind(this);\n    this.addFrame = this.addFrame.bind(this);\n    this.deleteFrame = this.deleteFrame.bind(this);\n    this.copyFrame = this.copyFrame.bind(this);\n    this.handleColorPickerClick = this.handleColorPickerClick.bind(this);\n    this.swapColor = this.swapColor.bind(this);\n    this.changeCanvasSize = this.changeCanvasSize.bind(this);\n    this.addLayer = this.addLayer.bind(this);\n    this.deleteLayer = this.deleteLayer.bind(this);\n    this.changeCurrentLayer = this.changeCurrentLayer.bind(this);\n    this.upLayer = this.upLayer.bind(this);\n    this.downLayer = this.downLayer.bind(this);\n    this.replaceLayer = this.replaceLayer.bind(this);\n    this.changeColor = this.changeColor.bind(this);\n    this.changeButtonConfig = this.changeButtonConfig.bind(this);\n    this.importLayers = this.importLayers.bind(this);\n  }\n\n  componentDidMount() {\n    const newState = JSON.parse(localStorage.getItem('state'));\n\n    if (newState) {\n      this.setState({\n        activeToolId: newState.activeToolId,\n        pixelSize: newState.pixelSize,\n        canvasSize: newState.canvasSize,\n        layers: newState.layers,\n        currentFrame: newState.currentFrame,\n        currentLayer: newState.currentLayer,\n        mainColor: newState.mainColor,\n        secondaryColor: newState.secondaryColor,\n        buttonsConfiguration: newState.buttonsConfiguration,\n      });\n    }\n\n    window.onunload = () => {\n      const jsonState = JSON.stringify(this.state);\n      localStorage.setItem('state', jsonState);\n    };\n\n    document.body.onkeydown = (e) => {\n      const letter = e.code.slice(3, 5).toUpperCase();\n      const { buttonsConfiguration } = this.state;\n      const index = buttonsConfiguration.indexOf(letter);\n      if (!(index + 1)) return;\n      const id = constants.toolButtonsNames[index];\n      this.changeToolId(id);\n    };\n  }\n\n  componentWillUnmount() {\n    const jsonState = JSON.stringify(this.state);\n    localStorage.setItem('state', jsonState);\n  }\n\n  changeFrame(frame) {\n    const { layers, currentFrame, currentLayer } = this.state;\n    layers[currentLayer][currentFrame] = frame;\n    this.setState({ layers });\n  }\n\n  changeToolId(id) {\n    this.setState({ activeToolId: id });\n  }\n\n  handleColorPickerClick(id, color) {\n    if (id === 0) this.setState({ mainColor: hexToRgb(color) });\n    if (id === 1) this.setState({ secondaryColor: hexToRgb(color) });\n  }\n\n  swapColor() {\n    const { secondaryColor, mainColor } = this.state;\n\n    this.setState({\n      mainColor: secondaryColor,\n      secondaryColor: mainColor,\n    });\n  }\n\n  changeColor(color, targetButton) {\n    if (targetButton === 1) {\n      this.setState({\n        mainColor: color,\n      });\n    }\n\n    if (targetButton === 3) {\n      this.setState({\n        secondaryColor: color,\n      });\n    }\n  }\n\n  handleFrameClick(id) {\n    this.setState({ currentFrame: id });\n  }\n\n  addFrame() {\n    const { layers, canvasSize } = this.state;\n\n    layers.forEach(frames => frames.push(CreateBaseFrame(canvasSize)));\n    this.setState({ layers });\n  }\n\n  copyFrame(id, e) {\n    e.stopPropagation();\n\n    const { layers } = this.state;\n\n    layers.forEach((frames) => {\n      const clone = makeCopy(frames[id]);\n      frames.splice(id, 0, clone);\n    });\n    this.setState({ layers });\n  }\n\n  deleteFrame(id, e) {\n    e.stopPropagation();\n    const { layers, currentLayer } = this.state;\n\n    layers.forEach((frames) => {\n      frames.splice(id, 1);\n    });\n\n    this.setState({\n      currentFrame: layers[currentLayer].length === id ? id - 1 : id,\n      layers,\n    });\n  }\n\n  changeCanvasSize(newCanvasSize) {\n    const {\n      canvasSize, layers, currentLayer, pixelSize,\n    } = this.state;\n    if (newCanvasSize === canvasSize) return;\n    const delta = Math.abs(newCanvasSize - canvasSize) / 2;\n    const pixelDelta = canvasSize / newCanvasSize;\n    const framesLength = layers[currentLayer].length;\n    const mainCanvasContainer = document.querySelector('.main-canvas-container');\n\n    mainCanvasContainer.style.backgroundSize = `${pixelSize * pixelDelta}px ${pixelSize * pixelDelta}px`;\n\n    for (let j = 0; j < layers.length; j += 1) {\n      if (newCanvasSize > canvasSize) {\n        for (let i = 0; i < framesLength; i += 1) {\n          const frame = layers[j][i];\n\n          for (let x = 0; x < canvasSize; x += 1) {\n            frame[x] = Array(delta).concat(frame[x]);\n            frame[x] = frame[x].concat(Array(delta));\n          }\n\n          for (let x = 0; x < delta; x += 1) {\n            frame.unshift(Array(delta * 2));\n            frame.push(Array(delta * 2));\n          }\n        }\n      }\n\n      if (newCanvasSize < canvasSize) {\n        for (let i = 0; i < framesLength; i += 1) {\n          const frame = layers[j][i];\n          frame.splice(0, delta);\n          frame.splice(newCanvasSize, delta);\n\n          for (let x = 0; x < newCanvasSize; x += 1) {\n            frame[x].splice(0, delta);\n            frame[x].splice(newCanvasSize, delta);\n          }\n        }\n      }\n    }\n\n    this.setState({\n      pixelSize: pixelSize * pixelDelta,\n      canvasSize: newCanvasSize,\n      layers,\n    });\n  }\n\n  addLayer() {\n    const { layers, canvasSize } = this.state;\n    const framesCount = layers[0].length;\n    const newLayer = [];\n\n    for (let i = 0; i < framesCount; i += 1) {\n      newLayer.push(CreateBaseFrame(canvasSize));\n    }\n\n    layers.push(newLayer);\n    this.setState({ layers });\n  }\n\n  deleteLayer(id, e) {\n    e.stopPropagation();\n    const { layers } = this.state;\n    layers.splice(id, 1);\n    this.setState({\n      currentLayer: layers.length === id ? id - 1 : id,\n      layers,\n\n    });\n  }\n\n  changeCurrentLayer(id, e) {\n    e.stopPropagation();\n\n    this.setState({\n      currentLayer: id,\n      currentFrame: 0,\n    });\n  }\n\n  upLayer(layerId, e) {\n    const { layers } = this.state;\n    const upedLayer = layers.splice(layerId, 1);\n    layers.splice(layerId - 1, 0, ...upedLayer);\n\n    this.setState({\n      layers,\n      currentLayer: layerId - 1,\n    });\n\n    e.stopPropagation();\n  }\n\n  downLayer(layerId, e) {\n    const { layers } = this.state;\n    const downedLayer = layers.splice(layerId + 1, 1);\n\n    layers.splice(layerId, 0, ...downedLayer);\n\n    this.setState({\n      layers,\n      currentLayer: layerId + 1,\n    });\n\n    e.stopPropagation();\n  }\n\n  replaceLayer(startId, targetId) {\n    const { layers } = this.state;\n\n    const newlayers = layers.map((frames) => {\n      const framesCopy = makeCopy(frames);\n      [framesCopy[startId], framesCopy[targetId]] = [framesCopy[targetId], framesCopy[startId]];\n      return framesCopy;\n    });\n\n    this.setState({\n      layers: newlayers,\n    });\n  }\n\n  async importLayers(event) {\n    event.preventDefault();\n    const file = [...event.target.files].shift();\n    if (!file) return;\n\n    const reader = new FileReader();\n\n    reader.onload = (e) => {\n      const contents = e.target.result;\n\n      this.setState({\n        layers: JSON.parse(contents),\n        currentFrame: 0,\n        currentLayer: 0,\n      });\n    };\n\n    reader.readAsText(file);\n  }\n\n  changeButtonConfig(newButtonConfig) {\n    this.setState({\n      buttonsConfiguration: newButtonConfig,\n    });\n  }\n\n  render() {\n    const {\n      activeToolId,\n      pixelSize,\n      layers,\n      currentFrame,\n      mainColor,\n      secondaryColor,\n      canvasSize,\n      currentLayer,\n      buttonsConfiguration,\n    } = this.state;\n\n    return (\n      <div className=\"app-main\">\n        <Tools\n          handleColorPickerClick={this.handleColorPickerClick}\n          changeButtonConfig={this.changeButtonConfig}\n          swapColor={this.swapColor}\n          changeToolId={this.changeToolId}\n          mainColor={mainColor}\n          secondaryColor={secondaryColor}\n          activeToolId={activeToolId}\n          buttonsConfiguration={buttonsConfiguration}\n        />\n\n        <FramesControl\n          frames={layers[currentLayer]}\n          pixelSize={pixelSize}\n          onClick={this.handleFrameClick}\n          addFrame={this.addFrame}\n          currentFrame={currentFrame}\n          copyFrame={this.copyFrame}\n          deleteFrame={this.deleteFrame}\n          replaceLayer={this.replaceLayer}\n        />\n\n        <CanvasContainer\n          activeToolId={activeToolId}\n          changeFrame={this.changeFrame}\n          frame={makeCopy(layers[currentLayer][currentFrame])}\n          mainColor={mainColor}\n          secondaryColor={secondaryColor}\n          pixelSize={pixelSize}\n          changeMousePosition={this.changeMousePosition}\n          canvasSize={canvasSize}\n          currentFrame={currentFrame}\n          framesLength={layers[currentLayer].length}\n          changeColor={this.changeColor}\n        />\n\n        <div className=\"preview-tools\">\n          <FramesPreview\n            layers={layers}\n            pixelSize={pixelSize}\n          />\n\n          <LayerSettings\n            currentLayer={currentLayer}\n            layers={layers}\n            addLayer={this.addLayer}\n            deleteLayer={this.deleteLayer}\n            changeCurrentLayer={this.changeCurrentLayer}\n            downLayer={this.downLayer}\n            upLayer={this.upLayer}\n          />\n        </div>\n\n        <Settings\n          changeCanvasSize={this.changeCanvasSize}\n          importLayers={this.importLayers}\n          layers={layers}\n          pixelSize={pixelSize}\n        />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport './landingPage.scss';\nimport {\n  faPen,\n  faFillDrip,\n  faEraser,\n  faThumbtack,\n  faRadiation,\n  faSun,\n  faGripLinesVertical,\n  faUndoAlt,\n  faChessBoard,\n  faEyeDropper,\n  faMagic,\n  faCameraRetro,\n  faBroom,\n} from '@fortawesome/free-solid-svg-icons';\nimport { faGithubSquare } from '@fortawesome/free-brands-svg-icons';\nimport { faCircle, faSquare, faHandPaper } from '@fortawesome/free-regular-svg-icons';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport PropTypes from 'prop-types';\n\n\nexport default function LandingPage(props) {\n  const { toggleLandingPage } = props;\n  return (\n    <div className=\"landing-page\">\n      <div className=\"screenshot-container\">\n        <div className=\"information-container\">\n          <h2>Piskel is a free online editor for animated sprites & pixel art</h2>\n          <p>\n            Create animations in your browser.\n            Try an example, use Google sign in to access your gallery or simply create a new sprite.\n          </p>\n          <div className=\"information-button-container\">\n            <button\n              className=\"information-container-button\"\n              onClick={toggleLandingPage}\n              type=\"button\"\n            >\n              Create sprite\n            </button>\n          </div>\n        </div>\n        <div className=\"main-screen-shoot\">\n          <div className=\"main-gif\" />\n        </div>\n      </div>\n\n      <div className=\"tools-explanation-container\">\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faPen} />\n          <span>Regular pen</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faEraser} />\n          <span>Eraser</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faFillDrip} />\n          <span>Paint bucket</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faCircle} />\n          <span>Circle</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faSquare} />\n          <span>Rectangle</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faThumbtack} />\n          <span>Stroke line</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faRadiation} />\n          <span>Paint all same pixels in color</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faGripLinesVertical} />\n          <span>Mirror line</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faUndoAlt} />\n          <span>Rotate 90 deg</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faHandPaper} />\n          <span>Move image</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faChessBoard} />\n          <span>Dithering</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faSun} />\n          <span>Lighten color</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faEyeDropper} />\n          <span>Color picker</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faMagic} />\n          <span>Drag and Drop shapes</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faCameraRetro} />\n          <span>Change colors to opposite</span>\n        </div>\n\n        <div className=\"tool-explonation\">\n          <FontAwesomeIcon icon={faBroom} />\n          <span>Clear current frame</span>\n        </div>\n      </div>\n\n      <div className=\"author-information\">\n        <span>Created by </span>\n        <a href=\"https://github.com/AndreySomov\" className=\"author-link\">\n          Andrey Somov\n          {' '}\n          <FontAwesomeIcon icon={faGithubSquare} />\n        </a>\n      </div>\n\n    </div>\n  );\n}\n\nLandingPage.propTypes = { toggleLandingPage: PropTypes.func.isRequired };\n","import React from 'react';\nimport Header from './header/Header';\nimport Main from './main/Main';\nimport LandingPage from './landingPage/LandingPage';\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLandingPage: true,\n    };\n\n    this.toggleLandingPage = this.toggleLandingPage.bind(this);\n  }\n\n  toggleLandingPage() {\n    const { isLandingPage } = this.state;\n\n    this.setState({\n      isLandingPage: !isLandingPage,\n    });\n  }\n\n  render() {\n    const { isLandingPage } = this.state;\n\n    return (\n      <div className=\"App\">\n        <Header\n          toggleLandingPage={this.toggleLandingPage}\n          isLandingPage={isLandingPage}\n        />\n\n        {isLandingPage && <LandingPage toggleLandingPage={this.toggleLandingPage} />}\n        {!isLandingPage && <Main />}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}