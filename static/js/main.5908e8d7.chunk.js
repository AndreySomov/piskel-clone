(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{142:function(e,t){},144:function(e,t){},167:function(e,t,a){},168:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){},171:function(e,t,a){},172:function(e,t,a){},173:function(e,t,a){},174:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(24),i=a.n(o),c=(a(91),a(4)),l=a(5),s=a(7),u=a(6),m=a(2),p=a(8),h=a(38),v=a(3),f=a(25),d={toolButtonsNames:["pen","eraser","paintBucket","circle","rectangle","stroke","paintAllPixels","lighten","mirror","rotate90deg","move","dithering","colorPicker","shapeSelection","negative","broom"],googleKey:"508015143841-qqc5pr7u0majsitstuntcpuo45ocgfh1.apps.googleusercontent.com"};var g=function(e){var t=e.login;return r.a.createElement(h.GoogleLogin,{clientId:d.googleKey,buttonText:"Login",onSuccess:t,cookiePolicy:"single_host_origin",render:function(e){return r.a.createElement("button",{className:"login-button",onClick:e.onClick,disabled:e.disabled,type:"button"},r.a.createElement(v.a,{icon:f.b}),"  ","Sign in")}})};var y=function(e){var t=e.logout,a=e.userName,n=e.userImg;return r.a.createElement("div",{className:"logout-container"},r.a.createElement("div",{className:"logout-button-container"},r.a.createElement("span",null,"\u041f\u0440\u0438\u0432\u0435\u0442,"," ",a),r.a.createElement(h.GoogleLogout,{buttonText:"Logout",onLogoutSuccess:t,render:function(e){return r.a.createElement("button",{className:"logout-button",onClick:e.onClick,disabled:e.disabled,type:"button"},r.a.createElement(v.a,{icon:f.b}),"  ","Sign out")}})),r.a.createElement("img",{src:n,alt:n,width:"50",height:"50"}))},b=(a(95),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={isLogin:!1,userImg:null,userName:null},a.login=a.login.bind(Object(m.a)(a)),a.logout=a.logout.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"login",value:function(e){var t=e.profileObj,a=t.givenName,n=t.imageUrl;this.setState({isLogin:!0,userImg:n,userName:a})}},{key:"logout",value:function(){this.setState({isLogin:!1,userImg:null,userName:null})}},{key:"render",value:function(){var e=this.state,t=e.isLogin,a=e.userImg,n=e.userName,o=this.props.toggleLandingPage;return r.a.createElement("div",{className:"app-header"},r.a.createElement("button",{className:"piskel-button",onClick:o,type:"button"},r.a.createElement("h1",null,"Piskel")),r.a.createElement("div",{className:"header-buttons-container"},!t&&r.a.createElement(g,{login:this.login}),t&&r.a.createElement(y,{userName:n,userImg:a,logout:this.logout})))}}]),t}(r.a.Component)),E=a(11),C=a.n(E),k=a(26),S=a(39),x=(a(97),a(1)),O=a(10),j=a(13),N=a.n(j);var F=function(e){var t=e.changeCanvasSize;return r.a.createElement("div",{className:"settings-area"},r.a.createElement("button",{className:"settings-button",onClick:function(){return t(32)},type:"button"},"32x32"),r.a.createElement("button",{className:"settings-button",onClick:function(){return t(64)},type:"button"},"64x64"),r.a.createElement("button",{className:"settings-button",onClick:function(){return t(128)},type:"button"},"128x128"))},L=a(84),w=a.n(L),M=a(85),I=a.n(M);var z=function(e,t,a){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=e.getContext("2d");n&&r.clearRect(0,0,e.width,e.height),t.forEach(function(e,t){e.forEach(function(e,n){e&&(r.fillStyle="rgb(".concat(e.join(),")"),r.fillRect(a*t,a*n,a,a))})})};var P=function(e,t,a){var n=document.createElement("a");return n.setAttribute("href",e),n.setAttribute("download","".concat(t,".").concat(a)),n},B=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={fps:12,gifBackgroundColor:"#969696",fileSize:4,fileName:"piskel-clone"},a.fpsInput=r.a.createRef(),a.sizeInput=r.a.createRef(),a.colorInput=r.a.createRef(),a.nameInput=r.a.createRef(),a.changeFps=a.changeFps.bind(Object(m.a)(a)),a.changeGifSize=a.changeGifSize.bind(Object(m.a)(a)),a.changeGifBackgroundColor=a.changeGifBackgroundColor.bind(Object(m.a)(a)),a.changeGifName=a.changeGifName.bind(Object(m.a)(a)),a.exportGif=a.exportGif.bind(Object(m.a)(a)),a.exportRSSFormat=a.exportRSSFormat.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.root=document.createElement("div"),this.root.className="modal-export-menu",document.body.appendChild(this.root)}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.root)}},{key:"choseExportFunction",value:function(e){".gif"===e&&this.exportGif(),".apng"===e&&this.exportApng(),".rss"===e&&this.exportRSSFormat()}},{key:"exportGif",value:function(){var e=Object(k.a)(C.a.mark(function e(){var t,a,n,r,o,i,c,l,s,u,m,p,h,v,f,d,g,y;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=this.state,a=t.gifBackgroundColor,n=t.fps,r=t.fileSize,o=t.fileName,i=32*r,c=this.props,l=c.layers,s=c.pixelSize,u=document.createElement("canvas"),m=u.getContext("2d"),p=new w.a(i,i),768,h=i/768*s,u.width=i,u.height=i,p.setDelay(1e3/n),p.start(),v=0;v<l[0].length;v+=1){for(m.fillStyle=a,m.fillRect(0,0,i,i),f=0;f<l.length;f+=1)z(u,l[f][v],h,!1);p.addFrame(m),m.clearRect(0,0,i,i)}p.finish(),d=p.out.getData(),g=btoa(String.fromCharCode.apply(null,d)),y="data:image/jpg;base64,".concat(g),P(y,o,"gif").click();case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"exportApng",value:function(){var e=Object(k.a)(C.a.mark(function e(){var t,a,n,r,o,i,c,l,s,u,m,p,h,v,f,d,g,y,b,E;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=document.createElement("canvas"),a=this.state,n=a.fps,r=a.fileSize,o=a.fileName,i=32*r,c=this.props,l=c.layers,s=c.pixelSize,t.width=i,t.height=i,u=t.getContext("2d"),768,m=i/768*s,p=[],h=0;h<l[0].length;h+=1){for(v=0;v<l.length;v+=1)z(t,l[v][h],m,!1);f=u.getImageData(0,0,i,i).data,p.push(f.buffer),u.clearRect(0,0,i,i)}d=1e3/n,g=Array(p.length).fill(d),y=I.a.encode(p,i,i,0,g),b=btoa(String.fromCharCode.apply(null,new Uint8Array(y))),E="data:image/jpg;base64,".concat(b),P(E,o,"apng").click();case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"exportRSSFormat",value:function(){var e=Object(k.a)(C.a.mark(function e(){var t,a,n,r,o;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.layers,a=this.state.fileName,n=JSON.stringify(t),r=new Blob([n],{type:"text/plain"}),o=window.URL.createObjectURL(r),P(o,a,"rss").click();case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"changeFps",value:function(e){this.setState({fps:e})}},{key:"changeGifBackgroundColor",value:function(e){this.setState({gifBackgroundColor:e})}},{key:"changeGifSize",value:function(e){this.setState({fileSize:e})}},{key:"changeGifName",value:function(e){this.setState({fileName:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.changeExportMenuStatus,n=t.modalMenuFormat,o=this.state,c=o.gifBackgroundColor,l=o.fps,s=o.fileSize,u=o.fileName;return i.a.createPortal(r.a.createElement("div",{className:"export-menu"},r.a.createElement("span",null,"Export"," ",n),r.a.createElement("div",{className:"export-field"},"File name:",r.a.createElement("input",{className:"nameInput",type:"text",value:u,onChange:function(){return e.changeGifName(e.nameInput.current.value)},ref:this.nameInput})),".gif"===n&&r.a.createElement("div",{className:"export-field"},"Gif background color:",r.a.createElement("button",{className:"color-button",style:{backgroundColor:c},onClick:function(){return e.colorInput.current.click()},type:"button"},r.a.createElement("input",{className:"color-input",type:"color",onChange:function(){return e.changeGifBackgroundColor(e.colorInput.current.value)},ref:this.colorInput,value:c}))),".rss"!==n&&r.a.createElement("div",{className:"export-field"},"FPS rate:"," ",l,r.a.createElement("input",{type:"range",className:"fps-input",onChange:function(){return e.changeFps(e.fpsInput.current.value)},value:l,min:"0",max:"24",ref:this.fpsInput})),".rss"!==n&&r.a.createElement("div",{className:"export-field"},"File dimensions:"," ",32*s,r.a.createElement("input",{type:"range",className:"size-input",onChange:function(){return e.changeGifSize(e.sizeInput.current.value)},value:s,min:"2",max:"24",ref:this.sizeInput})),r.a.createElement("button",{onClick:function(){e.choseExportFunction(n),a(null)},className:"export-button",type:"button"},"Export"),r.a.createElement("button",{className:"export-exit-button",onClick:function(){return a(null)},type:"button"},r.a.createElement(v.a,{icon:x.u}))),this.root)}}]),t}(r.a.Component),A=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={modalMenuFormat:null},a.changeExportMenuStatus=a.changeExportMenuStatus.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"changeExportMenuStatus",value:function(e){var t=this.state.format===e?null:e;this.setState({modalMenuFormat:t})}},{key:"render",value:function(){var e=this,t=this.state.modalMenuFormat,a=this.props,n=a.layers,o=a.pixelSize;return r.a.createElement("div",{className:"settings-area"},r.a.createElement("button",{type:"button",className:"settings-button",onClick:function(){return e.changeExportMenuStatus(".gif")}},".gif"),r.a.createElement("button",{type:"button",className:"settings-button",onClick:function(){return e.changeExportMenuStatus(".apng")}},".apng"),r.a.createElement("button",{type:"button",className:"settings-button",onClick:function(){return e.changeExportMenuStatus(".rss")}},".rss"),t&&r.a.createElement(B,{changeExportMenuStatus:this.changeExportMenuStatus,modalMenuFormat:t,layers:n,pixelSize:o}))}}]),t}(r.a.Component),T=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).input=r.a.createRef(),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.importLayers;return r.a.createElement("div",{className:"settings-area"},r.a.createElement("button",{type:"button",className:"import-button",onClick:function(){return e.input.current.click()}},"Import .rss",r.a.createElement("input",{type:"file",className:"import-input",onInput:function(e){return t(e)},ref:this.input})))}}]),t}(r.a.Component);var R=function(e){var t=e.icon,a=e.onClick,n=e.id,o=e.atciveSettingButton;return r.a.createElement("button",{className:"".concat(o===n?"active ":"","settings-button"),onClick:function(e){return a(n,e)},type:"button"},r.a.createElement(v.a,{icon:t}))},G=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={atciveSettingButton:0},a.settings=r.a.createRef(),a.openMenu=a.openMenu.bind(Object(m.a)(a)),a.closeMenu=a.closeMenu.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"openMenu",value:function(e,t){t.stopPropagation(),this.settings.current.classList.add("activeMenu"),this.setState({atciveSettingButton:e})}},{key:"closeMenu",value:function(){this.settings.current.classList.remove("activeMenu")}},{key:"render",value:function(){var e=this,t=[x.f,O.d,x.l],a=this.state.atciveSettingButton,n=this.props,o=n.changeCanvasSize,i=n.layers,c=n.pixelSize,l=n.importLayers;return r.a.createElement("div",{className:"settings",ref:this.settings},r.a.createElement("div",{className:"buttons-container"},t.map(function(t,n){return r.a.createElement(R,{icon:t,atciveSettingButton:a,id:n,key:N()(t),onClick:e.openMenu})})),0===a&&r.a.createElement(F,{changeCanvasSize:o}),1===a&&r.a.createElement(A,{layers:i,pixelSize:c}),2===a&&r.a.createElement(T,{importLayers:l}),r.a.createElement("button",{className:"exit-menu-button",onClick:this.closeMenu,type:"button"},r.a.createElement(v.a,{icon:x.u})))}}]),t}(r.a.Component),D=(a(167),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).animateFramesPreview=a.animateFramesPreview.bind(Object(m.a)(a)),a.canvas=r.a.createRef(),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){clearTimeout(this.timer),this.animateFramesPreview()}},{key:"animateFramesPreview",value:function(){var e=this.canvas.current,t=this.props,a=t.layers,n=t.fpsInputValue,r=t.pixelSize;if(0!==n){var o=0;this.timer=setInterval(function(){return function(){o>=a[0].length&&(o=0),z(e,a[0][o],r/2);for(var t=1;t<a.length;t+=1)z(e,a[t][o],r/2,!1);o+=1}()},1e3/n)}}},{key:"render",value:function(){return r.a.createElement("canvas",{className:"preview-canvas",width:384,height:384,ref:this.canvas})}}]),t}(r.a.Component)),U=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).getInpuValue=a.getInpuValue.bind(Object(m.a)(a)),a.input=r.a.createRef(),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"getInpuValue",value:function(){(0,this.props.onInput)(this.input.current.value)}},{key:"render",value:function(){var e=this.props,t=e.value,a=e.onClick;return r.a.createElement("div",{className:"preview-setings"},r.a.createElement("span",{className:"fps-count"},t," ","FPS"),r.a.createElement("input",{type:"range",className:"fps-input",value:t,onChange:this.getInpuValue,min:"0",max:"24",ref:this.input}),r.a.createElement("button",{onClick:a,className:"full-screen-button",type:"button"},r.a.createElement(v.a,{icon:x.g})))}}]),t}(r.a.Component),W=(a(168),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={fpsInputValue:10},a.previewArea=r.a.createRef(),a.toggleFullScreen=a.toggleFullScreen.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"handleInput",value:function(e){this.setState({fpsInputValue:+e})}},{key:"toggleFullScreen",value:function(){document.fullscreenElement?document.exitFullscreen():this.previewArea.current.requestFullscreen()}},{key:"render",value:function(){var e=this,t=this.props,a=t.layers,n=t.pixelSize,o=this.state.fpsInputValue;return r.a.createElement("div",{className:"frames-preview",ref:this.previewArea},r.a.createElement(D,{fpsInputValue:o,layers:a,pixelSize:n}),r.a.createElement(U,{value:o,onInput:function(t){return e.handleInput(t)},onClick:this.toggleFullScreen}))}}]),t}(r.a.Component));var J=function(e){var t=e.onClick;return r.a.createElement("button",{className:"frame-copy",onClick:t,type:"button"},r.a.createElement(v.a,{icon:x.h}))};var K=function(e){var t=e.onClick;return r.a.createElement("button",{className:"frame-delete",onClick:t,type:"button"},r.a.createElement(v.a,{icon:x.v}))},V=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).canvas=r.a.createRef(),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.animateFrames()}},{key:"componentDidUpdate",value:function(){this.animateFrames()}},{key:"animateFrames",value:function(){var e=this.canvas.current,t=this.props,a=t.id,n=t.frames,r=t.pixelSize,o=n[a];z(e,o,r/4)}},{key:"render",value:function(){var e=this.props,t=e.active,a=e.onClick,n=e.id,o=e.deleteFrame,i=e.copyFrame,c=e.frames;return r.a.createElement("div",{className:"".concat(t?"active":null," frame"),onClick:function(){return a(n)},role:"presentation",draggable:"true",id:n},r.a.createElement("canvas",{width:"192",height:"192",id:n,ref:this.canvas}),r.a.createElement("div",{className:"frame-count"},n+1),c.length>1&&r.a.createElement(K,{onClick:function(e){return o(n,e)}}),r.a.createElement(J,{onClick:function(e){return i(n,e)}}))}}]),t}(r.a.Component);var q=function(e){var t=e.onClick;return r.a.createElement("button",{className:"add-frame-button",onClick:t,type:"button"},r.a.createElement(v.a,{icon:x.p}),"Add frame")},X=(a(169),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).dropZone=r.a.createRef(),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.dropZone.current;t.ondragstart=function(t){e.startId=t.target.getAttribute("id")},t.ondragenter=function(e){e.target.parentElement.classList.contains("frame")&&e.target.parentElement.classList.add("drag-hovered")},t.ondragleave=function(e){e.target.parentElement.classList.contains("frame")&&e.target.parentElement.classList.remove("drag-hovered")},t.ondragover=function(e){return e.preventDefault()},t.ondrop=function(t){var a=e.props.replaceLayer,n=t.target.getAttribute("id");t.preventDefault(),t.target.parentElement.classList.remove("drag-hovered"),e.startId!==n&&a(e.startId,n)}}},{key:"render",value:function(){var e=this,t=this.props,a=t.onClick,n=t.frames,o=t.currentFrame,i=t.copyFrame,c=t.deleteFrame,l=t.addFrame,s=t.pixelSize;return r.a.createElement("div",{className:"frames-controle",ref:this.dropZone},n.map(function(t,l){return r.a.createElement(V,{onClick:a,frames:n,key:N()(t),id:l,active:o===l,copyFrame:i,deleteFrame:c,pixelSize:s,dragenter:e.dragEnter})}),r.a.createElement(q,{onClick:l}))}}]),t}(r.a.Component));var Y=function(e){var t=e.mousePosX,a=e.mousePosY,n=e.canvasSize,o=e.framesLength,i=e.currentFrame,c=e.isNeedCoords;return r.a.createElement("div",{className:"frame-info"},r.a.createElement("span",null,i+1,"/",o),r.a.createElement("span",null,"[",n,"x",n,"]"),c&&r.a.createElement("span",null,t,"x",a))};var Z=function(e){return JSON.parse(JSON.stringify(e))};var _=function(e,t){var a=e.nativeEvent?e.nativeEvent:e;return{x:Math.floor(a.offsetX/t),y:Math.floor(a.offsetY/t)}};var $=function(e,t,a,n,r,o){for(var i=Z(e),c=_(t,a),l=r-c.x,s=o-c.y,u=Math.min(o,c.y),m=Math.min(r,c.x),p=u;p<=u+Math.abs(s);p+=1)i[c.x+l][p]=n,i[c.x][p]=n;for(var h=m;h<=m+Math.abs(l);h+=1)i[h][c.y]=n,i[h][c.y+s]=n;return i};var H=function(e,t,a,n,r,o){for(var i=_(t,a),c=Math.max(Math.abs(i.x-r),Math.abs(i.y-o)),l=Z(e),s=l.length,u=0,m=c,p=1-2*c;m>=0;){var h=r-u,v=r+u,f=o-m,d=o+m,g=h<0,y=v>=s,b=f<0,E=d>=s,C=2*(p+m)-1,k=2*(p-u)-1;y||E||(l[v][d]=n),y||b||(l[v][f]=n),g||E||(l[h][d]=n),g||b||(l[h][f]=n),p<0&&C<=0?(p+=2*(u+1)+1,u+=1):p>0&&k>0?(p+=1-2*(m-1),m-=1):(p+=2*((u+=1)-m),m-=1)}return l};var Q=function(e,t,a,n){var r=Z(e),o=_(n,a),i=r.length,c=r[o.x][o.y]?r[o.x][o.y].join():void 0;if(c!==t.join())for(var l=[[o.x,o.y]];l.length;){var s=l.pop(),u=s[0],m=s[1];u>=0&&u<i&&m>=0&&m<i&&c===(r[u][m]?r[u][m].join():void 0)&&(r[u][m]=t,l.push([u-1,m],[u+1,m],[u,m-1],[u,m+1]))}return r};var ee=function(e){return Array.from(Array(e),function(){return new Array(e)})};function te(e,t,a,n,r,o){var i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=Z(e),l=Math.abs(a-r),s=Math.abs(n-o),u=r<a?1:-1,m=o<n?1:-1,p=r,h=o,v=l-s,f=e.length/2;do{var d=2*v;if(c[a][n]=t,c[p][h]=t,i)c[f+-(p-f+1)][h]=t;2*v>-s&&(v-=s,p+=u),d<l&&(v+=l,h+=m)}while(p!==a||h!==n);return c}function ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25;return e?e.map(function(e){return Math.min(255,e+t)}):void 0}var ne=function(e,t,a,n){var r=Z(e),o=Math.floor(n.offsetX/a),i=Math.floor(n.offsetY/a),c=r[o][i]?r[o][i].join():void 0;return r.forEach(function(e,a){e.forEach(function(e,n){e&&(r[a][n]?r[a][n].join():void 0)===c&&(r[a][n]=t)})}),r};var re=function(e){for(var t=e.length,a=Z(e),n=0;n<t/2;n+=1)for(var r=n;r<t-n-1;r+=1){var o=a[n][r];a[n][r]=a[t-r-1][n],a[t-r-1][n]=a[t-n-1][t-r-1],a[t-n-1][t-r-1]=a[r][t-n-1],a[r][t-n-1]=o}return a};var oe=function(e,t,a,n,r){var o=n-t,i=a-r,c=Z(e),l=c.length;o>0&&(c=Array.from(Array(o),function(){return new Array(l).fill(null)}).concat(c.slice(0,-o))),o<0&&(c=c.slice(-o).concat(Array.from(Array(-o),function(){return new Array(l).fill(null)})));for(var s=0;s<l;s+=1)i<0&&(c[s]=Array(-i).fill(null).concat(c[s].slice(0,i))),i>0&&(c[s]=c[s].slice(i).concat(Array(i).fill(null)));return c};var ie=function(e,t,a,n,r){var o=Z(e);return o[n][r]=(n+r)%2?a:t,o};var ce=function(e){var t=Z(e);return t.forEach(function(e,a){e.forEach(function(e,n){if(e){var r=e[0],o=e[1],i=e[2];t[a][n]=[255-r,255-o,255-i]}})}),t},le=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).penOrEraserOrMirror=a.penOrEraserOrMirror.bind(Object(m.a)(a)),a.canvas=r.a.createRef(),a.chooseToolFunction=a.chooseToolFunction.bind(Object(m.a)(a)),a.rectangleAndCircle=a.rectangleAndCircle.bind(Object(m.a)(a)),a.stroke=a.stroke.bind(Object(m.a)(a)),a.lighten=a.lighten.bind(Object(m.a)(a)),a.rotateFrame=a.rotateFrame.bind(Object(m.a)(a)),a.moveFrame=a.moveFrame.bind(Object(m.a)(a)),a.ditheringFrame=a.ditheringFrame.bind(Object(m.a)(a)),a.bucket=a.bucket.bind(Object(m.a)(a)),a.shapeSelection=a.shapeSelection.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.frame,a=e.pixelSize,n=this.canvas.current;z(n,t,a)}},{key:"chooseToolFunction",value:function(e){var t=this.props.activeToolId;switch(t){case"pen":case"eraser":case"mirror":this.penOrEraserOrMirror(e);break;case"paintBucket":this.bucket(e);break;case"shapeSelection":this.shapeSelection(e);break;case"circle":case"rectangle":this.rectangleAndCircle(t,e);break;case"stroke":this.stroke(e);break;case"paintAllPixels":this.colorSamePixels(e);break;case"lighten":this.lighten(e);break;case"rotate90deg":this.rotateFrame();break;case"move":this.moveFrame(e);break;case"dithering":this.ditheringFrame(e);break;case"colorPicker":this.colorPicker(e);break;case"negative":case"broom":this.negativeOrBroom()}}},{key:"shapeSelection",value:function(e){var t=this.props,a=t.frame,n=t.pixelSize,r=t.changeFrame,o=this.canvas.current,i=function(e,t,a){var n=Z(e),r=_(a,t),o=n.length,i=n[r.x][r.y]?n[r.x][r.y].join():void 0;if(i){for(var c=ee(e.length),l=[[r.x,r.y]];l.length;){var s=l.pop(),u=s[0],m=s[1];u>=0&&u<o&&m>=0&&m<o&&i===(n[u][m]?n[u][m].join():void 0)&&(c[u][m]=n[u][m],n[u][m]=void 0,l.push([u-1,m],[u+1,m],[u,m-1],[u,m+1]))}return{shape:c,clone:n}}return!1}(a,n,e),c=_(e,n),l=i.clone,s=i.shape,u=i.shape;i&&(o.onmousemove=function(e){var t=_(e,n);u=oe(s,c.x,c.y,t.x,t.y),z(o,l,n),z(o,u,n,!1)},o.onmouseup=function(){o.onmousemove=null,o.onmouseup=null;var e=function(e,t){var a=Z(e);return t.forEach(function(e,t){e.forEach(function(e,n){e&&(a[t][n]=e)})}),a}(l,u);r(e)})}},{key:"negativeOrBroom",value:function(){var e=this.props,t=e.frame;(0,e.changeFrame)("negative"===e.activeToolId?ce(t):ee(t.length))}},{key:"colorPicker",value:function(e){var t=this.props,a=t.frame,n=t.changeColor,r=t.pixelSize,o=_(e,r),i=a[o.x][o.y];i&&n(i,e.nativeEvent.which)}},{key:"ditheringFrame",value:function(e){var t=this.canvas.current,a=this.props,n=a.frame,r=a.mainColor,o=a.secondaryColor,i=a.pixelSize,c=a.changeFrame,l=_(e,i),s=ie(n,r,o,l.x,l.y);z(t,s,i),t.onmousemove=function(e){var a=_(e,i);s=ie(s,r,o,a.x,a.y),z(t,s,i)},t.onmouseup=function(){t.onmousemove=null,t.onmouseup=null,c(s)}}},{key:"moveFrame",value:function(e){var t=this.props,a=t.frame,n=t.pixelSize,r=t.changeFrame,o=this.canvas.current,i=_(e,n),c=Z(a);o.onmousemove=function(e){var t=Z(a),r=_(e,n);c=oe(t,i.x,i.y,r.x,r.y),z(o,c,n)},o.onmouseup=function(){o.onmousemove=null,o.onmouseup=null,r(c)}}},{key:"rotateFrame",value:function(){var e=this.props,t=e.frame;(0,e.changeFrame)(re(t))}},{key:"colorSamePixels",value:function(e){var t=this.props,a=t.frame,n=t.mainColor,r=t.secondaryColor,o=t.pixelSize,i=t.changeFrame,c=3===e.nativeEvent.which?r:n;i(ne(a,c,o,e.nativeEvent))}},{key:"stroke",value:function(e){var t=this.props,a=t.frame,n=t.mainColor,r=t.secondaryColor,o=t.pixelSize,i=t.changeFrame,c=this.canvas.current,l=3===e.nativeEvent.which?r:n,s=_(e,o),u=Z(a);te(u,l,s.x,s.y,s.x,s.y),z(c,a,o),c.onmousemove=function(e){var t=Z(a),n=_(e,o);u=te(t,l,s.x,s.y,n.x,n.y),z(c,u,o)},c.onmouseup=function(){c.onmousemove=null,c.onmouseup=null,i(u)}}},{key:"rectangleAndCircle",value:function(e,t){var a=this.props,n=a.frame,r=a.mainColor,o=a.secondaryColor,i=a.pixelSize,c=a.changeFrame,l=this.canvas.current,s=3===t.nativeEvent.which?o:r,u=_(t,i),m="rectangle"===e?$:H,p=Z(n);p=te(p,s,u.x,u.y,u.x,u.y),z(l,p,i),l.onmousemove=function(e){p=m(n,e,i,s,u.x,u.y),z(l,p,i)},l.onmouseup=function(){l.onmousemove=null,l.onmouseup=null,c(p)}}},{key:"bucket",value:function(e){var t=this.props,a=t.frame,n=t.mainColor,r=t.secondaryColor,o=t.pixelSize,i=t.changeFrame,c=3===e.nativeEvent.which?r:n;i(Q(a,c,o,e.nativeEvent))}},{key:"penOrEraserOrMirror",value:function(e){var t=this.canvas.current,a=this.props,n=a.frame,r=a.mainColor,o=a.secondaryColor,i=a.pixelSize,c=a.changeFrame,l=a.activeToolId,s=_(e,i),u="mirror"===l,m=[s.x,s.y],p=3===e.nativeEvent.which?o:r;"eraser"===l&&(p=void 0);var h=te(n,p,s.x,s.y,s.x,s.y,u);z(t,h,i),t.onmousemove=function(e){var a=_(e,i);m.push(a.x,a.y),m.length>4&&m.splice(0,2),h=te.apply(void 0,[h,p].concat(m,[u])),z(t,h,i)},t.onmouseup=function(){t.onmousemove=null,t.onmouseup=null,c(h)}}},{key:"lighten",value:function(e){var t=this.canvas.current,a=this.props,n=a.frame,r=a.pixelSize,o=a.changeFrame,i=_(e,r),c=ae(n[i.x][i.y]),l=te(n,c,i.x,i.y,i.x,i.y);z(t,l,r),t.onmousemove=function(e){var a=_(e,r);c=ae(l[a.x][a.y]),l=te(l,c,a.x,a.y,a.x,a.y),z(t,l,r)},t.onmouseup=function(){t.onmousemove=null,t.onmouseup=null,o(l)}}},{key:"render",value:function(){return r.a.createElement("canvas",{onMouseDown:this.chooseToolFunction,onContextMenu:function(e){return e.preventDefault()},className:"main-canvas",width:"768",height:"768",ref:this.canvas})}}]),t}(r.a.PureComponent),se=(a(170),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={x:0,y:0,isNeedCoords:!1},a.changeMousePosition=a.changeMousePosition.bind(Object(m.a)(a)),a.deleteCoords=a.deleteCoords.bind(Object(m.a)(a)),a.canvasContainer=r.a.createRef(),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"deleteCoords",value:function(){this.setState({isNeedCoords:!1})}},{key:"changeMousePosition",value:function(e){var t=this.props.pixelSize,a=Math.floor(e.nativeEvent.offsetX/t),n=Math.floor(e.nativeEvent.offsetY/t);this.setState({x:a,y:n,isNeedCoords:!0})}},{key:"render",value:function(){var e=this.props,t=e.activeToolId,a=e.changeFrame,n=e.frame,o=e.mainColor,i=e.secondaryColor,c=e.pixelSize,l=e.canvasSize,s=e.currentFrame,u=e.framesLength,m=e.changeColor,p=this.state,h=p.x,v=p.y,f=p.isNeedCoords;return r.a.createElement("div",{className:"main-canvas"},r.a.createElement("div",{className:"main-canvas-container",onMouseMove:this.changeMousePosition,onMouseLeave:this.deleteCoords,ref:this.canvasContainer},r.a.createElement(le,{activeToolId:t,changeFrame:a,frame:n,mainColor:o,secondaryColor:i,pixelSize:c,canvasSize:l,currentFrame:s,framesLength:u,changeColor:m})),r.a.createElement("div",{className:"main-canvas-info"},r.a.createElement(Y,{canvasSize:l,framesLength:u,currentFrame:s,mousePosX:h,mousePosY:v,isNeedCoords:f})))}}]),t}(r.a.Component));var ue=function(e){var t=e.id,a=e.deleteLayer,n=e.changeCurrentLayer,o=e.currentLayer,i=e.layers,c=e.upLayer,l=e.downLayer;return r.a.createElement("div",{id:t,onClick:function(e){return n(t,e)},className:"".concat(o===t?"active ":"","layer-view"),role:"presentation"},"Layer",t+1,r.a.createElement("div",{className:"layers-button-container"},i.length>1&&t!==i.length-1&&r.a.createElement("button",{className:"position layer-button",onClick:function(e){return l(t,e)},type:"button"},r.a.createElement(v.a,{icon:x.a})),i.length>1&&r.a.createElement("button",{className:"delete layer-button",onClick:function(e){return a(t,e)},type:"button"},r.a.createElement(v.a,{icon:x.v})),i.length>1&&0!==t&&r.a.createElement("button",{className:"position layer-button",onClick:function(e){return c(t,e)},type:"button"},r.a.createElement(v.a,{icon:x.b}))))};a(171);var me=function(e){var t=e.layers,a=e.addLayer,n=e.deleteLayer,o=e.changeCurrentLayer,i=e.currentLayer,c=e.upLayer,l=e.downLayer;return r.a.createElement("div",{className:"layer-settings"},r.a.createElement("div",{className:"layer-settings-header"},r.a.createElement("button",{className:"add-layer-button",onClick:a,type:"button"},r.a.createElement(v.a,{icon:x.p}),"Add layer")),r.a.createElement("div",{className:"layer-settings-container"},t.map(function(e,a){return r.a.createElement(ue,{id:a,key:N()(e),deleteLayer:n,changeCurrentLayer:o,currentLayer:i,layers:t,upLayer:c,downLayer:l})})))};var pe=function(e){return e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,a,n){return"#".concat(t).concat(t).concat(a).concat(a).concat(n).concat(n)}).substring(1).match(/.{2}/g).map(function(e){return parseInt(e,16)})};var he=function(e){var t=e.id,a=e.activeToolId,n=e.icon,o=e.onClick;return r.a.createElement("button",{className:"".concat(t===a?"active":null," tool-button"),onClick:function(){return o(t)},type:"button"},r.a.createElement(v.a,{icon:n}))};var ve=function(e){var t=e.onClick,a=e.activeToolId,n=[x.o,x.i,x.k,O.a,O.e,x.t,x.q,x.r,x.m,x.w,O.b,x.e,x.j,x.n,x.d,x.c];return r.a.createElement("div",{className:"tools-controle"},n.map(function(e,n){return r.a.createElement(he,{key:N()(e),icon:e,onClick:t,id:d.toolButtonsNames[n],activeToolId:a})}))},fe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).input=r.a.createRef(),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.buttonClass,n=t.onClick,o=t.id,i=t.color,c=t.value;return r.a.createElement("button",{className:a,style:{backgroundColor:"rgba(".concat(i.join(),")")},onClick:function(){return e.input.current.click()},type:"button"},r.a.createElement("input",{type:"color",onChange:function(){return n(o,e.input.current.value)},ref:this.input,value:c}))}}]),t}(r.a.Component);var de=function(e){var t=e.onClick,a=e.mainColor,n=e.secondaryColor,o=e.swapColor;return r.a.createElement("div",{className:"color-picker"},r.a.createElement(fe,{buttonClass:"main color-button",color:a,id:0,value:"#5e5e5e",onClick:t}),r.a.createElement(fe,{buttonClass:"secondary color-button",color:n,id:1,value:"#7423a0",onClick:t}),r.a.createElement("button",{onClick:o,className:"swap-color-button",type:"button"},r.a.createElement(v.a,{icon:x.s})))};function ge(e){var t=e.toggleMenuStatus;return r.a.createElement("button",{className:"open-keyboard-menu-button",onClick:t,type:"button"},r.a.createElement(v.a,{icon:O.c}))}function ye(e){var t=e.id,a=e.code,n=e.handleClick,o=e.icon,i=e.activeKeyButton;return r.a.createElement("div",{className:"keyboard-settings-button"},r.a.createElement(v.a,{icon:o}),r.a.createElement("button",{className:"".concat(i===t?"active ":"","key-button"),onClick:function(e){return n(t,e)},type:"button"},a))}ye.defaultProps={code:""};var be=ye,Ee=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={activeKeyButton:""},a.toggleMenuStatus=a.toggleMenuStatus.bind(Object(m.a)(a)),a.handleClick=a.handleClick.bind(Object(m.a)(a)),a.keyboardSettingsWindow=r.a.createRef(),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.root=document.createElement("div"),this.root.className="modal-keyboard-menu",document.body.appendChild(this.root)}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.root)}},{key:"handleClick",value:function(e,t){var a=this;t.stopPropagation();var n=this.props,r=n.buttonsConfiguration,o=n.changeButtonConfig,i=this.keyboardSettingsWindow.current;i.onkeydown=function(t){t.stopPropagation();var n=t.code.slice(3,5).toUpperCase(),c=d.toolButtonsNames.indexOf(e),l=r.indexOf(n);l+1&&(r[l]=null),o(r),r[c]=n,a.setState({activeKeyButton:""}),i.onkeydown=null},this.setState({activeKeyButton:e})}},{key:"toggleMenuStatus",value:function(e){e.stopPropagation(),this.setState({activeKeyButton:""}),this.keyboardSettingsWindow.current.classList.toggle("active")}},{key:"render",value:function(){var e=this,t=this.state.activeKeyButton,a=this.props,n=a.buttonsConfiguration,o=a.toggleMenuStatus,c=[x.o,x.i,x.k,O.a,O.e,x.t,x.q,x.r,x.m,x.w,O.b,x.e,x.j,x.n,x.d,x.c];return i.a.createPortal(r.a.createElement("div",{className:"keyboard-settings-window",ref:this.keyboardSettingsWindow},c.map(function(a,o){return r.a.createElement(be,{code:n[o],handleClick:e.handleClick,icon:a,key:N()(a),id:d.toolButtonsNames[o],activeKeyButton:t})}),r.a.createElement("button",{className:"exit-button",onClick:o,type:"button"},r.a.createElement(v.a,{icon:x.u}))),this.root)}}]),t}(r.a.Component),Ce=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={isModalactive:!1},a.toggleMenuStatus=a.toggleMenuStatus.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"toggleMenuStatus",value:function(){var e=this.state.isModalactive;this.setState({isModalactive:!e})}},{key:"render",value:function(){var e=this.state.isModalactive,t=this.props,a=t.buttonsConfiguration,n=t.changeButtonConfig,o=t.changeToolId;return r.a.createElement("div",{className:"keyboard-settings"},r.a.createElement(ge,{toggleMenuStatus:this.toggleMenuStatus}),e&&r.a.createElement(Ee,{buttonsConfiguration:a,changeButtonConfig:n,changeToolId:o,toggleMenuStatus:this.toggleMenuStatus}))}}]),t}(r.a.Component);a(172);var ke=function(e){var t=e.handleColorPickerClick,a=e.mainColor,n=e.secondaryColor,o=e.swapColor,i=e.changeToolId,c=e.activeToolId,l=e.buttonsConfiguration,s=e.changeButtonConfig;return r.a.createElement("div",{className:"tools"},r.a.createElement(ve,{onClick:i,activeToolId:c}),r.a.createElement(de,{onClick:t,mainColor:a,secondaryColor:n,swapColor:o}),r.a.createElement(Ce,{buttonsConfiguration:l,changeButtonConfig:s,changeToolId:i}))},Se=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={activeToolId:"pen",pixelSize:24,canvasSize:32,layers:[[ee(32)]],currentFrame:0,currentLayer:0,mainColor:[0,0,0],secondaryColor:[116,35,160],buttonsConfiguration:["P","E","B","C","R","L","A","I","M","T","M","D","O","X","N","W"]},a.changeToolId=a.changeToolId.bind(Object(m.a)(a)),a.handleFrameClick=a.handleFrameClick.bind(Object(m.a)(a)),a.changeFrame=a.changeFrame.bind(Object(m.a)(a)),a.addFrame=a.addFrame.bind(Object(m.a)(a)),a.deleteFrame=a.deleteFrame.bind(Object(m.a)(a)),a.copyFrame=a.copyFrame.bind(Object(m.a)(a)),a.handleColorPickerClick=a.handleColorPickerClick.bind(Object(m.a)(a)),a.swapColor=a.swapColor.bind(Object(m.a)(a)),a.changeCanvasSize=a.changeCanvasSize.bind(Object(m.a)(a)),a.addLayer=a.addLayer.bind(Object(m.a)(a)),a.deleteLayer=a.deleteLayer.bind(Object(m.a)(a)),a.changeCurrentLayer=a.changeCurrentLayer.bind(Object(m.a)(a)),a.upLayer=a.upLayer.bind(Object(m.a)(a)),a.downLayer=a.downLayer.bind(Object(m.a)(a)),a.replaceLayer=a.replaceLayer.bind(Object(m.a)(a)),a.changeColor=a.changeColor.bind(Object(m.a)(a)),a.changeButtonConfig=a.changeButtonConfig.bind(Object(m.a)(a)),a.importLayers=a.importLayers.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(localStorage.getItem("state"));t&&this.setState({activeToolId:t.activeToolId,pixelSize:t.pixelSize,canvasSize:t.canvasSize,layers:t.layers,currentFrame:t.currentFrame,currentLayer:t.currentLayer,mainColor:t.mainColor,secondaryColor:t.secondaryColor,buttonsConfiguration:t.buttonsConfiguration}),window.onunload=function(){var t=JSON.stringify(e.state);localStorage.setItem("state",t)},document.body.onkeydown=function(t){var a=t.code.slice(3,5).toUpperCase(),n=e.state.buttonsConfiguration.indexOf(a);if(n+1){var r=d.toolButtonsNames[n];e.changeToolId(r)}}}},{key:"componentWillUnmount",value:function(){var e=JSON.stringify(this.state);localStorage.setItem("state",e)}},{key:"changeFrame",value:function(e){var t=this.state,a=t.layers,n=t.currentFrame;a[t.currentLayer][n]=e,this.setState({layers:a})}},{key:"changeToolId",value:function(e){this.setState({activeToolId:e})}},{key:"handleColorPickerClick",value:function(e,t){0===e&&this.setState({mainColor:pe(t)}),1===e&&this.setState({secondaryColor:pe(t)})}},{key:"swapColor",value:function(){var e=this.state,t=e.secondaryColor,a=e.mainColor;this.setState({mainColor:t,secondaryColor:a})}},{key:"changeColor",value:function(e,t){1===t&&this.setState({mainColor:e}),3===t&&this.setState({secondaryColor:e})}},{key:"handleFrameClick",value:function(e){this.setState({currentFrame:e})}},{key:"addFrame",value:function(){var e=this.state,t=e.layers,a=e.canvasSize;t.forEach(function(e){return e.push(ee(a))}),this.setState({layers:t})}},{key:"copyFrame",value:function(e,t){t.stopPropagation();var a=this.state.layers;a.forEach(function(t){var a=Z(t[e]);t.splice(e,0,a)}),this.setState({layers:a})}},{key:"deleteFrame",value:function(e,t){t.stopPropagation();var a=this.state,n=a.layers,r=a.currentLayer;n.forEach(function(t){t.splice(e,1)}),this.setState({currentFrame:n[r].length===e?e-1:e,layers:n})}},{key:"changeCanvasSize",value:function(e){var t=this.state,a=t.canvasSize,n=t.layers,r=t.currentLayer,o=t.pixelSize;if(e!==a){var i=Math.abs(e-a)/2,c=a/e,l=n[r].length;document.querySelector(".main-canvas-container").style.backgroundSize="".concat(o*c,"px ").concat(o*c,"px");for(var s=0;s<n.length;s+=1){if(e>a)for(var u=0;u<l;u+=1){for(var m=n[s][u],p=0;p<a;p+=1)m[p]=Array(i).concat(m[p]),m[p]=m[p].concat(Array(i));for(var h=0;h<i;h+=1)m.unshift(Array(2*i)),m.push(Array(2*i))}if(e<a)for(var v=0;v<l;v+=1){var f=n[s][v];f.splice(0,i),f.splice(e,i);for(var d=0;d<e;d+=1)f[d].splice(0,i),f[d].splice(e,i)}}this.setState({pixelSize:o*c,canvasSize:e,layers:n})}}},{key:"addLayer",value:function(){for(var e=this.state,t=e.layers,a=e.canvasSize,n=t[0].length,r=[],o=0;o<n;o+=1)r.push(ee(a));t.push(r),this.setState({layers:t})}},{key:"deleteLayer",value:function(e,t){t.stopPropagation();var a=this.state.layers;a.splice(e,1),this.setState({currentLayer:a.length===e?e-1:e,layers:a})}},{key:"changeCurrentLayer",value:function(e,t){t.stopPropagation(),this.setState({currentLayer:e,currentFrame:0})}},{key:"upLayer",value:function(e,t){var a=this.state.layers,n=a.splice(e,1);a.splice.apply(a,[e-1,0].concat(Object(S.a)(n))),this.setState({layers:a,currentLayer:e-1}),t.stopPropagation()}},{key:"downLayer",value:function(e,t){var a=this.state.layers,n=a.splice(e+1,1);a.splice.apply(a,[e,0].concat(Object(S.a)(n))),this.setState({layers:a,currentLayer:e+1}),t.stopPropagation()}},{key:"replaceLayer",value:function(e,t){var a=this.state.layers.map(function(a){var n=Z(a),r=[n[t],n[e]];return n[e]=r[0],n[t]=r[1],n});this.setState({layers:a})}},{key:"importLayers",value:function(){var e=Object(k.a)(C.a.mark(function e(t){var a,n,r=this;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=Object(S.a)(t.target.files).shift()){e.next=4;break}return e.abrupt("return");case 4:(n=new FileReader).onload=function(e){var t=e.target.result;r.setState({layers:JSON.parse(t),currentFrame:0,currentLayer:0})},n.readAsText(a);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"changeButtonConfig",value:function(e){this.setState({buttonsConfiguration:e})}},{key:"render",value:function(){var e=this.state,t=e.activeToolId,a=e.pixelSize,n=e.layers,o=e.currentFrame,i=e.mainColor,c=e.secondaryColor,l=e.canvasSize,s=e.currentLayer,u=e.buttonsConfiguration;return r.a.createElement("div",{className:"app-main"},r.a.createElement(ke,{handleColorPickerClick:this.handleColorPickerClick,changeButtonConfig:this.changeButtonConfig,swapColor:this.swapColor,changeToolId:this.changeToolId,mainColor:i,secondaryColor:c,activeToolId:t,buttonsConfiguration:u}),r.a.createElement(X,{frames:n[s],pixelSize:a,onClick:this.handleFrameClick,addFrame:this.addFrame,currentFrame:o,copyFrame:this.copyFrame,deleteFrame:this.deleteFrame,replaceLayer:this.replaceLayer}),r.a.createElement(se,{activeToolId:t,changeFrame:this.changeFrame,frame:Z(n[s][o]),mainColor:i,secondaryColor:c,pixelSize:a,changeMousePosition:this.changeMousePosition,canvasSize:l,currentFrame:o,framesLength:n[s].length,changeColor:this.changeColor}),r.a.createElement("div",{className:"preview-tools"},r.a.createElement(W,{layers:n,pixelSize:a}),r.a.createElement(me,{currentLayer:s,layers:n,addLayer:this.addLayer,deleteLayer:this.deleteLayer,changeCurrentLayer:this.changeCurrentLayer,downLayer:this.downLayer,upLayer:this.upLayer})),r.a.createElement(G,{changeCanvasSize:this.changeCanvasSize,importLayers:this.importLayers,layers:n,pixelSize:a}))}}]),t}(r.a.Component);a(173);var xe=function(e){var t=e.toggleLandingPage;return r.a.createElement("div",{className:"landing-page"},r.a.createElement("div",{className:"screenshot-container"},r.a.createElement("div",{className:"information-container"},r.a.createElement("h2",null,"Piskel is a free online editor for animated sprites & pixel art"),r.a.createElement("p",null,"Create animations in your browser. Try an example, use Google sign in to access your gallery or simply create a new sprite."),r.a.createElement("div",{className:"information-button-container"},r.a.createElement("button",{className:"information-container-button",onClick:t,type:"button"},"Create sprite"))),r.a.createElement("div",{className:"main-screen-shoot"},r.a.createElement("div",{className:"main-gif"}))),r.a.createElement("div",{className:"tools-explanation-container"},r.a.createElement("div",{className:"tool-explonation"},r.a.createElement(v.a,{icon:x.o}),r.a.createElement("span",null,"Regular pen")),r.a.createElement("div",{className:"tool-explonation"},r.a.createElement(v.a,{icon:x.i}),r.a.createElement("span",null,"Eraser")),r.a.createElement("div",{className:"tool-explonation"},r.a.createElement(v.a,{icon:x.k}),r.a.createElement("span",null,"Paint bucket")),r.a.createElement("div",{className:"tool-explonation"},r.a.createElement(v.a,{icon:O.a}),r.a.createElement("span",null,"Circle")),r.a.createElement("div",{className:"tool-explonation"},r.a.createElement(v.a,{icon:O.e}),r.a.createElement("span",null,"Rectangle")),r.a.createElement("div",{className:"tool-explonation"},r.a.createElement(v.a,{icon:x.t}),r.a.createElement("span",null,"Stroke line")),r.a.createElement("div",{className:"tool-explonation"},r.a.createElement(v.a,{icon:x.q}),r.a.createElement("span",null,"Paint all same pixels in color")),r.a.createElement("div",{className:"tool-explonation"},r.a.createElement(v.a,{icon:x.m}),r.a.createElement("span",null,"Mirror line")),r.a.createElement("div",{className:"tool-explonation"},r.a.createElement(v.a,{icon:x.w}),r.a.createElement("span",null,"Rotate 90 deg")),r.a.createElement("div",{className:"tool-explonation"},r.a.createElement(v.a,{icon:O.b}),r.a.createElement("span",null,"Move image")),r.a.createElement("div",{className:"tool-explonation"},r.a.createElement(v.a,{icon:x.e}),r.a.createElement("span",null,"Dithering")),r.a.createElement("div",{className:"tool-explonation"},r.a.createElement(v.a,{icon:x.r}),r.a.createElement("span",null,"Lighten color")),r.a.createElement("div",{className:"tool-explonation"},r.a.createElement(v.a,{icon:x.j}),r.a.createElement("span",null,"Color picker")),r.a.createElement("div",{className:"tool-explonation"},r.a.createElement(v.a,{icon:x.n}),r.a.createElement("span",null,"Drag and Drop shapes")),r.a.createElement("div",{className:"tool-explonation"},r.a.createElement(v.a,{icon:x.d}),r.a.createElement("span",null,"Change colors to opposite")),r.a.createElement("div",{className:"tool-explonation"},r.a.createElement(v.a,{icon:x.c}),r.a.createElement("span",null,"Clear current frame"))),r.a.createElement("div",{className:"author-information"},r.a.createElement("span",null,"Created by "),r.a.createElement("a",{href:"https://github.com/AndreySomov",className:"author-link"},"Andrey Somov"," ",r.a.createElement(v.a,{icon:f.a}))))},Oe=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={isLandingPage:!0},a.toggleLandingPage=a.toggleLandingPage.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"toggleLandingPage",value:function(){var e=this.state.isLandingPage;this.setState({isLandingPage:!e})}},{key:"render",value:function(){var e=this.state.isLandingPage;return r.a.createElement("div",{className:"App"},r.a.createElement(b,{toggleLandingPage:this.toggleLandingPage,isLandingPage:e}),e&&r.a.createElement(xe,{toggleLandingPage:this.toggleLandingPage}),!e&&r.a.createElement(Se,null))}}]),t}(r.a.Component);i.a.render(r.a.createElement(Oe,null),document.getElementById("root"))},86:function(e,t,a){e.exports=a(174)},91:function(e,t,a){},95:function(e,t,a){},97:function(e,t,a){}},[[86,1,2]]]);
//# sourceMappingURL=main.5908e8d7.chunk.js.map